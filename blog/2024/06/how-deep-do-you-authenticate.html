<!DOCTYPE html>
<html lang="en">
<head>
<title>How deep do you authenticate? - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - How deep do you authenticate?" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2024/06/how-deep-do-you-authenticate.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - How deep do you authenticate?" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="How deep do you authenticate? - Accessing applications usually entails some kind of identity. Some part(s) of your application provide identity (called IdP), while other&#39;s consume it (paraphrased from Captain Obvious). Identity could be provided from a record or document in your or another database, an LDAP directory, an OICD or a" />
<meta name="Keywords"
	content="Development,Identity Management,JWT,WebDevelopment," />
<meta name="Abstract"
	content="How deep do you authenticate? - Accessing applications usually entails some kind of identity. Some part(s) of your application provide identity (called IdP), while other&#39;s consume it (paraphrased from Captain Obvious). Identity could be provided from a record or document in your or another database, an LDAP directory, an OICD or a" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/admonition.css" />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2024/">2024</a> <span class="divider">/</span></li>
  <li><a href="/blog/2024/06/">June</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/development.html">Development</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/identitymanagement.html">Identity Management</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/jwt.html">JWT</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/webdevelopment.html">WebDevelopment</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2024/06/nosql-schema-design.html"><i class="icon-hand-left"></i>NoSQL schema design</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2024/07/hexagonal-architecture-meets-maven.html">Hexagonal Architecture meets Maven<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>How deep do you authenticate?</small></h1>
					<hr />
					<div><p>Accessing applications usually entails some kind of identity. Some part(s) of your application provide identity (called <a href="https://www.cloudflare.com/learning/access-management/what-is-an-identity-provider/">IdP</a>), while other's consume it (paraphrased from <a href="https://en.wikipedia.org/wiki/Captain_Obvious">Captain Obvious</a>). Identity could be provided from a record or document in your or another database, an LDAP directory, an <a href="https://auth0.com/docs/authenticate/protocols/openid-connect-protocol">OICD</a> or a 3d party like your eMail provider or social account, or with some hoops and loops <a href="https://webauthn.io/">Webauthn</a> (a.k.a <a href="https://fidoalliance.org/passkeys/">passkey</a>).</p>
<p>The question is: how deep does it go?</p>
<h3>A typical archtecture</h3>
<p>For simplicity I'm skipping load balancers and cache facilities</p>
<p><a href="/blog/images/2024/ApplicationTiers.png"><img src="/blog/images/2024/ApplicationTiers640.png" alt="ApplicationTiers 0-4"></a></p>
<p>Each tier might or might not have its own identity, lets have a closer look</p>
<h3>(0) User tier</h3>
<p>When is authentication information stored at the user tier (think Browser, app or OS) and how immediate is it? Like a username/password or a passkey private key. Those can be exchanged for a token. Or is it a session cookie or an access_token allowing immediate access? How are those credentials protected and/or synced? How vulnerable are they on physical access?</p>
<h3>(1) Access tier</h3>
<p>A.k.a the firewall or VPN Does it assert a valid user? Are the credentials the same or different from your application. Does your access tier include IP ranges or geo location as part of identity? I've seen identity requirements 100% on VPN, but rarely on firewalls</p>
<h3>(2) Web tier</h3>
<p>TYpically you find a static web server like <a href="https://nginx.org/en/">nginx</a>, <a href="https://httpd.apache.org/">Apache http</a>, the <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Kubernetes Ingress</a> or a service by <a href="https://www.cloudflare.com/network-services/products/">a cloud provider</a>.</p>
<p>Even when all your static resources are served by your application tier, you can identify your web tier where requests flow through. When you can establish identity there (and reject invalid ones), you have one more protective layer. nginx+ can do that <a href="https://docs.nginx.com/nginx/admin-guide/security-controls/configuring-jwt-authentication/">with JWT</a></p>
<h3>(3) Application tier</h3>
<p>YOur application could be a <a href="https://en.wikipedia.org/wiki/Monolithic_application">monolith</a>, <a href="https://www.ufried.com/blog/microservices_fallacy_10_microliths/">microlith</a>, <a href="https://microservices.io/">microservice</a>, follow a <a href="https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch01.html">layered architecture</a>, be <a href="https://blog.knoldus.com/message-driven-architecture/">message driven</a>, <a href="https://www.confluent.io/resources/ebook/designing-event-driven-systems/">event driven</a> or be contemporary with the <a href="https://amzn.to/4bx0qG5">hexagonal architecture</a>. In any case your user facing access will require identity.</p>
<p>It becomes blurry when your user facing services then call out to other services (via http or message/event), what identity are they using to communicate: user, service or both? You might start looking at <a href="https://auth0.com/docs/manage-users/access-control/rbac">RBAC</a>. In any case, this needs to be planned carefully</p>
<h3>(4) Persistence / database tier</h3>
<p>The prevalent examples you find online , especially in the realm of <a href="https://www.google.com/search?q=dbaas">DBaaS</a>, use just one service identity to access your persistence (file system, database , <a href="https://wiki.lspace.org/Imps">imp</a>, etc.). So database logs won't tell you who accessed data (RW/RO) and you won't have a chance to implement <a href="https://www.immuta.com/guides/data-security-101/row-level-security/">row level security</a>.</p>
<p>Interestingly this isn't a limitation of databases, they all come with user management, but rather the headache maintaining it or setup <a href="https://www.postgresql.org/docs/9.4/auth-methods.html">another auth</a></p>
<p>When we designed the <a href="https://opensource.hcltechsw.com/Domino-rest-api/">Domino REST API</a>, we decided to stick to the <a href="https://jwt.io">JWT</a> based user identity all the way to the database. <a href="https://couchdb.apache.org/">Apache CouchDB</a> also allows for <a href="https://docs.couchdb.org/en/stable/api/server/authn.html#jwt-authentication">JWT based authentication</a>. It was lacking the ability to point to an IdP's jwks, so I contributed the <a href="https://github.com/beyonddemise/couchdb-idp-updater">CouchDB IdP updater</a>, go check it out.</p>
<p>How do you use identity?</p></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 23 June 2024
<span class="divider">|</span>
<a href="/blog/2024/06/how-deep-do-you-authenticate.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/development.html">Development</a>  <a href="/blog/categories/identitymanagement.html">Identity Management</a>  <a href="/blog/categories/jwt.html">JWT</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2024/06/how-deep-do-you-authenticate.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_8ae12d70-2e27-11ef-b830-776c65d39a8f" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_8ae12d70-2e27-11ef-b830-776c65d39a8f"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li id="nocomments">
							<h5>No comments yet, be the first to comment</h5>
						</li>
					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2024/06/nosql-schema-design.html"><i class="icon-hand-left"></i>NoSQL schema design</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2024/07/hexagonal-architecture-meets-maven.html">Hexagonal Architecture meets Maven<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2024/">2024</a> <span class="divider">/</span></li>
  <li><a href="/blog/2024/06/">June</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/development.html">Development</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/identitymanagement.html">Identity Management</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/jwt.html">JWT</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/webdevelopment.html">WebDevelopment</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="https://www.stickermule.com/u/43c09fe6343315f">Stickers from Stickermule</a></li>
						<li><a href="https://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
						<li><a href="https://github.com/Stwissel">GitHub</a></li>
						<li><a href="https://bitbucket.org/stwissel/">Bitbucket</a></li>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2024 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2024/06/how-deep-do-you-authenticate.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script type="text/javascript" src="/blog/js2/admonition.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "8ae12d70-2e27-11ef-b830-776c65d39a8f");
 		};
	</script>

</body>
</html>
