<!DOCTYPE html>
<html lang="en">
<head>
<title>OData - the fine print - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - OData - the fine print" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2020/03/odata-the-fine-print.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - OData - the fine print" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2020 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="OData - the fine print - For an upcoming event I had to dig a little deeper into OData and learned a few things along the lines. Same but different OData&#39;s current version is 4.0 and that&#39;s the only version I will focus on in this article. OData is the love child of an effort that joined Microsoft and SAP at the hip to crea" />
<meta name="Keywords"
	content="OpenSource,WebDevelopment," />
<meta name="Abstract"
	content="OData - the fine print - For an upcoming event I had to dig a little deeper into OData and learned a few things along the lines. Same but different OData&#39;s current version is 4.0 and that&#39;s the only version I will focus on in this article. OData is the love child of an effort that joined Microsoft and SAP at the hip to crea" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2020/">2020</a> <span class="divider">/</span></li>
  <li><a href="/blog/2020/03/">March</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/opensource.html">OpenSource</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/webdevelopment.html">WebDevelopment</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2020/02/domino-administration-back-to-basics-part-2.html"><i class="icon-hand-left"></i>Domino Administration Back to Basics (Part 2) - Networking</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2020/03/running-java-applications-with-notes-on-macos.html">Running Java applications with Notes on macOS<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>OData - the fine print</small></h1>
					<hr />
					<div><p>For an <a href="https://stwissel.github.io/presentations/engage2020/index.html">upcoming event</a> I had to dig a little deeper into <a href="https://www.odata.org/">OData</a> and learned a few things along the lines.</p> 
<h3>Same but different</h3> 
<p>OData's current version is <a href="http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part1-protocol.html">4.0</a> and that's the only version I will focus on in this article.</p> 
<p>OData is the love child of an effort that joined Microsoft and SAP <a href="https://www.frankensteins-laboratory.com/home-page">at the hip</a> to create an universal internet data access standard, that on first sight has a lot of <a href="https://en.wikipedia.org/wiki/Not_invented_here">NIH</a> issues to sort out. But I'm sure on a second (or third or forth) look it will all make sense.</p> 
<h3>Key components of OData</h3> 
<ul> 
 <li>a service document in <code>JSON</code> format. It describes what data endpoints are available and where. Depending on the requested scope (more on that later) that JSON contains different levels of details</li> 
 <li>a meta data document. That document is referenced in the service document. The format is <code>XML</code>. It describes the data format found in each record, relations to other record and actions that can be taken. Looks like <a href="https://en.wikipedia.org/wiki/XML_schema">XML Schema</a>, but not quite. <em>Record</em> is used loosely here, data can be hierarchical and nested</li> 
 <li>a query language squeezed into an URL, so data can be fetched using <code>HTTP GET</code> without using a body submitted. Query allows data selections, filtering, output size and sorting to be specified</li> 
 <li>Query results in JSON format enhanced with <a href="http://docs.oasis-open.org/odata/odata-json-format/v4.01/odata-json-format-v4.01.html">OData specific Metadata</a></li> 
</ul> 
<p>What I liked a lot: <a href="https://www.odata.org/">OData.org</a> offers a rich set of documentation and tutorials, including a <a href="https://www.postman.com/">Postman</a> collection to learn</p> 
<h3>Happy soup</h3> 
<p>So dealing with OData you can enjoy a mix of technologies:</p> 
<ul> 
 <li>JSON for service document and payloads</li> 
 <li>XML for meta data</li> 
 <li>a dot notation (like dotNet or Java) for property values like data types (go <a href="https://www.odata.org/getting-started/understand-odata-in-6-steps/">learn about it</a>). E.g. <code>Edm.String</code> defines a String value or <code>Org.OData.Core.V1.ResourcePath</code> the path to data</li> 
 <li>another query language</li> 
 <li>individual items by default get addressed in an uncommon format: <code>serviceurl/People('johndoe')</code>. Luckily this is optional and you can use the more common format for a route: <code>serviceurl/People/johndoe</code>. This seems to be born out of squezing the <em>square pin</em> URL into the <em>round hole</em> of database schemas and flexible primary keys</li> 
</ul> 
<p>On the upside: Your Salesforce and Excel users will love it. Import and CRUD operations are well supported.</p> 
<p>Initially I was looking at <a href="http://olingo.apache.org/">Apache Olingo</a> to implement my needs. Unfortunately the library is too close to the Java servlet model and static defined data models (like your one application, not your data platform), so I disected my needs the hard way.</p> 
<h3>Lessons learned along the way</h3> 
<ul> 
 <li>A OData client (think Excel, Tableau, Salesforce) will initially connect to the service document url. It sends a <code>GET</code> request. To specify what level of detail is required the <code>ACCEPT</code> header is used. So when testing your provider implementation you need to take that into account</li> 
 <li>Excel sends <code>ACCEPT application/json;odata.metadata=minimal</code></li> 
 <li>Salesforce sends <code>ACCEPT application/json;odata.metadata=full</code></li> 
 <li>OpenAPI can specify the top level <code>application/json</code> or the full qualified content type in the response. If you fully qualify it, you might end up with a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/406">406</a> and wonder what happens</li> 
 <li>The meta data url gets specified in your service document and is usually the service document url extended by <code>/$metadata</code></li> 
 <li>I ran into a potential Salesforce bug, where the meta data URL was ignored and the service document URL extended by <code>$metadata</code>. Note the missing <code>/</code>. Caused a bit of grief since Excel does <code>/$metadata</code></li> 
 <li>Everything is case sensitive, which makes sense, but is fun in Domino that treats item names case insensitive</li> 
 <li>I couldn't get Salesforce to play nice until I added a field <code>ExternalId</code> to my form. Might be my lack of understanding how to change the primary key Salesforce will play nice with or something missing in my Metadata</li> 
</ul> 
<h3>Same, same, but different</h3> 
<p>Swap out the GET for a POST and the XML for something not-quite-JSON and you get <a href="https://graphql.org/">GraphQL</a> that tries to address a similar set of functionalities. We really love wheels reinvented</p> 
<p>More lessons to be learned, stay tuned!</p></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 04 March 2020
<span class="divider">|</span>
<a href="/blog/2020/03/odata-the-fine-print.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/opensource.html">OpenSource</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2020/03/odata-the-fine-print.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_3f7c2eb0-5920-11ea-bc53-e13ee52fcb38" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_3f7c2eb0-5920-11ea-bc53-e13ee52fcb38"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li id="nocomments">
							<h5>No comments yet, be the first to comment</h5>
						</li>
					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2020/02/domino-administration-back-to-basics-part-2.html"><i class="icon-hand-left"></i>Domino Administration Back to Basics (Part 2) - Networking</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2020/03/running-java-applications-with-notes-on-macos.html">Running Java applications with Notes on macOS<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2020/">2020</a> <span class="divider">/</span></li>
  <li><a href="/blog/2020/03/">March</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/opensource.html">OpenSource</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/webdevelopment.html">WebDevelopment</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2022 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2020/03/odata-the-fine-print.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "3f7c2eb0-5920-11ea-bc53-e13ee52fcb38");
 		};
	</script>

</body>
</html>
