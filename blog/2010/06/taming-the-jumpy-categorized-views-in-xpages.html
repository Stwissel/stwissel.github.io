<!DOCTYPE html>
<html lang="en">
<head>
<title>Taming the jumpy categorized Views in XPages - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Taming the jumpy categorized Views in XPages" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2010/06/taming-the-jumpy-categorized-views-in-xpages.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Taming the jumpy categorized Views in XPages" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2020 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Taming the jumpy categorized Views in XPages - I am not a fan of categorized views in web applications and have suggested alternative uses before. However beautiy is in the eye of the beholder, so categorized views are used. When a category is rendered it sits on its own tablerow (tr) in a tabletag (td) that has a colspan attribute. This effecti" />
<meta name="Keywords"
	content="XPages," />
<meta name="Abstract"
	content="Taming the jumpy categorized Views in XPages - I am not a fan of categorized views in web applications and have suggested alternative uses before. However beautiy is in the eye of the beholder, so categorized views are used. When a category is rendered it sits on its own tablerow (tr) in a tabletag (td) that has a colspan attribute. This effecti" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/">2010</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/06/">June</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2010/06/learning-java.html"><i class="icon-hand-left"></i>Learning Java</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2010/06/the-appstore-wars.html">The AppStore wars<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Taming the jumpy categorized Views in XPages</small></h1>
					<hr />
					<div>I am not a fan of categorized views in web applications and have <a href="/blog/2009/07/showing-categorized-views-in-web-applications.html">suggested alternative uses</a> before. However beautiy is in the eye of the beholder, so categorized views are used. When a category is rendered it sits on its own tablerow (tr) in a tabletag (td) that has a colspan attribute. This effectively disables the column width settings for your view until you expand the category to show a full row of data resulting in some "screen jumping". While that won't sink the Titanic it is a little odd. Short of rolling your own rendering using a repeat control, there is a fix consisting of 2 JavaScript functions (one for the server, one for the client and a little addition in the source code panel. This works in all categorized views. However when you have a column with a column total rendering might be different since XPages doesn't render the colspan attribute then. Lets get started. Open your source pane and locate the view panel and the xp:this.facets. Here you insert a scriptBlock like this: 
<div class="xml"> 
 <ol> 
  <li class="li1"> 
   <div class="de1"> <span class="sc3"><span class="re1">{xp:this.facets<span class="re2">}</span></span></span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="sc3"><span class="re1">{xp:pager</span> <span class="re0">partialRefresh</span>=<span class="st0">"true"</span> <span class="re0">layout</span>=<span class="st0">"Previous Group Next"</span></span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="sc3">&nbsp; &nbsp; <span class="re0">xp:key</span>=<span class="st0">"headerPager"</span> <span class="re0">id</span>=<span class="st0">"pager1"</span><span class="re2">}</span></span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="sc3"><span class="re1">{/xp:pager<span class="re2">}</span></span></span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">{xp:scriptBlock</span> <span class="re0">xp:key</span>=<span class="st0">"south"</span> <span class="re0">id</span>=<span class="st0">"scriptBlock1"</span><span class="re2">}</span></span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="sc3"><span class="re1">{xp:this.value<span class="re2">}</span></span></span> <span class="sc2">{![CDATA[#{javascript:return getClientJSforTableLayout("viewPanel1");} ] ] }</span> <span class="sc3"><span class="re1">{/xp:this.value<span class="re2">}</span></span></span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">{/xp:scriptBlock<span class="re2">}</span></span></span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="sc3"><span class="re1">{/xp:this.facets<span class="re2">}</span></span></span> 
   </div></li> 
 </ol> 
</div> (Replace { } with &lt; and &gt; except inside the CDATA section). Then you add 2 JavaScript libraries to your XPage: <code>CatViewPatches.js</code> and <code>TableSupportFunctions.jss</code>. They will fix the column width. One caveat: you have to specify the width for all columns otherwise the unspecified columns get 100/{number-of-columns}% width assigned.The ServerSide JS: 
<div class="javascript"> 
 <ol> 
  <li class="li1"> 
   <div class="de1"> <span class="kw2">function</span> getClientJSforTableLayout <span class="br0">(</span>tableID <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="coMULTI">/**</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp; &nbsp; &nbsp; * This code has as result JavaScript source code that is send down to the client]</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp; &nbsp; */</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw2">var</span> curTable <span class="sy0">=</span> getComponent <span class="br0">(</span> <span class="st0">"viewPanel1"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> curID <span class="sy0">=</span> getClientId <span class="br0">(</span> <span class="st0">"viewPanel1"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> tablewidth <span class="sy0">=</span> extractWidthFromStyle <span class="br0">(</span>curTable. <span class="me1">viewStyle</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> result <span class="sy0">=</span> <span class="st0">"fixCatTableWidth(<span class="es0">\"</span>"</span> <span class="sy0">;</span> <span class="co1">// This holds the JavaScript we return to the browser</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; result <span class="sy0">+=</span> curID <span class="sy0">+</span> <span class="st0">"<span class="es0">\"</span>,<span class="es0">\"</span>"</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="co1">// Here we compute the sizeString</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> kids <span class="sy0">=</span> curTable. <span class="me1">getChildren</span> <span class="br0">(</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> defaultPercent <span class="sy0">=</span> Math. <span class="me1">floor</span> <span class="br0">(</span> <span class="nu0">100</span> <span class="sy0">/</span>kids. <span class="me1">size</span> <span class="br0">(</span> <span class="br0">)</span> <span class="br0">)</span> <span class="sy0">+</span> <span class="st0">"% "</span> <span class="sy0">;</span> <span class="co1">// You have to love flexi data types</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span> <span class="kw2">var</span> x <span class="kw1">in</span> kids <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> styleCandidate <span class="sy0">=</span> x. <span class="me1">style</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>styleCandidate <span class="sy0">==</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">+=</span> defaultPercent <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> candidate2 <span class="sy0">=</span> extractWidthFromStyle <span class="br0">(</span>styleCandidate <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>candidate2 <span class="sy0">==</span> <span class="st0">""</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">+=</span> defaultPercent <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">+=</span> candidate2 <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">+=</span> <span class="st0">" "</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; result <span class="sy0">+=</span> <span class="st0">"<span class="es0">\"</span>,<span class="es0">\"</span>"</span> <span class="sy0">+</span>tablewidth <span class="sy0">+</span> <span class="st0">"<span class="es0">\"</span>);"</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">return</span> result <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="br0">}</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="kw2">function</span> extractWidthFromStyle <span class="br0">(</span>styleCandidate <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> result <span class="sy0">=</span> <span class="st0">""</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> whereisWidth <span class="sy0">=</span> styleCandidate. <span class="me1">indexOf</span> <span class="br0">(</span> <span class="st0">"width:"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>whereisWidth <span class="sy0">&lt;</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">=</span> <span class="st0">""</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> workString <span class="sy0">=</span> styleCandidate. <span class="me1">substr</span> <span class="br0">(</span>whereisWidth <span class="sy0">+</span> <span class="nu0">6</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> hasSemiColon <span class="sy0">=</span> workString. <span class="me1">indexOf</span> <span class="br0">(</span> <span class="st0">";"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>hasSemiColon <span class="sy0">&lt;</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">=</span> workString <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">=</span> workString. <span class="me1">substr</span> <span class="br0">(</span> <span class="nu0">0</span> <span class="sy0">,</span>hasSemiColon <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw1">return</span> result <span class="sy0">;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="br0">}</span> 
   </div></li> 
 </ol> 
</div> The Client Side JS: 
<div class="javascript"> 
 <ol> 
  <li class="li1"> 
   <div class="de1"> <span class="kw2">function</span> fixCatTableWidth <span class="br0">(</span>tableID <span class="sy0">,</span> sizeString <span class="sy0">,</span> tableSize <span class="br0">)</span> <span class="br0">{</span> &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="co1">// Reset the outer table width</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> outer <span class="sy0">=</span> dojo. <span class="me1">byId</span> <span class="br0">(</span>tableID <span class="sy0">+</span> <span class="st0">"_OUTER_TABLE"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>tableSize <span class="sy0">==</span> <span class="kw2">null</span> <span class="sy0">||</span> tableSize <span class="sy0">==</span> <span class="st0">""</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; outer. <span class="me1">style</span>. <span class="me1">width</span> <span class="sy0">=</span> <span class="st0">"100%"</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; outer. <span class="me1">style</span>. <span class="me1">width</span> <span class="sy0">=</span> tableSize <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> newWidth <span class="sy0">=</span> sizeString. <span class="me1">split</span> <span class="br0">(</span> <span class="st0">" "</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw2">var</span> max <span class="sy0">=</span> newWidth. <span class="me1">length</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="co1">// Get the table and all header elements</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> table <span class="sy0">=</span> dojo. <span class="me1">byId</span> <span class="br0">(</span>tableID <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> allHeaders <span class="sy0">=</span> table. <span class="me1">getElementsByTagName</span> <span class="br0">(</span> <span class="st0">"th"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> maxHeaders <span class="sy0">=</span> allHeaders. <span class="me1">length</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span>i <span class="sy0">=</span> <span class="nu0">0</span> <span class="sy0">;</span>i <span class="sy0">&lt;</span>maxHeaders <span class="sy0">;</span>i <span class="sy0">++</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> curWidth <span class="sy0">=</span> <span class="br0">(</span>i <span class="sy0">&gt;</span> max <span class="br0">)</span> <span class="sy0">?</span> newWidth <span class="br0">[</span>max <span class="br0">]</span> <span class="sy0">:</span> newWidth <span class="br0">[</span>i <span class="br0">]</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; allHeaders <span class="br0">[</span>i <span class="br0">]</span>. <span class="me1">style</span>. <span class="me1">width</span> <span class="sy0">=</span> curWidth <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="br0">}</span> 
   </div></li> 
 </ol> 
</div> As usual: YMMV</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 29 June 2010
<span class="divider">|</span>
<a href="/blog/2010/06/taming-the-jumpy-categorized-views-in-xpages.html#comments">Comments (6)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/xpages.html">XPages</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2010/06/taming-the-jumpy-categorized-views-in-xpages.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_C47F0C276A78A7D34825775100138921" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_C47F0C276A78A7D34825775100138921"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>Atin Palekar</b> on <i>Friday 02 July 2010 AD</i>:<br /> 
  Hi Stephan, 
  <br /> 
  <br />Thanks for the workaround. 
  <br /> 
  <br />For a categorized view not containing totals, I have been able to resolve the jumpy behavior by carefully setting XPages viewpanel &amp; viewcolumn properties as follows 
  <br />1. Set viewpanel width to a 100% 
  <br />2. Do not specify any width for the view column headers and set the disableTheme property to true 
  <br />3. Specify the width for ALL view columns in percent so that the total adds up to 100% 
  <br />4. Care needs to be taken so that width does not fall below the minimum needed to display contents (eg. icon/checkbox) 
  <br />5. For categorized &amp; view icon columns, set disableTheme to true for allowing width to be reduced as per need 
  <br />6. For categorized columns, set white-space:nowrap in the style attributes to prevent wrapping of categories 
  <br />The only problem here is that view icons do not display if width is specified for the concerned column. But for view icon columns, if I specify width as required in step 4 and then remove it, things seem to work fine. This method seems to be working in IE7 &amp; 8 with most view display requirements at our end. It can also be adapted for total width other than 100% (or fixed width in pixels, etc) as long as the sum total of individual column widths adds up to the total width of the view panel. Would appreciate your expert opinion on whether there could be any loopholes where this method should fail. 
  <br /> 
  <br />My main problem was for categorized views with totals, where XPages does not seem to span the category values across columns, thus disturbing column width settings. Though the JS workaround did not work directly, I was able to apply the technique described to check which of the view columns are categorized (in SSJS), loop thru all view data rows, change their colspan as needed and remove interim columns (in CSJS). 
  <br /> 
  <br />Not sure if these workarounds are ready (in terms of different environments, browsers, etc) to be posted for re-use but in tandem they should provide the final pieces for developers looking to build Notes-client like views in XPages with exactly matching look-n-feel 
  <br /> 
  <br />Thanks again
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Monday 05 July 2010 AD</i>:<br /> 
  Setting the view panel parameters doesn't work for all browsers, so that's what this code is all about. 
  <br />Views with Totals are a little more tricky. It can be solved. However you need to be very careful what you wish for (You might just get it). Your guideline for UI should 
  <b>not</b> be &quot; 
  <i>must look like Notes</i>&quot; - we had that in the R5 days. It better be &quot; 
  <i>a modern web UI</i>&quot;. There is a very good guideline available from IBM called the 
  <a href="http://www-12.lotus.com/ldd/doc/oneuidoc/docpublic/index.htm">IBM OneUI</a>. Looking at it I can't find a categorized view there. Going back to my 
  <a href="http://www.wissel.net/blog/d6plinks/SHWL-7UDMQS">original suggestions</a> how to handle categorized views I can see the need for 
  <a href="http://www-12.lotus.com/ldd/doc/oneuidoc/docpublic/components/breadcrumbs.htm">breadcrumbs</a>, 
  <a href="http://www-12.lotus.com/ldd/doc/oneuidoc/docpublic/components/tree.htm">Tree controls</a>, 
  <a href="http://www-12.lotus.com/ldd/doc/oneuidoc/docpublic/components/tableGrid.htm">TableGrids</a> or eventually a 
  <a href="http://www.dojotoolkit.org/reference-guide/dojox/grid/TreeGrid.html">Dojo TreeGrid</a> (check the 
  <a href="http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/grid/tests/test_treegrid.html">original example</a>). You would need to create a custom control once and then use that instead of the view control. There are also some very interesting things coming in 8.5.2 - but that's a story for another day. 
  <br /> 
  <br />As usual: YMMV
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Wayne Allen</b> on <i>Monday 22 November 2010 AD</i>:<br /> 
  Stephan, 
  <br /> 
  <br />Could you post an example of how to append a button column to the end of a view. What I am aiming to achieve is to add a button to the end of every view row that lets users delete the document. 
  <br /> 
  <br />Cheers, 
  <br />Wayne
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Sanjeet Uchil</b> on <i>Monday 03 September 2012 AD</i>:<br /> 
  I have followed the instructions as mentioned. But it doesn't seem to work. What could be the issue? I have two category columns and I am working on 8.5.1
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Monday 03 September 2012 AD</i>:<br /> 
  @Sanjeet: what do you expect to happen, what did happen and what happens on a current version? I don't code for older versions
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Monday 03 September 2012 AD</i>:<br /> 
  @Sanjeet: what do you expect to happen, what did happen and what happens on a current version? I don't code for older versions
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2010/06/learning-java.html"><i class="icon-hand-left"></i>Learning Java</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2010/06/the-appstore-wars.html">The AppStore wars<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/">2010</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/06/">June</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2022 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2010/06/taming-the-jumpy-categorized-views-in-xpages.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "C47F0C276A78A7D34825775100138921");
 		};
	</script>

</body>
</html>
