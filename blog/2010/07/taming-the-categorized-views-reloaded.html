<!DOCTYPE html>
<html lang="en">
<head>
<title>Taming the categorized views - reloaded - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Taming the categorized views - reloaded" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2010/07/taming-the-categorized-views-reloaded.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Taming the categorized views - reloaded" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2020 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Taming the categorized views - reloaded - My previous solution was designed for categorised views that don&#39;t use column totals. The difference between a view control with and without column totals is subtle but important. Without totals a category row is rendered with a colspan attribute that allows the categories to freely flow over the wh" />
<meta name="Keywords"
	content="XPages," />
<meta name="Abstract"
	content="Taming the categorized views - reloaded - My previous solution was designed for categorised views that don&#39;t use column totals. The difference between a view control with and without column totals is subtle but important. Without totals a category row is rendered with a colspan attribute that allows the categories to freely flow over the wh" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/admonition.css" />
<link href='//fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

    <script> 
var $buoop = {notify:{e:-0.01,f:-0.01,o:-0.01,s:-0.01,c:-0.01},insecure:true,unsupported:true,api:5}; 
function $buo_f(){ 
 var e = document.createElement("script"); 
 e.src = "//browser-update.org/update.min.js"; 
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script>

    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/">2010</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/07/">July</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2010/07/developing-your-xpages-skills.html"><i class="icon-hand-left"></i>Developing your XPages skills</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2010/07/meet-the-xsp-object.html">Meet the XSP object<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Taming the categorized views - reloaded</small></h1>
					<hr />
					<div>My <a href="/blog/2010/06/taming-the-jumpy-categorized-views-in-xpages.html">previous solution</a> was designed for categorised views that don't use column totals. The difference between a view control with and without column totals is subtle but important. Without totals a category row is rendered with a colspan attribute that allows the categories to freely flow over the whole width of the table. Are column totals present no colspan is used and the column for the category must be wide enough to accommodate the full content. With a little JavaScript that can be fixed. The server side JS now looks like this: 
<div class="javascript"> 
 <ol> 
  <li class="li1"> 
   <div class="de1"> <span class="kw2">function</span> getClientJSforTableLayout <span class="br0">(</span>tableID <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="coMULTI">/**</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp; &nbsp; &nbsp; * This code has as result JavaScript source code that is send down to the client]</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp; &nbsp; */</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw2">var</span> curTable <span class="sy0">=</span> getComponent <span class="br0">(</span>tableID <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> curID <span class="sy0">=</span> getClientId <span class="br0">(</span>tableID <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> tablewidth <span class="sy0">=</span> extractWidthFromStyle <span class="br0">(</span>curTable. <span class="me1">viewStyle</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> result <span class="sy0">=</span> <span class="st0">"fixCatTableSpan(<span class="es0">\"</span>"</span> <span class="sy0">+</span>curID <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; result <span class="sy0">+=</span> <span class="st0">"<span class="es0">\"</span>);<span class="es0">\n</span>"</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; result <span class="sy0">+=</span> <span class="st0">"fixCatTableWidth(<span class="es0">\"</span>"</span> <span class="sy0">;</span> <span class="co1">// This holds the JavaScript we return to the browser</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; result <span class="sy0">+=</span> curID <span class="sy0">+</span> <span class="st0">"<span class="es0">\"</span>,[<span class="es0">\"</span>"</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="co1">// Here we compute the sizeString</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> kids <span class="sy0">=</span> curTable. <span class="me1">getChildren</span> <span class="br0">(</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw2">var</span> defaultPercent <span class="sy0">=</span> Math. <span class="me1">floor</span> <span class="br0">(</span> <span class="nu0">100</span> <span class="sy0">/</span>kids. <span class="me1">size</span> <span class="br0">(</span> <span class="br0">)</span> <span class="br0">)</span> <span class="sy0">+</span> <span class="st0">"% "</span> <span class="sy0">;</span> <span class="co1">// You have to love flexi data types</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> perCentArray <span class="sy0">=</span> <span class="br0">[</span> <span class="br0">]</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span> <span class="kw2">var</span> x <span class="kw1">in</span> kids <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> styleCandidate <span class="sy0">=</span> x. <span class="me1">style</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>styleCandidate <span class="sy0">==</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; perCentArray <span class="br0">[</span>perCentArray. <span class="me1">length</span> <span class="br0">]</span> <span class="sy0">=</span> defaultPercent <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> candidate2 <span class="sy0">=</span> extractWidthFromStyle <span class="br0">(</span>styleCandidate <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>candidate2 <span class="sy0">==</span> <span class="st0">""</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; perCentArray <span class="br0">[</span>perCentArray. <span class="me1">length</span> <span class="br0">]</span> <span class="sy0">=</span> defaultPercent <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; perCentArray <span class="br0">[</span>perCentArray. <span class="me1">length</span> <span class="br0">]</span> <span class="sy0">=</span> candidate2 <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; result <span class="sy0">+=</span> perCentArray. <span class="me1">join</span> <span class="br0">(</span> <span class="st0">"<span class="es0">\"</span>, <span class="es0">\"</span>"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; result <span class="sy0">+=</span> <span class="st0">"<span class="es0">\"</span>],<span class="es0">\"</span>"</span> <span class="sy0">+</span>tablewidth <span class="sy0">+</span> <span class="st0">"<span class="es0">\"</span>);"</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">return</span> result <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="br0">}</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="kw2">function</span> extractWidthFromStyle <span class="br0">(</span>styleCandidate <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> result <span class="sy0">=</span> <span class="st0">""</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> whereisWidth <span class="sy0">=</span> styleCandidate. <span class="me1">indexOf</span> <span class="br0">(</span> <span class="st0">"width:"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>whereisWidth <span class="sy0">&lt;</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">=</span> <span class="st0">""</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> workString <span class="sy0">=</span> styleCandidate. <span class="me1">substr</span> <span class="br0">(</span>whereisWidth <span class="sy0">+</span> <span class="nu0">6</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> hasSemiColon <span class="sy0">=</span> workString. <span class="me1">indexOf</span> <span class="br0">(</span> <span class="st0">";"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>hasSemiColon <span class="sy0">&lt;</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">=</span> workString <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result <span class="sy0">=</span> workString. <span class="me1">substr</span> <span class="br0">(</span> <span class="nu0">0</span> <span class="sy0">,</span>hasSemiColon <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw1">return</span> result <span class="sy0">;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="br0">}</span> 
   </div></li> 
 </ol> 
</div>while the client side JS now is this: 
<div class="javascript"> 
 <ol> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="kw2">function</span> fixCatTableWidth <span class="br0">(</span>tableID <span class="sy0">,</span> sizeArray <span class="sy0">,</span> tableSize <span class="br0">)</span> <span class="br0">{</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="co1">// Reset the outer table width</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> outer <span class="sy0">=</span> dojo. <span class="me1">byId</span> <span class="br0">(</span>tableID <span class="sy0">+</span> <span class="st0">"_OUTER_TABLE"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>tableSize <span class="sy0">==</span> <span class="kw2">null</span> <span class="sy0">||</span> tableSize <span class="sy0">==</span> <span class="st0">""</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; outer. <span class="me1">style</span>. <span class="me1">width</span> <span class="sy0">=</span> <span class="st0">"100%"</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; outer. <span class="me1">style</span>. <span class="me1">width</span> <span class="sy0">=</span> tableSize <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> &nbsp; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> max <span class="sy0">=</span> sizeArray. <span class="me1">length</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="co1">// Get the table and all header elements</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> table <span class="sy0">=</span> dojo. <span class="me1">byId</span> <span class="br0">(</span>tableID <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> allHeaders <span class="sy0">=</span> table. <span class="me1">getElementsByTagName</span> <span class="br0">(</span> <span class="st0">"th"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw2">var</span> maxHeaders <span class="sy0">=</span> allHeaders. <span class="me1">length</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span>i <span class="sy0">=</span> <span class="nu0">0</span> <span class="sy0">;</span>i <span class="sy0">&lt;</span>maxHeaders <span class="sy0">;</span>i <span class="sy0">++</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> curWidth <span class="sy0">=</span> <span class="br0">(</span>i <span class="sy0">&gt;</span> max <span class="br0">)</span> <span class="sy0">?</span> sizeArray <span class="br0">[</span>max <span class="br0">]</span> <span class="sy0">:</span> sizeArray <span class="br0">[</span>i <span class="br0">]</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; allHeaders <span class="br0">[</span>i <span class="br0">]</span>. <span class="me1">style</span>. <span class="me1">width</span> <span class="sy0">=</span> curWidth <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2"> <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">/**</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp;* Finds for a given element inside a table hierarchy the table data</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp;* element it is contained in</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2"> <span class="coMULTI">&nbsp;**/</span> &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="kw2">function</span> getEnclosingTdTag <span class="br0">(</span>startElement <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> parent <span class="sy0">=</span> startElement. <span class="me1">parentNode</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">while</span> <span class="br0">(</span>parent <span class="sy0">!=</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>parent. <span class="me1">tagName</span> <span class="sy0">==</span> <span class="st0">"td"</span> <span class="sy0">||</span> parent. <span class="me1">tagName</span> <span class="sy0">==</span> <span class="st0">"TD"</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; parent <span class="sy0">=</span> parent. <span class="me1">parentNode</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">return</span> parent <span class="sy0">;</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2"> <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">/**</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp;* Gets all categorized rows and replaces empty td with colspan</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">**/</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2"> <span class="kw2">function</span> fixCatTableSpan <span class="br0">(</span>tableID <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> tbl <span class="sy0">=</span> dojo. <span class="me1">byId</span> <span class="br0">(</span>tableID <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> allButtons <span class="sy0">=</span> tbl. <span class="me1">getElementsByTagName</span> <span class="br0">(</span> <span class="st0">"button"</span> <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> max <span class="sy0">=</span> allButtons. <span class="me1">length</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span>i <span class="sy0">=</span> <span class="nu0">0</span> <span class="sy0">;</span> i <span class="sy0">&lt;</span>max <span class="sy0">;</span>i <span class="sy0">++</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> curButton <span class="sy0">=</span> allButtons <span class="br0">[</span>i <span class="br0">]</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>curButton. <span class="me1">title</span> <span class="sy0">==</span> <span class="st0">"collapsed"</span> <span class="sy0">||</span> curButton. <span class="me1">title</span> <span class="sy0">==</span> <span class="st0">"expanded"</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//We need to process it</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> curTD <span class="sy0">=</span> getEnclosingTdTag <span class="br0">(</span>curButton <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>curTD <span class="sy0">!=</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; replaceEmptyTdWithColSpan <span class="br0">(</span>curTD <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="br0">}</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">/**</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp;* Finds all empty td tags after a given start tag and removes them</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">&nbsp;* also inserts the colspan attribute into the start tag</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="coMULTI">**/</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2"> <span class="kw2">function</span> replaceEmptyTdWithColSpan <span class="br0">(</span>startElement <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="co1">// No action needed if colspan is aleady &gt; 1</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>startElement. <span class="me1">colSpan</span> <span class="sy0">&gt;</span> <span class="nu0">1</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> &nbsp; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; <span class="kw2">var</span> colSpan <span class="sy0">=</span> <span class="nu0">1</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw2">var</span> nextSibling <span class="sy0">=</span> startElement. <span class="me1">nextSibling</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">while</span> <span class="br0">(</span>nextSibling <span class="sy0">!=</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">var</span> following <span class="sy0">=</span> nextSibling. <span class="me1">nextSibling</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>nextSibling. <span class="me1">nodeName</span> <span class="sy0">==</span> <span class="st0">"TD"</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// We stop at the first non empty node</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>nextSibling. <span class="me1">firstChild</span> <span class="sy0">==</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nextSibling. <span class="me1">parentNode</span>. <span class="me1">removeChild</span> <span class="br0">(</span>nextSibling <span class="br0">)</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colSpan <span class="sy0">+=</span> <span class="nu0">1</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span> <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; nextSibling <span class="sy0">=</span> following <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>colSpan <span class="sy0">&gt;</span> <span class="nu0">1</span> <span class="br0">)</span> <span class="br0">{</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; startElement. <span class="me1">colSpan</span> <span class="sy0">=</span> colSpan <span class="sy0">;</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1"> <span class="br0">}</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
 </ol> 
</div> As usual YMMV.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 09 July 2010
<span class="divider">|</span>
<a href="/blog/2010/07/taming-the-categorized-views-reloaded.html#comments">Comments (3)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/xpages.html">XPages</a> 

						<div class="shariff" data-lang="en" data-url="https://www.wissel.net/blog/2010/07/taming-the-categorized-views-reloaded.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;mail&quot;]" data-title="Taming the categorized views - reloaded" data-twitter-via="@notessensei"></div>
						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2010/07/taming-the-categorized-views-reloaded.html";
						</script>
					</p>

				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_60F6715F6359F1524825775B00539A8F" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_60F6715F6359F1524825775B00539A8F"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>Patrick Kwinten</b> on <i>Friday 16 July 2010 AD</i>:<br /> 
  what is the value of codelines in the code examples? it makes copy and paste a pain in the ass. 
  <br /> 
  <br />or is that the though behind it? 
  <img alt="Emoticon cry.gif" src="/blog/images/emoticons/cry.gif" border="0" />
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Friday 16 July 2010 AD</i>:<br /> 
  Ah.. got me there. The idea is to allow line specific questions like: In line xx why do you do that. Need to rethink that approach.
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Friday 16 March 2012 AD</i>:<br /> 
  Patrick: did you copy &amp; paste? The code lines don't get copied!
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2010/07/developing-your-xpages-skills.html"><i class="icon-hand-left"></i>Developing your XPages skills</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2010/07/meet-the-xsp-object.html">Meet the XSP object<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/">2010</a> <span class="divider">/</span></li>
  <li><a href="/blog/2010/07/">July</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2020 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2010/07/taming-the-categorized-views-reloaded.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>
    <script type="text/javascript" src="/blog/js2/admonition.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>
    <script type="text/javascript">
    $(document).ready(function() {
            SyntaxHighlighter.all();
    });
    </script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "60F6715F6359F1524825775B00539A8F");
 		};
	</script>

</body>
</html>
