<!DOCTYPE html>
<html lang="en">
<head>
<title>Lightning Mini Forms - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Lightning Mini Forms" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2018/11/lightning-mini-forms.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Lightning Mini Forms" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2018,2018 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included:  Salesforce, IBM, JEE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,notes,r9,verse,r8,r7,r6,r5,raven,k-station,nsf,ntf,websphere,agile,sdlc,jee,ml,salesforce,.net,personcentric,singapore,twins,JavaScript,vertx, nodejs" />
<meta name="Abstract"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: Salesforce, IBM , JEE, NodeJS, ML, .Net, Vert.x, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link href='//fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

    <script> 
var $buoop = {notify:{e:-0.01,f:-0.01,o:-0.01,s:-0.01,c:-0.01},insecure:true,unsupported:true,api:5}; 
function $buo_f(){ 
 var e = document.createElement("script"); 
 e.src = "//browser-update.org/update.min.js"; 
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script>

    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2018/">2018</a> <span class="divider">/</span></li>
  <li><a href="/blog/2018/11/">November</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/lightning.html">Lightning</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/salesforce.html">Salesforce</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2018/10/my-software-stack.html"><i class="icon-hand-left"></i>My software stack</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
				</ul>

				<article class="well well-raised">
					<h1><small>Lightning Mini Forms</small></h1>
					<hr />
					<div><p>One of my favorite lightning features is the <a href="https://trailhead.salesforce.com/en/content/learn/modules/lightning_app_builder">Lightning App Builder</a>. It allows to tailor Salesforce for a given set of users, to show what they need, how they need it.</p> 
<p>In the page editor the endless scrolling page, record details followed by related lists, we got to love, can be broken down into multiple tabs. For related lists, the OOTB controls already allow to just pick one. Placed multiple times on a page, the layout can fit a specific audience's precise need, avoiding information overload.</p> 
<p>However there's no control to break down the record details. The OOTB record details control will faithfully reproduce the assigned page layout with all sections. Custom controls to the rescue!</p> 
<h3><a href="#design-options" id="design-options">Design options</a></h3> 
<p>There are two options to consider: where to pull design information from and how to render it. For the later you can consider <a href="https://developer.salesforce.com/docs/component-library/bundle/lightning:recordEditForm/example">lightning:recordEdit|ViewForm</a> or <a href="https://developer.salesforce.com/docs/component-library/bundle/lightning:recordForm">lightning:recordForm</a>. Both can be argued for.</p> 
<p>The <code>lightning:recordForm</code> only needs the fields / layout options supplied and will take care of all rendering. However you are limited to one or two columns - just like page layouts.</p> 
<p>The <code>lightning:record[Edit|View]Form</code> requires coding the fields, probably using an <a href="https://developer.salesforce.com/docs/component-library/bundle/aura:iteration/example">aura:iteration</a>, but leaves you with the freedom of layout. Typically you would use a <a href="https://developer.salesforce.com/docs/component-library/bundle/lightning:layoutItem/specification">lightning:layoutItem</a> and its <code>size</code> property to determine the number of columns (with 12 / size = number of columns).</p> 
<p>To keep it simple I'll stick to the <code>lightning:recordForm</code> for now.</p> 
<p>Next question: where to provision the list of fields from? When you want an universally usable mini form, you can't hardcode them, but provide them using a design property, so they can be provided in the page editor after you dragged the component onto the page.</p> 
<p>Still you need to decide what attributes you provide:</p> 
<ul> 
 <li>List of field names</li> 
 <li>Name of a field set</li> 
 <li>Name of a section in a page layout</li> 
</ul> 
<p>I'll start with the first one and relegate the other two approaches to future posts.</p> 
<p>To make this work you will need a custom lightning component. Let's call it <code>MiniForm</code>. We will only need <code>MiniForm.cmp</code>, <code>MiniFormController.js</code> and <code>MiniForm.design</code>. No helper or Apex will be harmed.</p><p>The component looks like this:</p> 
<pre class="brush: xml">&lt;aura:component implements="flexipage:availableForRecordHome,force:hasRecordId" 
                access="global"&gt;
    &lt;aura:attribute name="recordId"
                    type="Id" 
                    default="" 
                    description="Account Record Id" /&gt;
    &lt;aura:attribute name="objectType" 
                    type="String" 
                    default="Account" 
                    description="Sobject Name" /&gt;
    &lt;aura:attribute name="fieldList" 
                    type="String" 
                    description="Fields to show" /&gt;
    &lt;aura:attribute name="fieldListArray"
                    type="String[]" 
                    default="Id,Name"
                    access="private" /&gt;
    &lt;aura:attribute name="columns" 
                    type="String" 
                    default="1" 
                    description="Column count one or two" /&gt;
    &lt;aura:attribute name="layoutType"
                    type="String"
                    default="Full" /&gt;
    &lt;aura:attribute name="formReady"
                    type="Boolean"
                    default="false"
                    access="private" /&gt;                
    &lt;aura:handler name="init"
                  action="{!c.doInit}" 
                  value="{!this}" /&gt;
    &lt;lightning:card&gt;
    	&lt;aura:if isTrue="{!v.formReady}"&gt;
        &lt;div class="slds-p-horizontal_small"&gt;
            &lt;lightning:recordForm
              aura:id="MiniForm"
              recordId="{!v.recordId}"
              objectApiName="{!v.objectType}" 
              fields="{!v.fieldListArray}" 
              columns="{!v.columns}" 
              mode="view" /&gt;
        &lt;/div&gt;
        &lt;/aura:if&gt;
    &lt;/lightning:card&gt;
&lt;/aura:component&gt;
</pre> 
<p>There are a few caveats, I'll highlight below</p> 
<p>The design file will determine what is visible in the page designer. Currently that information is static, so the <a href="https://admin.salesforce.com/">Awesome Admin</a> needs to be extra careful not to mistype anything.</p> 
<pre class="brush: xml">&lt;design:component label="Mini Form"&gt;
    &lt;design:attribute name="layoutType"
                      label="Fields from Layout"
                      description="Should the fields from the full or compact layout be used"
    				  default="Full"
                      datasource="Empty,Full,Compact"/&gt;
    &lt;design:attribute name="fieldList"
                      label="additional Fields"
                      description="Fields to be shown in addition to layout (if any)"
                      default="Name,Id"/&gt;
    &lt;design:attribute name="objectType"
                      label="Object"
                      description="Which object"
                      default="Account"/&gt;
     &lt;design:attribute name="columns"
                       label="1/2 columns"
                      description="one or two"
                      default="1"
                      datasource="1,2" /&gt;
&lt;/design:component&gt;
</pre> 
<p>The final piece it the <a href="https://developer.mozilla.org/bm/docs/Web/JavaScript">JavaScript</a> controller:</p> 
<pre class="brush: javascript">({
    doInit : function(component, event, helper) {
        const layoutType = component.get('v.layoutType');
        // Set the layout type if we have one
        if (layoutType === 'Compact' || layoutType === 'Full') {
            const miniForm = component.find('MiniForm');
            miniForm.set('v.layoutType', layoutType);
        }
        const fieldList = component.get('v.fieldList').split(',');
        component.set('v.fieldListArray', fieldList);
        component.set('v.formReady', true);
    }
})
</pre> 
<p>You can now use the component on a page layout. In addition to specify the fields, it allows to use the predefined main or compact layout. You also can embed it into your own components. You then would need to specify the attributes you need:</p> 
<p><code>&lt;c:MiniForm recordId="{!v.recordId}" objectType="Contact" layoutType="none" /&gt;</code></p> 
<p>This would show the Name and Id field in one column - based on the default settings.</p> 
<h3><a href="#lessons-learned" id="lessons-learned">Lessons learned</a></h3> 
<ul> 
 <li>Always use defaults in the component. This makes it easier when embedding. Specifying defaults in the design properties isn't enough</li> 
 <li><code>lightning:recordForm</code> is particular about the <code>layoutType</code> attribute. It can't be empty or anything else than <code>Compact</code> or <code>Full</code>. That's the reason why the attribute isn't in the markup but gets (eventually) added in the controller</li> 
 <li>The design definition doesn't allow for a String array. To mitigate that the <code>onInit</code> function splits the design provided String into an array. The array is private not to disturb that mechanism. You might consider adding a method that allows to change the values in code</li> 
 <li>Timing is everything. That's why the form is enclosed by an <code>aura:if</code> that will render only after the values have been set. While that doesn't seem a problem in an aura-less controller, it might bite you in heavy load pages, so better save than sorry</li> 
</ul> 
<p>A variation of this approach: instead of using a design time property in the page editor, supply the field names through a lookup into a custom meta data record. This would allow to alter the fields shown based on some lookup logic. However you would need an Apex controller for that.</p> 
<p>Next stop: instead of a field list supply a section name or a fieldset name</p> 
<p>As usual YMMV</p></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 06 November 2018
<span class="divider">|</span>
<a href="/blog/2018/11/lightning-mini-forms.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/lightning.html">Lightning</a>  <a href="/blog/categories/salesforce.html">Salesforce</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2018/11/lightning-mini-forms.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Lightning Mini Forms"></div>
						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2018/11/lightning-mini-forms.html";
						</script>
					</p>

				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_32921b70-e166-11e8-8147-25db6896428c" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_32921b70-e166-11e8-8147-25db6896428c"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li id="nocomments">
							<h5>No comments yet, be the first to comment</h5>
						</li>
					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2018/10/my-software-stack.html"><i class="icon-hand-left"></i>My software stack</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2018/">2018</a> <span class="divider">/</span></li>
  <li><a href="/blog/2018/11/">November</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/lightning.html">Lightning</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/salesforce.html">Salesforce</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I'm a Cloud "Program Architect Director", working for Salesforce. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://plus.google.com/+StephanWissel/about" rel="author" style="text-decoration: none;">
						    <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" alt="" style="border: 0; width: 16px; height: 16px;" /> Google+</a></li>
						<li><a href="skype://notessensei?chat">Skype</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2018 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2018/11/lightning-mini-forms.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>
    <script type="text/javascript">
    $(document).ready(function() {
            SyntaxHighlighter.all();
    });
    </script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "32921b70-e166-11e8-8147-25db6896428c");
 		};
	</script>

</body>
</html>
