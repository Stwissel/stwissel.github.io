<!DOCTYPE html>
<html lang="en">
<head>
<title>NotesSensei's Blog by month: By Date: September 2014</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - " />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - " />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included:  Salesforce, IBM, JEE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,hcl,notes,r11,r10,r9,verse,r8,r7,r6,r5,raven,k-station,nsf,ntf,agile,sdlc,jee,ml,salesforce,.net,personcentric,singapore,twins,JavaScript,vertx, nodejs, salesforce, apex, webcomponents" />
<meta name="Abstract"
	content=" Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: Salesforce, IBM, HCL, JEE, NodeJS, ML, .Net, Vert.x, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/admonition.css" />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
					<li><a href="/mealplan.html">Food</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>


	<div class="container">

    		<br />
		<header>
			<div id="main" class="hero-unit">
				<h1 id="jumbotron">wissel.net
				</h1>
				<p class="lead">Usability - Productivity - Business - The web -
					Singapore &amp; Twins</p>
			</div>
		</header>


		<div class="row-fluid">
			<div class="span9">
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2014/08/index.html"><i class="icon-hand-left"></i>By Date: August 2014</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2014/10/index.html">By Date: October 2014<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<div class="well well-raised">
					<h1>By Date: September 2014</h1>
				</div>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/put-an-angular-face-on-your-inbox.html">Put an angular face on your inbox</a></small>
					</h1>
					<hr />
					<div>In the <a href="/blog/2014/09/rendering-a-notes-view-as-json-rest-service-on-your-client.html">last installment</a> I got vert.x to emit a Notes view, read from your local mail file, to be emitted as JSON stream. While that might be perfectly fine for the inner geek, normal mortals want to look (and interact) with something more pretty. 
<br>
 The cool kids on the block for web interfaces and applications are <a href="http://getbootstrap.com/">Twitter BootStrap</a> and <a href="https://angularjs.org/">AngularJS</a>, so these will be the tools in this installment. 
<br>
 Not familiar with them? Go and <a href="https://www.youtube.com/results?search_query=angularjs">watch some videos</a>. Back? Let's get going. 
<br>
 Since I'm not much of a designer, I choose the ready made <a href="http://www.almsaeedstudio.com/">Admin LTE</a> template based on bootstrap. The main reason for choosing this one, was a <a href="http://almsaeedstudio.com/AdminLTE/pages/UI/timeline.html">timeline layout</a> that I wanted for the inbox. 
<br>
 My inbox is already sorted by date, so it should fit nicely (so I thought). However the view optically is categorized by date and under the hood just a flat list of <code>&lt;li&gt;</code> elements. A little tweaking was necessary. The result looks quite OK for an after hour exercise: 
<br><img src="/blog/images/2014/mailbox-ng.png" border="0" alt="Alternate layout for the Inbox">
<br>
 The steps to get there: 
<ol>
 <li>Tweak the vert.x service to render a categorized by date version of the inbox. You can do that without touching the underlying view. I'll provide details on that modules in a later article (and some sample data below). The main difference for now: the inbox data will be available at the URL <code>/notes/categorized/($Inbox)</code></li>
 <li>Create templates and <a href="https://docs.angularjs.org/guide/directive">directives</a> for Angular</li>
 <li>Create the Angular.js app and its <a href="https://docs.angularjs.org/guide/concepts">Controllers</a></li>
</ol> Of course, no application is complete with a nice set of challenges. The biggest here was the flat list for the time line. I tried to adjust the CSS to accommodate a hierarchical list, where the outer elements are the date containing all messages arrived at that day, but there was too much CSS. So I decided to tweak the output a little.</div>
					<hr />
 <a href="/blog/2014/09/put-an-angular-face-on-your-inbox.html">Read more</a>
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 30 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/put-an-angular-face-on-your-inbox.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/ibmnotes.html">IBM Notes</a>  <a href="/blog/categories/javascript.html">JavaScript</a>  <a href="/blog/categories/software.html">Software</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/put-an-angular-face-on-your-inbox.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/rendering-a-notes-view-as-json-rest-service-on-your-client.html">Rendering a Notes view as JSON REST service - on your client</a></small>
					</h1>
					<hr />
					<div>My next goal after getting the basic <a href="/blog/2014/08/running-vertx-with-the-openntf-domino-api.html">connection to Notes</a> working is to be able to serve <a href="/blog/2014/08/designing-a-rest-api-for-email.html">a potential API</a>. Still making friends with the non-blocking approach of <a href="http://vertx.io/">vert.x</a>, I'm taking baby steps forward. In this round I want to be able to deliver a view or folder as JSON string. On a Domino server that is easy. You can use <code>?ReadViewEntries&amp;OutputFormat=JSON</code>. On a Notes client you have to do it yourself. 
<br>
 In round one I will ignore categorized views (that's for the next time), but I already will massage the JSON to be leaner. After all why send it over the wire what you don't need. So I have a little <code>AppConfig.INSTANCE</code> singleton, that delivers a <code>viewConfig</code> object. This object has the list of columns and the inteded labels that I want to be returned. 
<br>
 Since last time some of the libraries have been updated and I'm now running vert.x 3.0.0.Preview1 and the <a href="http://openntf.org/main.nsf/project.xsp?r=project/OpenNTF%20Domino%20API/releases/44348B38506DC51086257D5D0080F2F0">OpenNTF Domino API RC2</a>. I unpacked the OpenNTF release and removed the Jar files and replaced them with Maven dependencies. This step isn't necessary, but I'm expanding my Maven knowledge, so it was good practise. The starter application looks quite simple: 
<br>
<pre><code class="language-java">
package com.notessensei.vertx.notes;

import io.vertx.core.Handler;
import io.vertx.core.Vertx;
import io.vertx.core.http.HttpServer;
import io.vertx.core.http.HttpServerOptions;
import io.vertx.core.http.HttpServerRequest;
import java.io.IOException;
import org.openntf.domino.thread.DominoExecutor;

public class NotesClient {

    /**
     * @param args
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        final NotesClient nc = new NotesClient();
        nc.runUntilKeyPresses("q");
        System.exit(0);
    }

    private static final int     listenport        = 8110;
    private static final int     dominothreadcount = 10;
    private final Vertx          vertx;
    private final HttpServer     hs;
    private final DominoExecutor de;

    public NotesClient() throws IOException {
        this.vertx = Vertx.factory.vertx();
        final HttpServerOptions options = HttpServerOptions.options();
        options.setPort(NotesClient.listenport);
        this.hs = this.vertx.createHttpServer(options);
        this.de = new DominoExecutor(NotesClient.dominothreadcount);
    }

    public void runUntilKeyPresses(String keystring) throws IOException {
        int quit = 0;
        final int quitKey = keystring.charAt(0);

        this.startListening();

        while (quit != quitKey) { // Wait for a keypress
            System.out.print("Notes Client Verticle started, version ");
            System.out.println(AppConfig.INSTANCE.getVersion());
            System.out.print("Started to listen on port ");
            System.out.println(NotesClient.listenport);
            System.out.print("Press ");
            System.out.print(keystring);
            System.out.println("&lt;Enter&gt; to stop the Notes Client Verticle");
            quit = System.in.read();
        }

        this.stopListening();

        System.out.println("\n\nNotes Client Verticle terminated!");
    }

    private void startListening() {
        final Handler&lt;HttpServerRequest&gt; h = new NotesRequestHandler(this.de);
        this.hs.requestHandler(h).listen();
    }

    private void stopListening() {
        this.hs.close();
        this.de.shutdown();
        AppConfig.INSTANCE.save();
    }
}
</code></pre>
<br>
 The Notes request handler, checks what is requested and renders the view into JSON using a "homegrown" JSONBuilder which I designed similar to a SAX writer. 
<br>
<pre><code class="language-java">
package com.notessensei.vertx.notes;

import java.util.Map;

import io.vertx.core.Handler;
import io.vertx.core.http.HttpServerRequest;
import io.vertx.core.http.HttpServerResponse;

import org.openntf.domino.Database;
import org.openntf.domino.Session;
import org.openntf.domino.View;
import org.openntf.domino.ViewEntry;
import org.openntf.domino.ViewNavigator;
import org.openntf.domino.thread.AbstractDominoRunnable;
import org.openntf.domino.thread.DominoExecutor;
import org.openntf.domino.thread.DominoSessionType;

public class NotesRequestHandler extends AbstractDominoRunnable implements Handler&lt;HttpServerRequest&gt; {

    private static final long           serialVersionUID = 1L;
    private transient HttpServerRequest req;
    private ViewConfig                  viewConfig       = null;
    private final DominoExecutor        de;

    public NotesRequestHandler(DominoExecutor de) {
        this.de = de;
        this.setSessionType(DominoSessionType.NATIVE);
    }

    @Override
    public void run() {
        Session s = this.getSession();
        HttpServerResponse resp = this.req.response();
        this.renderInbox(s, resp);
    }

    public void handle(HttpServerRequest req) {
        HttpServerResponse resp = req.response();

        String path = req.path();

        String[] pathparts = path.split("/");
        // The request must have notes in the URL
        if (pathparts.length &lt; 3 || !pathparts[1].equals("notes")) {
            this.sendEcho(req, resp);
        } else {
            this.req = req;
            // Parameter 3 is either view or inbox
            // if it is inbox, we pull in the inbox
            if (pathparts[2].equals("inbox")) {
                this.viewConfig = AppConfig.INSTANCE.getViewConfig("($Inbox)");
                this.de.execute(this);
                // if it is view we pull the respective view
            } else if (pathparts.length &gt; 3 &amp;&amp; pathparts[2].equals("view")) {
                this.viewConfig = AppConfig.INSTANCE.getViewConfig(pathparts[3]);
                this.de.execute(this);
            } /*more here*/ else {
                // Nothing value, so we send an check only
                this.sendEcho(req, resp);
            }
        }
    }

    private void renderInbox(Session s, HttpServerResponse resp) {
        resp.headers().set("Content-Type", "application/json; charset=UTF-8");
        Database mail = s.getMailDatabase();
        resp.end(this.renderView(mail, this.viewConfig));
    }

    private void sendEcho(HttpServerRequest req, HttpServerResponse resp) {
        StringBuilder txt = new StringBuilder();
        resp.headers().set("Content-Type", "text/html; charset=UTF-8");
        txt.append("&lt;html&gt;&lt;body&gt;&lt;h1&gt;Notes request handler&lt;/h1&gt;");
        txt.append("&lt;h2&gt;");
        txt.append(req.uri());
        txt.append("&lt;/h2&gt;");
        System.out.println("Got request: " + req.uri());
        txt.append("&lt;/body&gt;&lt;/html&gt;");
        resp.end(txt.toString());
    }

    @Override
    public boolean shouldStop() {
        // TODO Auto-generated method stub
        return false;
    }

    private String renderView(Database db, ViewConfig vc) {
        JsonBuilder b = new JsonBuilder();
        View view = db.getView(vc.getViewName());
        ViewNavigator vn = view.createViewNav();

        b.addValue("count", vn.getCount());
        b.addValue("name", vc.getViewName());
        b.startObject("documents");

        for (ViewEntry ve : vn) {
            b.startObject(ve.getUniversalID());
            b.addValue("position", ve.getPosition());
            b.addValue("isRead", ve.getRead());
            Map&lt;String, Object&gt; entries = ve.getColumnValuesMap();
            for (Map.Entry&lt;String, Object&gt; entry : entries.entrySet()) {
                String key = vc.isEmpty() ? entry.getKey() : vc.getColumnName(entry.getKey());
                if (key != null) {
                    b.addValue(key, entry.getValue());
                }
            }
            b.endObject();
        }
        b.endObject();
        return b.toString();
    }
}
</code></pre> ## 
<br>
 The JSONWriter class needs some more polish to get date formatting right and to keep track of nesting depth, but it should perform well. 
<br>
<pre><code class="language-java">
</code></pre>
<br>
 What grew quite a bit is the Maven POM model (Maven is to Java roughly what npm is to Node.js or bauer to browser projects): 
<br>
<pre><code class="language-xml">
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.notessensei.vertx&lt;/groupId&gt;
  &lt;artifactId&gt;com.notessensei.vertx.notes&lt;/artifactId&gt;
  &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;
  &lt;name&gt;IBM Notes 9.0 vert.x 3.0 client&lt;/name&gt;
  &lt;description&gt;Local web&lt;/description&gt;
  &lt;repositories&gt;
  &lt;repository&gt;
    &lt;id&gt;sonatype-staging&lt;/id&gt;
    &lt;url&gt;https://oss.sonatype.org/content/repositories/staging/&lt;/url&gt;
  &lt;/repository&gt;
  &lt;/repositories&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;io.vertx&lt;/groupId&gt;
      &lt;artifactId&gt;vertx-core&lt;/artifactId&gt;
      &lt;version&gt;3.0.0-preview1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;com.ibm.icu&lt;/groupId&gt;
     &lt;artifactId&gt;icu4j&lt;/artifactId&gt;
     &lt;version&gt;53.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;
     &lt;artifactId&gt;gson&lt;/artifactId&gt;
     &lt;version&gt;2.3&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;
     &lt;artifactId&gt;jsr305&lt;/artifactId&gt;
     &lt;version&gt;3.0.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;org.ow2.asm&lt;/groupId&gt;
     &lt;artifactId&gt;asm-all&lt;/artifactId&gt;
     &lt;version&gt;5.0.3&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;com.google.guava&lt;/groupId&gt;
     &lt;artifactId&gt;guava&lt;/artifactId&gt;
     &lt;version&gt;18.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;io.reactivex&lt;/groupId&gt;
     &lt;artifactId&gt;rxjava&lt;/artifactId&gt;
     &lt;version&gt;1.0.0-rc.3&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;javassist&lt;/groupId&gt;
     &lt;artifactId&gt;javassist&lt;/artifactId&gt;
     &lt;version&gt;3.12.1.GA&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;javolution&lt;/groupId&gt;
     &lt;artifactId&gt;javolution&lt;/artifactId&gt;
     &lt;version&gt;5.5.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;com.ibm.sbt&lt;/groupId&gt;
     &lt;artifactId&gt;com.ibm.commons&lt;/artifactId&gt;
     &lt;version&gt;9.0.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
     &lt;groupId&gt;io.vertx&lt;/groupId&gt;
     &lt;artifactId&gt;vertx-hazelcast&lt;/artifactId&gt;
     &lt;version&gt;3.0.0-preview1&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre>
<br>
 Next stops (in no specific order): 
<ul>
 <li>Merge documents from 2 or more views - use case: your mail file and one or more archives</li>
 <li>Render categorized views as nested JSON objects</li>
 <li>Have a HTML UI to look at the list and the individual documents</li>
 <li>Search using <a href="http://lucene.apache.org/solr/">Apache Solr</a></li>
 <li>Folder predictions using <a href="https://github.com/OpenNTF/AFSfNC">AFsNc</a></li>
</ul> Stay tuned!</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 25 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/rendering-a-notes-view-as-json-rest-service-on-your-client.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/lotusnotes.html">Lotus Notes</a>  <a href="/blog/categories/maven.html">Maven</a>  <a href="/blog/categories/vertx.html">vert.x</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/rendering-a-notes-view-as-json-rest-service-on-your-client.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/keeping-up-with-all-the-git.html">Keeping up with all the GIT</a></small>
					</h1>
					<hr />
					<div>Unless you <a href="http://www.csis.ul.ie/cobol/" title="and even then you could use GIT">stuck in the last century</a>, you might have noticed, that the gold standard for version control is <a href="http://git-scm.com/">GIT</a>. Atlassian <a href="https://www.atlassian.com/git/">likes it</a>, IBM DevOps <a href="https://hub.jazz.net/tutorials/clients/">supports it</a> and of course the <a href="https://github.com/torvalds/linux">Linux Kernel</a> is build with it. 
<br>
 The prime destination for opensource projects is <a href="https://github.com/">GitHub</a>, with <a href="https://bitbucket.org/">BitBucket</a> coming in strong too. Getting the code of a project you work with (and I bet you do - jquery anyone) is just a <code>git clone</code> away. Of course that opens the challenge to keep up with all the changes and updates. While in the projects you work on, a branch, pull and push is daily work - using the command line or a <a href="http://sourcetreeapp.com/">nice UI</a>. For that "keep an eye one" projects this gets tedious quite fast. 
<br>
 I'm using a little script (you even could <a href="http://linux.die.net/man/1/crontab">cron</a> it or attach it to a successful <a href="https://wiki.ubuntu.com/OnNetworkConnectionRunScript">network connection</a>) to keep all my "read-only" repositories up-to-date. You need to change the <code>basedir=</code> to match your path. Enjoy 
<br>
<pre><code class="language-bash">
# !/bin/sh
# Helper script to keep all the things I pulled from GITHUB updated
# most of them are in ~/github, but some are somewhere else

# Pulls a repository from GIT origin or Mercurial
syncrep() {
 echo "Processing $f file..."
 cd $1
 isHG=`find -maxdepth 1 -type d -name ".hg"`
 if [ -n "$isHG"]
 then
  git pull origin master &amp;
 else
  echo "$f is a Mercurial directory"
  hg pull
 fi
}

basedir=/home/yourusername

# Part 1: all in ~/github
notify-send -t 20000 -u low -i gtk-dialog-info "Starting GIT threaded update"
FILES=$basedir/github/*
for f in $FILES
do
 syncrep $f
done

# Part 2: all in ~/company
notify-send -t 20000 -u low -i gtk-dialog-info "Starting COMPANY threaded update"
FILES=$basedir/company/*
for f in $FILES
do
 syncrep $f
done

cd ~
notify-send -t 20000 -u low -i gtk-dialog-info "All GIT pull requests are on their way!"

# Wait for the result
stillrunning=0
while [ "$stillrunning" -eq "0" ]
 do  
 sleep 60
 pgrep git- &gt; /dev/null
 stillrunning=$?
 done
notify-send -t 20000 -u low -i gtk-dialog-info "GIT pull updates completed"
</code></pre>
<br>
 A little caveat: when you actively work on a repository you might not want the combination origin - master, so be aware: as usual YMMV</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 25 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/keeping-up-with-all-the-git.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/software.html">Software</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/keeping-up-with-all-the-git.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/collaboration-in-context.html">Collaboration in context</a></small>
					</h1>
					<hr />
					<div>Harry, a storm is coming, at least if you follow <a href="https://twitter.com/cjywest/status/514785737883930624">Cary Youman</a>. Nothing less that the way we collaborate will be, again, a focus for IBM. The need has not found a definite solution. The attempt to <a href="http://incubator.apache.org/wave/">reinvent eMail</a> is starving in the incubator. <a href="http://en.wikipedia.org/wiki/Ray_Ozzie">Great minds</a> try to reinvent <a href="http://www.talko.com/">the conversation</a> (and looks suspiciously like Wave). So what is so tricky about collaboration? 
<br>
 In short it is <a href="http://dictionary.reference.com/browse/context">context</a>, the famous <a href="http://en.wikipedia.org/wiki/Five_Ws">5 W</a>. In our hyperconnected world context can get big rather fast: 
<br><a href="/blog/images/2014/CollaborationInContextLarge.jpg" title="" collaboration="" in="" context="" -="" larger="" version=""><img src="/blog/images/2014/CollaborationInContext.jpg" border="0" alt="Collaboration In Context"></a>
<br>
 An eMail system usually provides limited context: From, When, Subject. Using <a href="https://github.com/OpenNTF/AFSfNC">Tools</a> and <a href="http://www.ibm.com/smarterplanet/us/en/ibmwatson/">Advanced Analytics</a> modern systems try to spice that context. Other <a href="http://www.elsua.net/tag/life-without-email/" title="Luis, this isn't personal, I love your work!">shoot the messenger</a> without addressing the next level of problem: Flood vs. Scatter 
<br></div>
					<hr />
 <a href="/blog/2014/09/collaboration-in-context.html">Read more</a>
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 24 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/collaboration-in-context.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/software.html">Software</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/collaboration-in-context.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/creating-nginx-configurations-for-domino-ssl.html">Creating nginx configurations for Domino SSL</a></small>
					</h1>
					<hr />
					<div>Websites need to be secure, so the SHA-1 cipher is <a href="http://googleonlinesecurity.blogspot.sg/2014/09/gradually-sunsetting-sha-1.html">coming to an end</a>. Despite <a href="http://www.thenorth.com/apblog4.nsf/0/236121854727AE5885257D560053631E">best efforts</a>, Domino is stuck with this outdated Cipher. While you can, on Windows, hide Domino behind <a href="http://www-01.ibm.com/support/docview.wss?uid=swg27039743&amp;aid=1">IHS</a>, I find <a href="http://nginx.org/">nginx</a> easier to tame. 
<br>
 Jesse explains how to configure <a href="https://frostillic.us/blog/posts/6AF303DE836BA02D85257D570058B1CA">nginx as the Domino proxy</a>. So all is good, expecially since he also covered <a href="https://frostillic.us/blog/posts/1F0A5DF0DF2C783385257D59004CF923">High availability</a>. 
<br>
 But when you have a lot of sites, that's a lot of typing (and copy &amp; paste from the Internet site documents). <a href="http://mustache.github.io/">Mustache</a> to the rescue! I've written about <a href="/blog/2014/03/fun-with-mustache-and-notes-forms.html">Mustache</a> before and it suits the task quite nicely: 
<ol>
 <li>Create one well working sample configuration</li>
 <li>Replace the site specific values with {{mustache}} variables</li>
 <li>Run it against all Internet site documents</li>
</ol> The code I used (see below) generates just 4 variables: 
<ol>
 <li><code>{{name}}</code> The name of the site according to the configuration document. I use it here to configure the file name</li>
 <li><code>{{siteName}}</code>The first web name, it will become the listen parameter</li>
 <li><code>{{allNames}}</code> All web names, they will be listed as <code>server_name</code></li>
 <li><code>{{settings}}</code> all field values of the Internet site documents as concatenated strings. Using a dot notation they can be used directly. e.g. <code>{{settings.SSLKeyFile}}</code>. Using this approach you can do whatever is needed to generate your desired output</li>
</ol> This is the initial template, based on Jesse's article: 
<br>
<pre><code class="language-nginx">
server {
        listen {{siteName}}:443;
        server_name {{#allNames}} {{.}}{{/allNames}};
        client_max_body_size 100m;

        ssl on;
        # Original keyfile: {{settings.SSLKeyFile}}
        ssl_certificate      /etc/nginx/ssl/{{name}}.pem;
        ssl_certificate_key /etc/nginx/ssl/{{name}}.key;
 
        location / {
                proxy_read_timeout 240;
                proxy_pass http://localhost:8088;
                proxy_redirect off;
                proxy_buffering off;
 
                proxy_set_header        Host               $host;
                proxy_set_header        X-Forwarded-For    $proxy_add_x_forwarded_for;
                proxy_set_header        $WSRA              $remote_addr;
                proxy_set_header        $WSRH              $remote_addr;
                proxy_set_header        $WSSN              $host;
                proxy_set_header        $WSIS              True;
        }

}
</code></pre>
<br>
 The Java code takes in the file name of that template as parameter, so when you feel you rather use Apache or need a different output (e.g. a report), you are free to supply a different file here.</div>
					<hr />
 <a href="/blog/2014/09/creating-nginx-configurations-for-domino-ssl.html">Read more</a>
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 20 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/creating-nginx-configurations-for-domino-ssl.html#comments">Comments (1)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/ibmnotes.html">IBM Notes</a>  <a href="/blog/categories/nginx.html">nginx</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/creating-nginx-configurations-for-domino-ssl.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/tracking-down-slow-internet-on-singtel-fibre-to-the-home.html">Tracking down slow internet on SingTel Fibre to the home</a></small>
					</h1>
					<hr />
					<div>SingTel makes <a href="http://info.singtel.com/personal/internet/broadband-at-home/fibre-broadband">big claims</a> about the beauty of their fibre offering. I do not experience the claimed benefits. So I'm starting to track down what is happening. Interestingly when you visit <a href="http://www.speedtest.net/">SpeedTest</a>, it shows fantastic results. I smell rat. 
<br>
 So I ran a test with <a href="http://www.pocketinet.com/">Pocketinet</a> in Walla Walla, WA. SpeedTest claims a 5ms ping response, but when I, immediate before or after such a test, issue a <code>ping -c5 www.pocketinet.com</code> I get results rather in the range of 200-230ms. 
<br><i>Ein Schelm wer b√∂ses dabei denkt!</i>
<br>
 While this evidence isn't strong enough, to <a href="http://en.wikipedia.org/wiki/Traffic_shaping">accuse</a> someone of tampering, it points to the need to <b>investigate</b> why the results are so different ( <a href="http://www.ida.gov.sg/">IDA</a> are you listening?). So I started looking a little deeper. Using traceroute with the -I parameter (that uses the same packets as ping) I checked a bunch of websites. Here are the results (I stripped out the boring parts): 
<br>
<pre>traceroute -I www.pocketinet.com
  9   203.208.152.217  <b>3.913ms</b>  3.919ms  4.033ms
 10   203.208.149.30  <b>204.256ms</b>  203.208.172.226  170.493ms  171.314ms

traceroute -I www.economist.com
  9   203.208.166.57  <b>4.316ms</b>  4.882ms  4.680ms
 10   203.208.151.246  <b>193.164ms</b>  203.208.151.214  188.148ms  203.208.182.122  196.526ms

traceroute -I www.cnn.com
  9   203.208.171.242  <b>4.772ms</b>  4.679ms  5.160ms
 10   203.208.182.122  <b>171.006ms</b>  203.208.151.214  187.336ms  203.208.182.122  171.447ms

traceroute -I www.ibm.com
 9   203.208.153.142  <b>4.385ms</b>  5.857ms  3.853ms
 10   203.208.173.106  <b>178.135ms</b>  203.208.151.94  183.842ms  203.208.182.86  181.097ms
</pre>
<br>
 Something is rotten in the state of <strike> Denmark </strike> <i>international connectivity</i>! (Sorry Wil) 
<br>
 Only Google bucks that pattern. But that's due to the fact that their DNS sends me to a server in Singapore. So the huge jump in latency happens in the 203.208.182._and 203.208.151._ subnets. 
<br><code>whois</code> tells me: 
<br>
<pre> whois 203.208.182.86
% [whois.apnic.net]
% Whois data copyright terms    http://www.apnic.net/db/dbcopyright.html

% Information related to '203.208.182.64 - 203.208.182.127'

inetnum:        203.208.182.64 - 203.208.182.127
netname:        SINGTEL-IX-AP
descr:          Singapore Telecommunications Pte Ltd
</pre>
<br>
 So, the servers might be in the SingTel overseas location? <a href="http://www.infosniper.net/index.php?ip_address=203.208.182.86&amp;map_source=1&amp;overview_map=1&amp;lang=1&amp;map_type=1&amp;zoom_level=10">InfoSniper</a> sees them in Singapore (you can try <a href="https://www.google.com/search?q=geolocation%20ip%20lookup">others</a> with the same result). Now I wonder, is the equipment <b>undersized</b>, wrongly <b>configured</b> or something <a href="http://en.wikipedia.org/wiki/Deep_packet_inspection">else</a> happening that takes time on that machine? 
<br>
 Looking for an explanation. 
<br>
<br><b>Update</b> 19 Sep 2014: Today the speedtest.net site shows ping results that are similar to traceroute/ping from the command line - unfortunately not due to the fact that the command line results got better, but the speedtest.net results worse <img src="/blog/images/emoticons/sad.gif"> - Now ranging in the 200ms. I wonder what happened. Checking the effective up/down speed will be a little more tricky. Stay tuned</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 17 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/tracking-down-slow-internet-on-singtel-fibre-to-the-home.html#comments">Comments (2)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/buyingbroadband.html">Buying Broadband</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/tracking-down-slow-internet-on-singtel-fibre-to-the-home.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/foundation-of-software-development.html">Foundation of Software Development</a></small>
					</h1>
					<hr />
					<div>When you learn cooking, there are a few basic skills that need to be in place before you can get started: cutting, measuring, stiring and understanding of temperature's impact on food items. These skills are independent from <b>what</b> you want to cook: western, Chinese, Indian, Korean or <a href="http://www.molecularrecipes.com/">Space Food</a>. 
<br>
 The same applies to software development. Interestingly we try to delegate these skills to ui designers, architects, project managers analyst or infrastructure owners. To be a good developer, you don't need to excel in all of those skills, but at least develop a sound understanding of the problem domain. There are a few resources that I consider absolute essential: 
<ul>
 <li>You need a basic understanding of project management. While contemporary experts would suggest to read <a href="http://agilemanifesto.org/">the agile manifesto</a>, I recommend to start with more mundane literature. Start with <a href="http://www.amazon.com/gp/product/0201835959/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0201835959&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=V6R7ESVNNIGMTYDR">The Mythical Man-Month</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=0201835959" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> and <a href="http://www.amazon.com/gp/product/0932633390/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0932633390&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=XPLBRXCAEVCDKVSW">The Deadline</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=0932633390" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> (the later being as entertaining as instructional), to understand what this is all about</li>
 <li>What does it take to run a software organisation and programming topics are discussed on <a href="http://www.joelonsoftware.com/">Joel on Software</a>. Having created <a href="http://stackoverflow.com">Stackoverflow</a>, Joel is a recognized industry authority. A must read is the <a href="http://www.joelonsoftware.com/articles/fog0000000043.html">Joel Test</a> that gives an indicator on your development prowness (others <a href="http://www.coriandertech.com/2011/11/05/the-joel-test-is-antiquated/">disagree</a>). So I'll ask you about version control and build process soon. Also an interesting read is the rant about <a href="http://www.joelonsoftware.com/articles/APIWar.html">the API wars</a></li>
 <li>Success requires passion, so read <a href="http://headrush.typepad.com/">Creating passionate users</a>. While it doesn't get updated anymore, it is a treasure trove of insights, how users engage with software. The author <a href="http://en.wikipedia.org/wiki/Kathy_Sierra">Kathy Sierra</a>, created the incredibly entertaining <a href="http://shop.oreilly.com/category/series/head-first.do">Head First</a> book series from O'Reilly</li>
 <li>Thomas J Watson Jr. famously stated <a href="http://www-03.ibm.com/ibm/history/ibm100/us/en/icons/gooddesign/">Good Design is Good Business</a>. So you want to know about it. Start with <a href="http://www.amazon.com/gp/product/B00E257T6C/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00E257T6C&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=QF5STUSOZHTCASDW">The Design of Everyday Things</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=B00E257T6C" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> by Don Norman and let your guide be <a href="http://www.amazon.com/gp/product/1592535879/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1592535879&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=KMOTNHJZ2J2NQ5BG">Universal Principles of Design</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=1592535879" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;">. There's enough ugly software around</li>
 <li>A little more leaning towards concrete ways of doing things are the writings of <a href="http://alistair.cockburn.us/">Alistair Cockburn</a>. After all he signed the Agile Manifesto. On the mandatory reading list for you: 
  <ol>
   <li><a href="http://www.amazon.com/gp/product/0201702258/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0201702258&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=MI3V6P3ERHS3X5YK">Writing Effective Use Cases</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=0201702258" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;">: Even if you call them stories, inputs, requirements or whatever. Getting them right - not necessarily all at the beginning - makes your success rate jump.</li>
   <li><a href="http://www.amazon.com/gp/product/0201699478/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0201699478&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=HOTQ7VZJTVKLZ2UP">Crystal Clear: A Human-Powered Methodology for Small Teams</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=0201699478" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;">. I have written about it <a href="/blog/2005/07/crystal-clear.html">before</a> and it covers all the bases required to be agile</li>
  </ol></li>
 <li>Know your <a href="http://en.wikipedia.org/wiki/Software_design_pattern">Software Design Patterns</a> (known working solutions to a specified problem) and their evil twin the <a href="http://sourcemaking.com/antipatterns/software-development-antipatterns">Software Anti-Pattern</a> (typical failures in the attempt to solve a specified problem). Pattern originated in <a href="http://en.wikipedia.org/wiki/Christopher_Alexander">architecture</a> (real buildings, not software) and are commonly attributed to <a href="www.oodesign.com">object oriented software</a>, but are not limited to it. Anti-Pattern can be found in <a href="en.wikipedia.org/wiki/Anti-pattern">all walks of life</a>. There is an entire catalog of <a href="http://hillside.net/patterns/patterns-catalog">do</a> and <a href="http://c2.com/cgi/wiki?AntiPatternsCatalog">don't</a> at your fingertips. Or go and <a href="http://www.amazon.com/gp/product/0471197130/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0471197130&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=3EYGNO4DZHSJ4SYJ">read a book</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=0471197130" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"></li>
 <li>Test your software before you write it! That's what <a href="http://www.paperprototyping.com/">Paper Prototyping</a> is all about. Test it while you write it, you can choose between <a href="http://en.wikipedia.org/wiki/Test-driven_development">Test Driven Development</a> and <a href="http://dannorth.net/introducing-bdd/">Behavior Driven Development</a> (including a <a href="http://cukes.info/">framework</a>)</li>
 <li>When you (re)design web experiences, have a look at this: <a href="http://www.amazon.com/gp/product/0735714339/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0735714339&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=RNBHCL5MVXMSJTWW">Web ReDesign 2.0: Workflow that Works</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=0735714339" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> and <a href="http://www.amazon.com/gp/product/0321965515/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321965515&amp;linkCode=as2&amp;tag=wissenetblog-20&amp;linkId=PWPCBRV7CXZFGSSO">Don't Make Me Think</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=wissenetblog-20&amp;l=as2&amp;o=1&amp;a=0321965515" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"></li>
 <li>Read Jacob Nielsen's newsletter on <a href="http://www.useit.com/">Usability</a> (part of nngroup.com)</li>
</ul> All these resources are pretty independent from what language, mechanism or platform you actually use, so they provide value to anyone in the field of software development. 
<br>
 As usual YMMV</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 12 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/foundation-of-software-development.html#comments">Comments (1)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/software.html">Software</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/foundation-of-software-development.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/flow-rules-complexity-and-simplicity-in-workflow.html">Flow, Rules, Complexity and Simplicity in Workflow</a></small>
					</h1>
					<hr />
					<div>When I make the claim " <i>Most workflows are simple</i>", in return I'm hit with bewildered looks and the assertion: " <i>No, ours are quite complex</i>". My little provocation is quite deliberate, since it serves as an opening gambit to discuss the relation between flow, rules and lookups. All workflows begin rather simple. I'll take a travel approval workflow as a sample (resemblance of workflows of existing companies would be pure coincidence). 
<br><img src="/blog/images/2014/workflow1.jpg" border="0" alt="The workflow as described by the business owner">
<br>
 The explanation is simple: " <i>You request approval from management, finance and compliance. When all say OK, you are good to go</i>". Translating them into a flow diagram is quite easy: 
<br><img src="/blog/images/2014/workflow2.jpg" border="0" alt="Super" high="" level="" diagram="">
<br>
 With a simple straight line, one might wonder what is the fuzz about workflow systems and all the <a href="https://www.google.com/search?q=workflow+diagram&amp;tbm=isch&amp;tbo=u">big diagrams</a> are all about. So when looking closer, each box "hides" quite some complexity. Depending on different factors some of the approval are automatic. " <i>When we travel to a customer to sign a <b>sizable</b> deal and we are inside our budget allocation, we don't need to ask finance</i>". So the workflow looks a little more complex actually: 
<br><img src="/blog/images/2014/workflow3.jpg" border="0" alt="Different levels need different approvals">
<br>
 The above diagram shows the flow in greater detail, with a series of decision points, both inside a functional unit (management, finance and compliance) as well as between them. The question still stays quite high level. "required Y/N", "1st line manager approves". Since the drawing tools make it easy - and it looks impressive - the temptation to draw further lures strongly. You could easily model the quest for the manager inside a workflow designer. The result might look a little like this: 
<br></div>
					<hr />
 <a href="/blog/2014/09/flow-rules-complexity-and-simplicity-in-workflow.html">Read more</a>
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 03 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/flow-rules-complexity-and-simplicity-in-workflow.html#comments">Comments (1)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/workflow.html">Workflow</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/flow-rules-complexity-and-simplicity-in-workflow.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/rethinking-the-mimedocument-data-source.html">Rethinking the MimeDocument data source</a></small>
					</h1>
					<hr />
					<div>Tim (we miss you) and <a href="https://www.linkedin.com/profile/view?id=16014400">Jesse</a> had the idea to store <a href="https://frostillic.us/f.nsf/posts/an-extended-document-data-source-to-support-mimebeans">beans in Mime documents</a>, which became an <a href="http://openntf.org/main.nsf/project.xsp?r=project/mimeDominoDocument%20Data%20Source/summary">OpenNTF project</a>. 
<br>
 I love that idea and was musing how to make it more "domino like". In its binary format, a serialized bean can't be used for showing view data, nor can one be sure that it can be transported or deserialized other than through the same class version as the creator (this is why <code>Serialized</code> wants to have a serialid). 
<br>
 With a little extra work, that becomes actually quite easy: Enter <a href="http://www.vogella.com/tutorials/JAXB/article.html">JAXB</a>. Serializing a bean to XML (I hear howling from the JSON camp) allows for a number of interesting options: 
<ul>
 <li>The MIME data generated in the document becomes human readable</li>
 <li>If the class changes a litte de-serialization will still work, if it changes a lot it can be deserialized to an <a href="http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html">XML Document</a></li>
 <li>Values can be extracted using XPath to write them into the MIME header and/or regular Notes items - making it accessible for use in views</li>
 <li>Since XML is text, full text search will capture the content</li>
 <li>Using a stylesheet a fully human readable version can be stored with the original MIME (good to eMail)</li>
</ul> I haven't sorted out the details, but lets look at some of the building blocks. Who ever has seen me demo XPages will recognize the fruit class. The difference here: I added the XML annotations for a successful serialization: 
<br>
<pre><code class="language-java">
package test;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "Fruit", namespace = "http://www.notessensei.com/fruits")
@XmlAccessorType(XmlAccessType.NONE)
public class Fruit {
@XmlAttribute(name = "name")
private String name;
@XmlElement(name = "color")
private String color;
@XmlElement(name = "taste")
private String taste;
@XmlAttribute(name = "smell")
private String smell;

    public String getSmell() {
        return this.smell;
    }

    public void setSmell(String smell) {
        this.smell = smell;
    }

    public Fruit() {
        // Default constructor
    }

    public Fruit(final String name, final String color, final String taste, final String smell) {
        this.name = name;
        this.color = color;
        this.taste = taste;
        this.smell = smell;
    }

    public final String getColor() {
        return this.color;
    }

    public final String getName() {
        return this.name;
    }

    public final String getTaste() {
        return this.taste;
    }

    public final void setColor(String color) {
        this.color = color;
    }

    public final void setName(String name) {
        this.name = name;
    }

    public final void setTaste(String taste) {
        this.taste = taste;
    }

}
</code></pre>
<br>
 The function (probably in a manager class or instance) to turn that into a Document is quite short. The serialization of JAXB would allow to directly serialize it into a Stream or String, but we need the XML Document step to be able to apply the XPath. 
<br>
<pre><code class="language-java">
public org.w3c.dom.Document getDocument(Fruit fruit) throws ParserConfigurationException, JAXBException {
  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
  DocumentBuilder db = dbf.newDocumentBuilder();
  org.w3c.dom.Document doc = db.newDocument();
  JAXBContext context = JAXBContext.newInstance(fruit.getClass());
  Marshaller m = context.createMarshaller();
  m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
  m.marshal(fruit, doc);
  return doc;
 }
</code></pre>
<br>
 The little catch here: There is a Document in the <code>lotus.domino</code> package as well as in the <code>org.w3c.dom</code> package. You need to take care not to confuse the two. Saving it into a document including the style sheet (to make it pretty) is short too. The function provides the stylesheet as a w3c Document and the list of fields to extract as a key (the field) - value (the XPath) map. Something like this: 
<br></div>
					<hr />
 <a href="/blog/2014/09/rethinking-the-mimedocument-data-source.html">Read more</a>
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 01 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/rethinking-the-mimedocument-data-source.html#comments">Comments (2)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/xpages.html">XPages</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/rethinking-the-mimedocument-data-source.html";
						</script>
					</p>
				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2014/09/bikepad-smartphone-mount-review.html">Bikepad SmartPhone mount review</a></small>
					</h1>
					<hr />
					<div>This is my field impression of the <a href="http://www.bikepad.eu/">Bikepad SmartPhone mount</a> having used it for a few weeks on my Montague <a href="">Paratrooper pro</a>
<br>
<br><b>TL:TR</b>The Bikepad is a highly functional accessory to keep your phone on your bike fully functional. Is has quality craftsmanship and a sleek design. If I had an editor-refuses-to-give-it-back award to give (I actually paid for it), I would award it. 
<br>
<br>
 I do cycle for <a href="http://runkeeper.com/activity?userId=28611185&amp;trip=424724439&amp;fb_source=708">longer durations</a> and some <a href="http://www.youtube.com/watch?v=i8upSwvHDq8">rough spots</a>, so I like to keep a phone in reach. Not at last to keep <a href="http://www8.garmin.com/livetrack/">SWMBO updated</a>. When I learned about <a href="http://www.bikepad.eu/">Bikepad</a> and their claim " <i>Basically the Bikepad creates a vacuum between its surface and the device. The vacuum is strong enough to hold the device"</i> I had to give it a try. Here's the verdict: 
<ul>
 <li><b>The Good</b><br>
   Works as designed. The surface indeed creates a gecko feet like suction that firmly holds the phone in place. You actually need some force to pull it our. The aluminium base is sleek and solidly build. I like the minimal design: everything is there for it to function and nothing more, <a href="http://en.wikipedia.org/wiki/Form_follows_function">form follows function</a> at its best. The half pipe shaped aluminium connector can be easily fixed on a stem (I didn't try handlebar mount) and secured with a Velcro. It comes with a foam pipe segment to adjust to different pipe diameters.<br>
   I tried to shake the phone off in off-road or city conditions, including falling off the bike and hitting the ground (that part unplanned), but it stayed nice in place.</li>
 <li><b>The Bad</b><br>
   Works as designed. For the vacuum to build a close contact between phone and surface is needed. For your iShiny¬Æ (that was my main test unit) or a Nexus 4 (the other phone) that isn't a problem. For anything that doesn't have a flat surface or buttons on the back, you need to test it. Also the various phone cases need to be checked carefully. I tested a <a href="http://www.otterbox.asia/p-1071-apl2-new-iphone-5.aspx?color=glacier+%28white+%2f+gunmetal+grey%29">Otterbox case</a>, which has a ridge running around the back. This prevents the case body from contact with the pad. Only the ridge has contact, which provides not enough suction</li>
 <li>and <b>The Ugly</b><br>
   When it rains it pours. If the pad gets wet, it gets slippery and looses its suction. When the phone already sticks on it and it is rained on, it gradually will loose the grip. Luckily the pad comes with a little <strike> shower cap </strike> rain cover. With the cover it looks a little funny, not as cool anymore - but it does the job. Anyway you wouldn't want to expose your iShiny¬Æ to the bare elements. Another little challenge: my stem is quite thick, so the provided foam pipe is too think to squeeze between stem and half pipe. I was left with a little cutting exercise or alternative means. I opted for <a href="http://sugru.com/">Sugru</a> that holds everything in place</li>
</ul> To see more, check out some of their <a href="http://www.bikepad.eu/4981-2/">videos</a>. In summary: a keeper.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 01 September 2014
<span class="divider">|</span>
<a href="/blog/2014/09/bikepad-smartphone-mount-review.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/cycling.html">Cycling</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2014/09/bikepad-smartphone-mount-review.html";
						</script>
					</p>
				</article>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2014/08/index.html"><i class="icon-hand-left"></i>By Date: August 2014</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2014/10/index.html">By Date: October 2014<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>

			<div class="span3">
			    <aside id="sidebar_spreadshirt" class="well">
	<h5>Shop</h5>
	<a href="https://notessensei.myspreadshop.com/not+my+circus+not+my+monkeys-A61e1903cc8668379f1573899?productType=812&sellable=wQz9l23aJJcROmVm4nLX-812-7&appearance=2" title="Notessensei's Spreadshop"><img width="300" src="https://image.spreadshirtmedia.com/image-server/v1/products/T812A2PA4267PT17X58Y49D1043393171W23114H22690/views/1,width=650,height=650,appearanceId=2/sometimes-things-go-over-board-and-you-ask-yourself-whos-circus-is-that-not-yours.jpg" /></a>
</aside>

				<aside id="sidebar_reference" class="well">
					<h5>Reference</h5>
					<ol style="list-style-type: upper-roman; padding-left: 30px;">
						<li><a style="display: inline;"
							href="/blog/2012/04/extracting-data-from-domino-into-pdf-using-xslt-and-xslfo-part-1.html">Use
								XSL:FO rendering (Domino)</a></li>
						<li><a target="_blank" href="https://wissel.net/blog/imprint.html">old references (IBM)</a></li>
					</ol>
				</aside>

				<aside id="sidebar_categoriesArchive" class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Categories</li>
						<li ><a href="/blog/categories/afterhours.html">After hours</a></li>
						<li ><a href="/blog/categories/agile.html">Agile</a></li>
						<li ><a href="/blog/categories/ai.html">AI</a></li>
						<li ><a href="/blog/categories/apex.html">Apex</a></li>
						<li ><a href="/blog/categories/blog.html">Blog</a></li>
						<li ><a href="/blog/categories/bluemix.html">Bluemix</a></li>
						<li ><a href="/blog/categories/buddhakids.html">Buddhakids</a></li>
						<li ><a href="/blog/categories/business.html">Business</a></li>
						<li ><a href="/blog/categories/buyingbroadband.html">Buying Broadband</a></li>
						<li ><a href="/blog/categories/caldav.html">calDAV</a></li>
						<li ><a href="/blog/categories/cloudcomputing.html">Cloud Computing</a></li>
						<li ><a href="/blog/categories/container.html">Container</a></li>
						<li ><a href="/blog/categories/continuousintegration.html">Continuous integration</a></li>
						<li ><a href="/blog/categories/couchdb.html">CouchDB</a></li>
						<li ><a href="/blog/categories/coursera.html">Coursera</a></li>
						<li ><a href="/blog/categories/curl.html">Curl</a></li>
						<li ><a href="/blog/categories/cycling.html">Cycling</a></li>
						<li ><a href="/blog/categories/development.html">Development</a></li>
						<li ><a href="/blog/categories/docker.html">Docker</a></li>
						<li ><a href="/blog/categories/domino.html">Domino</a></li>
						<li ><a href="/blog/categories/drapi.html">DRAPI</a></li>
						<li ><a href="/blog/categories/dxlmagic.html">DXLMagic</a></li>
						<li ><a href="/blog/categories/elearning.html">eLearning</a></li>
						<li ><a href="/blog/categories/github.html">GitHub</a></li>
						<li ><a href="/blog/categories/gonephisching.html">Gone Phisching</a></li>
						<li ><a href="/blog/categories/graalvm.html">GraalVM</a></li>
						<li ><a href="/blog/categories/grpc.html">gRPC</a></li>
						<li ><a href="/blog/categories/gtd.html">GTD</a></li>
						<li ><a href="/blog/categories/hclnotes.html">HCL Notes</a></li>
						<li ><a href="/blog/categories/heroku.html">Heroku</a></li>
						<li ><a href="/blog/categories/https.html">HTTP(S)</a></li>
						<li ><a href="/blog/categories/ibm.html">IBM</a></li>
						<li ><a href="/blog/categories/ibmlotus.html">IBM - Lotus</a></li>
						<li ><a href="/blog/categories/ibmnotes.html">IBM Notes</a></li>
						<li ><a href="/blog/categories/identitymanagement.html">Identity Management</a></li>
						<li ><a href="/blog/categories/intercultural.html">Intercultural</a></li>
						<li ><a href="/blog/categories/java.html">Java</a></li>
						<li ><a href="/blog/categories/javascript.html">JavaScript</a></li>
						<li ><a href="/blog/categories/junit.html">jUnit</a></li>
						<li ><a href="/blog/categories/jwt.html">JWT</a></li>
						<li ><a href="/blog/categories/k8s.html">K8S</a></li>
						<li ><a href="/blog/categories/learning.html">Learning</a></li>
						<li ><a href="/blog/categories/lightning.html">Lightning</a></li>
						<li ><a href="/blog/categories/linux.html">Linux</a></li>
						<li ><a href="/blog/categories/lotus.html">Lotus</a></li>
						<li ><a href="/blog/categories/lotusnotes.html">Lotus Notes</a></li>
						<li ><a href="/blog/categories/lotusphere.html">Lotusphere</a></li>
						<li ><a href="/blog/categories/mac.html">Mac</a></li>
						<li ><a href="/blog/categories/macos.html">macOS</a></li>
						<li ><a href="/blog/categories/maven.html">Maven</a></li>
						<li ><a href="/blog/categories/mobile.html">Mobile</a></li>
						<li ><a href="/blog/categories/networking.html">Networking</a></li>
						<li ><a href="/blog/categories/nginx.html">nginx</a></li>
						<li ><a href="/blog/categories/nodejs.html">NodeJS</a></li>
						<li ><a href="/blog/categories/nodered.html">NodeRED</a></li>
						<li ><a href="/blog/categories/nokia.html">Nokia</a></li>
						<li ><a href="/blog/categories/nosql.html">NoSQL</a></li>
						<li ><a href="/blog/categories/omnisophie.html">Omnisophie</a></li>
						<li ><a href="/blog/categories/openapi.html">OpenAPI</a></li>
						<li ><a href="/blog/categories/opensource.html">OpenSource</a></li>
						<li ><a href="/blog/categories/pmd.html">PMD</a></li>
						<li ><a href="/blog/categories/protocols.html">Protocols</a></li>
						<li ><a href="/blog/categories/quarkus.html">Quarkus</a></li>
						<li ><a href="/blog/categories/reactive.html">Reactive</a></li>
						<li ><a href="/blog/categories/salesforce.html">Salesforce</a></li>
						<li ><a href="/blog/categories/sametime.html">Sametime</a></li>
						<li ><a href="/blog/categories/sfdx.html">SFDX</a></li>
						<li ><a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a></li>
						<li ><a href="/blog/categories/singapore.html">Singapore</a></li>
						<li ><a href="/blog/categories/socialbusiness.html">SocialBusiness</a></li>
						<li ><a href="/blog/categories/software.html">Software</a></li>
						<li ><a href="/blog/categories/sywtbadd.html">SYWTBADD</a></li>
						<li ><a href="/blog/categories/tdd.html">TDD</a></li>
						<li ><a href="/blog/categories/technology.html">Technology</a></li>
						<li ><a href="/blog/categories/travel.html">Travel</a></li>
						<li ><a href="/blog/categories/twins.html">Twins</a></li>
						<li ><a href="/blog/categories/typescript.html">TypeScript</a></li>
						<li ><a href="/blog/categories/umsys.html">UMsys</a></li>
						<li ><a href="/blog/categories/unittesting.html">UnitTesting</a></li>
						<li ><a href="/blog/categories/vertx.html">vert.x</a></li>
						<li ><a href="/blog/categories/webcomponents.html">WebComponents</a></li>
						<li ><a href="/blog/categories/webdevelopment.html">WebDevelopment</a></li>
						<li ><a href="/blog/categories/workflow.html">Workflow</a></li>
						<li ><a href="/blog/categories/writingchinese.html">Writing Chinese</a></li>
						<li ><a href="/blog/categories/xml.html">XML</a></li>
						<li ><a href="/blog/categories/xpages.html">XPages</a></li>
						<li class="nav-header">Archives</li>
						<li ><a href="/blog/2002/">2002</a></li>
						<li ><a href="/blog/2003/">2003</a></li>
						<li ><a href="/blog/2004/">2004</a></li>
						<li ><a href="/blog/2005/">2005</a></li>
						<li ><a href="/blog/2006/">2006</a></li>
						<li ><a href="/blog/2007/">2007</a></li>
						<li ><a href="/blog/2008/">2008</a></li>
						<li ><a href="/blog/2009/">2009</a></li>
						<li ><a href="/blog/2010/">2010</a></li>
						<li ><a href="/blog/2011/">2011</a></li>
						<li ><a href="/blog/2012/">2012</a></li>
						<li ><a href="/blog/2013/">2013</a></li>
						<li ><a href="/blog/2014/">2014</a></li>
						<li ><a href="/blog/2015/">2015</a></li>
						<li ><a href="/blog/2016/">2016</a></li>
						<li ><a href="/blog/2017/">2017</a></li>
						<li ><a href="/blog/2018/">2018</a></li>
						<li ><a href="/blog/2019/">2019</a></li>
						<li ><a href="/blog/2020/">2020</a></li>
						<li ><a href="/blog/2021/">2021</a></li>
						<li ><a href="/blog/2022/">2022</a></li>
						<li ><a href="/blog/2023/">2023</a></li>
						<li ><a href="/blog/2024/">2024</a></li>
						<li ><a href="/blog/2025/">2025</a></li>
						<li ><a href="/blog/all.html" title="That's a long list!">Complete archive</a></li>
					</ul>
				</aside>

				<aside id="sidebar_visitors" class="well">
					<h5>Visitors</h5>
<script type="text/javascript" id="clstr_globe" src="//cdn.clustrmaps.com/globe.js?d=dyaFRPfPewNw_y5-9frkSPIp1gvX8qjkkF-LpRyuvQs"></script>
				</aside>

			</div>
		</div>
	</div>
	<!-- Footer	================================================== -->
		<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="https://www.stickermule.com/u/43c09fe6343315f">Stickers from Stickermule</a></li>
						<li><a href="https://github.com/Stwissel">GitHub</a></li>
						<li><a href="https://bitbucket.org/stwissel/">Bitbucket</a></li>
						<li><a href="https://bsky.app/profile/stwissel.bsky.social">Bluesky</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2025 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script type="text/javascript" src="/blog/js2/admonition.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

</body>
</html>
