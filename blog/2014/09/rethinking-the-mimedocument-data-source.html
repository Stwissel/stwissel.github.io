<!DOCTYPE html>
<html lang="en">
<head>
<title>NotesSensei's Blog - Rethinking the MimeDocument data source</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
<meta name="ROBOTS" content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title" content="NotesSensei's Weblog - Rethinking the MimeDocument data source" />
<meta name="Author" content="Stephan H. Wissel" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,notes,r9,verse,r8,r7,r6,r5,raven,k-station,nsf,ntf,websphere,agile,sdlc,j2ee,.net,personcentric,singapore,twins,JavaScript,vertx, nodejs" />
<meta name="Abstract"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="ICBM" content="1.2994, 103.8425" />
<meta name="Copyright"
	content="2014,2017 Stephan H. Wissel - Creative commons licence" />
<meta HTTP-EQUIV="Content-Language" content="en" />
<meta property="fb:admins" content="567103136" />
<meta property="fb:app_id" content="219323514774289">
<meta property="og:title"
	content="wissel.net - Rethinking the MimeDocument data source" />
<meta property="og:type" content="blog" />
<meta property="og:url" content="https://wissel.net/blog" />
<meta property="og:image"
	content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<meta name="twitter:site" content="@notessensei" />
<meta name="twitter:card" content="summary" />
<meta name="xing:author"
	content="https://www.xing.com/profile/StephanH_Wissel" />

<link rel="stylesheet" type="text/css" href="/blog/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shariff.complete.css" />
<link href='//fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="stylesheet" href="/blog/css/markdown.css" />
<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnet" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>


	<div class="container">

    		<!-- Masthead
		================================================== -->
		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

    <!--[if lt IE 10]>
  <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
    <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
    <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
      <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
      <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
        <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
        <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
      </div>
      <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox'/></a></div>
      <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 11'/></a></div>
      <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari'/></a></div>
      <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
    </div>
  </div>
<![endif]-->

    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2014/">2014</a> <span class="divider">/</span></li>
  <li><a href="/blog/2014/09/">September</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/XPages.html">XPages</a>
  </li>
</ul>


		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2014/09/bikepad-smartphone-mount-review.html"><i class="icon-hand-left"></i>Bikepad SmartPhone mount review</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2014/09/flow-rules-complexity-and-simplicity-in-workflow.html">Flow, Rules, Complexity and Simplicity in Workflow<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1>
						<small>Rethinking the MimeDocument data source</small>
					</h1>
					<hr />
					<div>Tim (we miss you) and 
<a href="https://www.linkedin.com/profile/view?id=16014400">Jesse</a> had the idea to store 
<a href="https://frostillic.us/f.nsf/posts/an-extended-document-data-source-to-support-mimebeans">beans in Mime documents</a>, which became an 
<a href="http://openntf.org/main.nsf/project.xsp?r=project/mimeDominoDocument%20Data%20Source/summary">OpenNTF project</a>. 
<br /> I love that idea and was musing how to make it more &quot;domino like&quot;. In its binary format, a serialized bean can't be used for showing view data, nor can one be sure that it can be transported or deserialized other than through the same class version as the creator (this is why 
<code>Serialized</code> wants to have a serialid). 
<br /> With a little extra work, that becomes actually quite easy: Enter 
<a href="http://www.vogella.com/tutorials/JAXB/article.html">JAXB</a>. Serializing a bean to XML (I hear howling from the JSON camp) allows for a number of interesting options: 
<ul> 
 <li>The MIME data generated in the document becomes human readable</li> 
 <li>If the class changes a litte de-serialization will still work, if it changes a lot it can be deserialized to an <a href="http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html">XML Document</a></li> 
 <li>Values can be extracted using XPath to write them into the MIME header and/or regular Notes items - making it accessible for use in views</li> 
 <li>Since XML is text, full text search will capture the content</li> 
 <li>Using a stylesheet a fully human readable version can be stored with the original MIME (good to eMail)</li> 
</ul> I haven't sorted out the details, but lets look at some of the building blocks. Who ever has seen me demo XPages will recognize the fruit class. The difference here: I added the XML annotations for a successful serialization: 
<br /> 
<pre class="brush: java">
package test;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = &quot;Fruit&quot;, namespace = &quot;http://www.notessensei.com/fruits&quot;)
@XmlAccessorType(XmlAccessType.NONE)
public class Fruit {
    @XmlAttribute(name = &quot;name&quot;)
    private String  name;
    @XmlElement(name = &quot;color&quot;)
    private String  color;
    @XmlElement(name = &quot;taste&quot;)
    private String  taste;
    @XmlAttribute(name = &quot;smell&quot;)
    private String  smell;
    
    public String getSmell() {
        return this.smell;
    }

    public void setSmell(String smell) {
        this.smell = smell;
    }

    public Fruit() {
        // Default constructor
    }

    public Fruit(final String name, final String color, final String taste, final String smell) {
        this.name = name;
        this.color = color;
        this.taste = taste;
        this.smell = smell;
    }

    public final String getColor() {
        return this.color;
    }

    public final String getName() {
        return this.name;
    }

    public final String getTaste() {
        return this.taste;
    }
    
    public final void setColor(String color) {
        this.color = color;
    }

    public final void setName(String name) {
        this.name = name;
    }

    public final void setTaste(String taste) {
        this.taste = taste;
    }
}
</pre> 
<br /> The function (probably in a manager class or instance) to turn that into a Document is quite short. The serialization of JAXB would allow to directly serialize it into a Stream or String, but we need the XML Document step to be able to apply the XPath. 
<br /> 
<pre class="brush: java">
public org.w3c.dom.Document getDocument(Fruit fruit) throws ParserConfigurationException, JAXBException {
		DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
		DocumentBuilder db = dbf.newDocumentBuilder();
		org.w3c.dom.Document doc = db.newDocument();
		JAXBContext context = JAXBContext.newInstance(fruit.getClass());
		Marshaller m = context.createMarshaller();
		m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
		m.marshal(fruit, doc);
		return doc;
	}
</pre> 
<br /> The little catch here: There is a Document in the 
<code>lotus.domino</code> package as well as in the 
<code>org.w3c.dom</code> package. You need to take care not to confuse the two. Saving it into a document including the style sheet (to make it pretty) is short too. The function provides the stylesheet as a w3c Document and the list of fields to extract as a key (the field) - value (the XPath) map. Something like this: 
<br /><pre class="brush: java">
       public boolean saveFruitXmlToDocument(lotus.domino.Session session s, lotus.domino.Document d, org.w3c.dom.Document xDoc, org.w3c.dom.Document style) {
		public static final MIME_FIELD_NAME = &quot;Body&quot;;
		boolean success = true;
        Map&lt;String,String&gt; defs = new HashMap&lt;String,String&gt;();
        //These are specific to the fruit class, should be read from a source
        defs.add(&quot;Subject&quot;, &quot;/fruit:Fruit/@name&quot;);
        defs.add(&quot;Taste&quot;, &quot;/fruit:Fruit/taste&quot;);
        defs.add(&quot;Color&quot;, &quot;/fruit:Fruit/color&quot;);
        defs.add(&quot;Attributes&quot;, &quot;/fruit:Fruit/@*&quot;);
        defs.add(&quot;Summary&quot;, &quot;/fruit:Fruit&quot;);
        
        try {
			boolean oldMime = session.isConvertMime();
			session.setConvertMime(false);

			// We must remove the mime body - otherwise it will not work
			if (d.hasItem(MIME_FIELD_NAME)) {
				d.removeItem(MIME_FIELD_NAME);
			}
			
			// Create the top mime entry
			MIMEEntity root = d.createMIMEEntity(MIME_FIELD_NAME);
			MIMEHeader header = root.createHeader(&quot;Content-Type&quot;);
            header.setHeaderVal(&quot;multipart/mixed&quot;);
			
			MIMEEntity body = root.createChildEntity();
			MIMEHeader bheader = body.createHeader(&quot;Content-Type&quot;);
			bheader.setHeaderVal(&quot;multipart/alternative&quot;);

			MIMEEntity textMime = body.createChildEntity();
			MIMEHeader textHeader = textMime.createHeader(&quot;Content-Type&quot;);
			String cType = (this.style == null) ? &quot;text/plain&quot; : &quot;text/html&quot;;
			textHeader.setHeaderVal(cType);
			Stream stream2 = session.createStream();
			stream2.write(this.dom2Byte(xDoc, style));
			textMime.setContentFromBytes(stream2, cType + &quot;; charset=\&quot;UTF-8\&quot;&quot;,
					MIMEEntity.ENC_NONE);

	         MIMEEntity xmlMime = body.createChildEntity();
	            MIMEHeader xmlHeader = xmlMime.createHeader(&quot;Content-Type&quot;);
	            xmlHeader.setHeaderVal(&quot;application/xml&quot;);	            
	            Stream stream = session.createStream();
	            stream.write(this.dom2Byte(xDoc,null));
	            xmlMime.setContentFromBytes(stream, &quot;application/xml; charset=\&quot;UTF-8\&quot;&quot;, MIMEEntity.ENC_NONE);

			// Now extract the fields
			for (Map.Entry&lt;String,String&gt; e : this.definitions) {
				this.extractOneField(xDoc, d, body, e.getKey(), e.getValue());
			}
			session.setConvertMime(oldMime);
		} catch (Exception e) {
			success = false;
			e.printStackTrace();
		} 

		return success;
	}
	
	private void extractOneField(org.w3c.dom.Document xDoc, lotus.domino.Document d,
			MIMEEntity body, String fName, String xPath) throws NotesException {

		if (fName.equalsIgnoreCase(MIME_FIELD_NAME)) {
			return; // We can't allow to overwrite the body
		}

		Vector&lt;String&gt; v = this.xpath2Vector(xDoc, xPath);
		Item curItem = d.replaceItemValue(fName, v);
	}
	
	private Vector&lt;String&gt; xpath2Vector(org.w3c.dom.Document xDoc, String xPathString) {

        Vector&lt;String&gt; result = new Vector&lt;String&gt;();
        Object exprResult = null;
        XPath xpath = XPathFactory.newInstance().newXPath();
		MagicNamespaceContext nsc = new MagicNamespaceContext();
        xpath.setNamespaceContext(nsc);

        try {
            exprResult = xpath.evaluate(xPathString, doc, XPathConstants.NODESET);
            for (int i = 0; i &lt; nodes.getLength(); i++) {
               Node curNode = nodes.item(i);
               result.add(curNode.getNodeValue());
			}
        } catch (XPathExpressionException e) {
            System.err.println(&quot;XPATH failed for &quot; + xPathString);
        }        
       return result;
   }
       
   private byte[] dom2Byte(Node dom, org.w3c.dom.Document stylesheet) {
        StreamResult xResult = null;
        DOMSource source = null;
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        Transformer transformer = null;

        try {
            TransformerFactory tFactory = TransformerFactory.newInstance();
            xResult = new StreamResult(out);
            source = new DOMSource(dom);

            if (stylesheet != null) {
                DOMSource style = new DOMSource(stylesheet);
                transformer = tFactory.newTransformer(style);
            } else {
                transformer = tFactory.newTransformer();
            }

            // We don't want the XML declaration in front
            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);
         
            transformer.transform(source, xResult);

        } catch (Exception e) {
            e.printStackTrace();
        }

        return out.toByteArray();
    }    
</pre> 
<br /> The final missing ingredient is the MagicNamespace: 
<br /> 
<pre class="brush: java">
package test;

import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

import javax.xml.XMLConstants;
import javax.xml.namespace.NamespaceContext;

public class MagicNamespaceContext implements NamespaceContext {

    private final Map&lt;String, String&gt;      nameSpacesByPrefix = new HashMap&lt;String, String&gt;();
    private final Map&lt;String, Set&lt;String&gt;&gt; nameSpacesByURI    = new HashMap&lt;String, Set&lt;String&gt;&gt;();

    public MagicNamespaceContext() {
        // We add the default namespaces for XML and attributes
        this.addNamespace(XMLConstants.XML_NS_PREFIX, XMLConstants.XML_NS_URI);
        this.addNamespace(XMLConstants.XMLNS_ATTRIBUTE, XMLConstants.XMLNS_ATTRIBUTE_NS_URI);

        // We make d / dxl namespaces for Domino/DXL
        this.addNamespace(&quot;&quot;, &quot;http://www.lotus.com/dxl&quot;);
        this.addNamespace(&quot;d&quot;, &quot;http://www.lotus.com/dxl&quot;);
        this.addNamespace(&quot;dxl&quot;, &quot;http://www.lotus.com/dxl&quot;);
        this.addNamespace(&quot;fruit&quot;, &quot;http://www.notessensei.com/fruits&quot;);
    }

    /**
     * Adds a namespace to the context. If the context doesn't exist
     * 
     * @param prefix
     * @param uri
     */
    public synchronized void addNamespace(String prefix, String uri) {
        this.nameSpacesByPrefix.put(prefix, uri);
        if (this.nameSpacesByURI.containsKey(uri)) {
            Set&lt;String&gt; set = this.nameSpacesByURI.get(uri);
            if (!set.contains(prefix)) {
                set.add(prefix);
            }
        } else {
            Set&lt;String&gt; set = new HashSet&lt;String&gt;();
            set.add(prefix);
            this.nameSpacesByURI.put(uri, set);
        }

    }

    public synchronized void addNamespaces(Map&lt;String, String&gt; newNamespaces) {

        for (String prefix : newNamespaces.keySet()) {
            this.addNamespace(prefix, newNamespaces.get(prefix));
        }

    }

    public String getNamespaceURI(String prefix) {
        if (this.nameSpacesByPrefix.containsKey(prefix)) {
            return this.nameSpacesByPrefix.get(prefix);
        }
        return XMLConstants.NULL_NS_URI;
    }

    public String getPrefix(String namespaceURI) {
        return this.getPrefixes(namespaceURI).next();
    }

    public Iterator&lt;String&gt; getPrefixes(String namespaceURI) {
        Set&lt;String&gt; set = this.nameSpacesByURI.get(namespaceURI);
        if (set == null) {
            return null;
        }
        return set.iterator();
    }
}
</pre> 
<br /> and of course a test: 
<br /> 
<pre class="brush: java">
package test;

import java.util.Collection;
import java.util.HashSet;
import lotus.domino.Database;
import lotus.domino.Document;
import lotus.domino.NotesException;
import lotus.domino.NotesFactory;
import lotus.domino.NotesThread;
import lotus.domino.Session;

public class InitialTest {
    
    public static void main(String[] args) throws NotesException {
        NotesThread.sinitThread();
        Session s = NotesFactory.createSession();
        System.out.println(&quot;\n\n ************* Test starting ******************\n\n&quot;);
        InitialTest t = new InitialTest(s);
        t.createDoc();
        System.out.println(&quot;\n\n ****************** Test done ********************\n\n&quot;);
        NotesThread.stermThread();
    }
    
    private static final String dbName = &quot;XMLDocuments.nsf&quot;;
    private final Session s;
    
    public InitialTest(Session s) {
        this.s = s;
    }
    
    public void createDoc() throws NotesException {
        org.w3c.dom.Document style = DomHelper.INSTANCE.file2Dom(&quot;fruit.xsl&quot;);
        Database db = s.getDatabase(null, dbName);
        Fruit f = new Fruit(&quot;Apple&quot;,&quot;Green&quot;,&quot;Sweet&quot;,&quot;Really nice&quot;);
        Document d = db.createDocument();
        org.w3c.dom.Document xDoc = getDocument(f);
        saveFruitXmlToDocument(s, d, xDoc, style);
        d.save();
        d.recycle();
    }
}
</pre> 
<br /> Still work in progress, but you get the idea.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2014-09-02 12:09
<span class="divider">|</span>
<a href="/blog/2014/09/rethinking-the-mimedocument-data-source.html#comments">Comments (2)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/XPages.html">XPages</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2014/09/rethinking-the-mimedocument-data-source.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Rethinking the MimeDocument data source"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2014/09/rethinking-the-mimedocument-data-source.html";
						</script>
					</p>

				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_5CB8DE17D3ECBA0F48257D460058CA55" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_5CB8DE17D3ECBA0F48257D460058CA55"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
<img src="//www.gravatar.com/avatar/4d2086493cd1864f13fb8fee35b090a9.jpg?s=88" class="gravatarimg" />
							posted by <b>Sean Cull</b> on <i>Tuesday 01 September 2015 AD - 19:12 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  Hello Stephan, 
  <br /> 
  <br />did you put this into production in the end and did it work well ? I am thinking of using this approach to power a dashboard that needs to be cached. 
  <br /> 
  <br />Thanks, Sean
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="//www.gravatar.com/avatar/8b244c19421b34079796e5e64fc8ff75.jpg?s=88" class="gravatarimg" />
							posted by <b>Stephan H. Wissel</b> on <i>Tuesday 01 September 2015 AD - 21:30 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  Almost. What went into production was &quot;Take 2&quot; of this approach. Details here: { 
  <a href="http://www.wissel.net/blog/d6plinks/SHWL-9UBCFS" rel="nofollow" target="blank">Link</a> }
 </body>
</html>
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2014/09/bikepad-smartphone-mount-review.html"><i class="icon-hand-left"></i>Bikepad SmartPhone mount review</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2014/09/flow-rules-complexity-and-simplicity-in-workflow.html">Flow, Rules, Complexity and Simplicity in Workflow<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2014/">2014</a> <span class="divider">/</span></li>
  <li><a href="/blog/2014/09/">September</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/XPages.html">XPages</a>
  </li>
</ul>

	</div>
<!-- Footer	================================================== -->
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I'm working as "Cloud Solution Architect" for Salesforce. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://plus.google.com/+StephanWissel/about" rel="author" style="text-decoration: none;">
						    <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" alt="" style="border: 0; width: 16px; height: 16px;" /> Google+</a></li>
						<li><a href="skype//:notessensei?chat">Skype</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2017 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2014/09/rethinking-the-mimedocument-data-source.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/jquery.fittext.js"></script>
	<script type="text/javascript" src="/blog/js/main.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>   
    <script type="text/javascript">
		SyntaxHighlighter.all();
		var countdown = document.getElementById("countdown");
		if (countdown) {
			countdown.innerHTML = getDayDifference("March 31 , 2017");
		}
    </script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
	
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/comments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			renderComment("6LcUOewSAAAAACAI4zVcGFVkGWmp0sUH5gabwy1q", "5CB8DE17D3ECBA0F48257D460058CA55");
		});
	</script>

</body>
</html>
