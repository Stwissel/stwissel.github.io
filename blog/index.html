<!DOCTYPE html>
<html lang="en">
<head>
<title>NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - " />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - " />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included:  Salesforce, IBM, JEE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,hcl,notes,r11,r10,r9,verse,r8,r7,r6,r5,raven,k-station,nsf,ntf,agile,sdlc,jee,ml,salesforce,.net,personcentric,singapore,twins,JavaScript,vertx, nodejs, salesforce, apex, webcomponents" />
<meta name="Abstract"
	content=" Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: Salesforce, IBM, HCL, JEE, NodeJS, ML, .Net, Vert.x, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/admonition.css" />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="2 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
					<li><a href="/mealplan.html">Food</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="main" class="hero-unit">
				<h1 id="jumbotron">wissel.net
				</h1>
				<p class="lead">Usability - Productivity - Business - The web -
					Singapore &amp; Twins</p>
			</div>
		</header>


	<div class="row-fluid">
			<div class="span9">
				<article class="well well-raised">
					<h1><small><a href="/blog/2025/07/couchdb-and-jwks-certificates.html">CouchDB and JWKS certificates</a></small></h1>
					<hr />
					<div><p>Depending on <a href="/blog/2024/06/how-deep-do-you-authenticate.html">how deep you authenticate</a>, you might be tasked maintaining a user base (and welcome to "I forgot my password" well). The standing recommendation is to implement a single source of identity using a directory as <a href="https://www.cloudflare.com/learning/access-management/what-is-an-identity-provider">Identity Provider (IdP)</a>. My favorite <a href="https://couchdb.apache.org/">NoSQL database</a> can be <a href="https://docs.couchdb.org/en/stable/api/server/authn.html#jwt-authentication">configured</a> to trust JWT signed by a known IdP.</p>
<h3>Some assembly required</h3>
<p>CouchDB can be configured in three ways: Edit the respective ini file, use the Fauxton UI or use the REST API. I like the later since I'm comfortable with <a href="https://curl.se/">curl</a> and <a href="https://www.usebruno.com/">Bruno</a> (not a fan of Postman anymore). The steps are:</p>
<ul>
 <li>configure a client on your identity provider</li>
 <li>enable JWT authentication</li>
 <li>specify what claims are mandatory</li>
 <li>specify how to map roles</li>
 <li>add trustedd public keys</li>
 <li>restart your node</li>
</ul></div>
					<hr />
 <a href="/blog/2025/07/couchdb-and-jwks-certificates.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 30 July 2025
<span class="divider">|</span>
<a href="/blog/2025/07/couchdb-and-jwks-certificates.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/couchdb.html">CouchDB</a>  <a href="/blog/categories/jwt.html">JWT</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2025/07/couchdb-and-jwks-certificates.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2025/07/report-your-csp.html">Report your CSP (violations)</a></small></h1>
					<hr />
					<div><p>I'm a big fan of a strict <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CSP">Content Security Policy (CSP)</a>. It can be a pain to setup (but there is help, <a href="https://report-uri.com/home/generate"><strong>here</strong></a>, <a href="https://cybeready.com/top-9-content-security-policy-generators/">here</a>, <a href="https://chromewebstore.google.com/detail/content-security-policy-c/ahlnecfloencbkpfnpljbojmjkfgnmdc?hl=en">here</a> and <a href="https://www.quantcdn.io/tools/automatic-csp-generator"><strong>here</strong></a>) and <a href="https://csp-evaluator.withgoogle.com/">evaluate</a>.</p>
<h3>Let's report it</h3>
<p>You won't know if a policy was tried to be violated unless the attempt is reported back to your application. For that purpose we use the CSP directives <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy/report-to"><code>report-to</code></a> and the older, deprecated <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy/report-uri"><code>report-uri</code></a>. Until Firefox catches up, use both. When a browser supports <code>report-to</code>, <code>report-uri</code> gets ignored.</p>
<p>Reporting isn't only useful in production, but already during development and especially during retrofitting. There you can swap the <code>Content-Security-Policy</code> header for <code>Content-Security-Policy-Report-Only</code>. It will allow all content to load, but report back all violations.</p>
<p>You then run your <a href="https://www.browserstack.com/guide/end-to-end-testing">E2E Tests</a> (You have those, haven't you?) and get a free overview what loads from where. Adjust the CSP, rinse and repeat.</p>
<h3>Where to report to?</h3>
<p>There are numerous SaaS providers with fancy dashboards, that offer ready made solutions. When you are pressed for time, that might be your best option. I haven't evaluated them, so I can't recommend or endorse them.</p></div>
					<hr />
 <a href="/blog/2025/07/report-your-csp.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 07 July 2025
<span class="divider">|</span>
<a href="/blog/2025/07/report-your-csp.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/java.html">Java</a>  <a href="/blog/categories/javascript.html">JavaScript</a>  <a href="/blog/categories/rust.html">Rust</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2025/07/report-your-csp.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2025/06/html-templates-spa.html">HTML's template element in single page applications</a></small></h1>
					<hr />
					<div><p>"<em>We need to use [insert-framework-of-the-day]!</em>" is the typical answer when asking for a light web single page application (SPA).</p>
<p>It doesn't need to be that way, <a href="https://paulswithers.github.io/">Paul</a> and myself shared in a <a href="https://github.com/paulswithers/super-procode-mode-openntf">recent webinar</a>.</p>
<h3>Serving the long tail</h3>
<p><a href="https://www.wavemaker.com/long-tail-apps-shadow-it-problem/">Long Tail Apps</a> tend to be outside of IT control, since they bypass the (usually heavy) standup of an IT development project.</p>
<p>That standup could be way lighter, when your application just consists of one html file, one css file, one js file, one manifest and (optionally) one or more image files as well as a <a href="https://opensource.hcltechsw.com/Domino-rest-api/references/hostingstatic.html">definded point of deployment</a>.</p>
<p>The typical objection goes: "<em>But it is never one HTML file, I need a login, a list and a form in read and edit mode</em>"</p>
<h3>template to the rescue</h3>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/template"><code>&lt;template&gt;</code></a> element is part of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components">WebComponents</a> specification and it is useful in simple SPA applications.</p></div>
					<hr />
 <a href="/blog/2025/06/html-templates-spa.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 23 June 2025
<span class="divider">|</span>
<a href="/blog/2025/06/html-templates-spa.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/webcomponents.html">WebComponents</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2025/06/html-templates-spa.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2025/05/fun-with-ai-system-prompts.html">Fun with AI system prompts</a></small></h1>
					<hr />
					<div><p><a href="https://www.google.com/search?q=ai+chatbots">AI Chatbots</a> are a popular topic. As part of a session at <a href="https://engage.ug/">Engage 2025</a> I was looking for an easy to grasp example to understand the difference of user prompt and system prompt, the later typically invisible to the user. My goal was to make it abundantly clear how important the system prompt is.</p>
<p>I settled sending the same user prompt with vastly different system prompts. Here is what I got.</p>
<h3>Romeo at the balcony</h3>
<p>Mercutio’s mocking my love and he’s never been in love himself.</p>
<p>Wait. What’s that light coming from the window over there? It’s like the east, with Juliet as the morning sun! Rise, Juliet, beautiful sun, and kill the jealous moon who’s already fading and sad because you are far more beautiful than she is. Don’t swear off men like the virgin moon goddess Diana—the moon envies you anyway. Her virginal appearance is weak and pale and only fools want to emulate it. Get rid of it.</p>
<p>It’s my lady! Oh, it’s my love. Oh, if only she knew I love her. She’s talking but I can’t hear anything. What does it matter?</p>
<p>Her expression means something and I can answer that. No, I’m being too forward. She’s not talking to me. Oh, if two of the most beautiful stars had to leave heaven on important business, they’d ask her eyes to do the twinkling for them while they were gone! What if her eyes took their places in the sky and those stars became her eyes? Her beautiful face would outshine those stars in her head like daylight outshines lamps, while her eyes in the sky would be so bright at nighttime that birds would be convinced it was day. Look at how she leans her cheek on her hand. I wish I were a glove on her hand so I could touch her cheek!</p></div>
					<hr />
 <a href="/blog/2025/05/fun-with-ai-system-prompts.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 07 May 2025
<span class="divider">|</span>
<a href="/blog/2025/05/fun-with-ai-system-prompts.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/ai.html">AI</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2025/05/fun-with-ai-system-prompts.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2025/03/deploying-a-spa-to-drapi.html">Deploying a Single Page Application using the Domino REST API</a></small></h1>
					<hr />
					<div><p>The <a href="https://opensource.hcltechsw.com/Domino-rest-api/">Domino REST API</a> not only provides secure access to "jsonified" Domino data,<br>
  but also comes with capabilities to ease integration. This enables one to quickly cater to <a href="https://en.wikipedia.org/wiki/Long_tail">the long tail</a> of applications, giving them a home instead of loosing them to the shadow IT.</p>
<p>Once you know the steps, you can deploy new <a href="https://developer.mozilla.org/en-US/docs/Glossary/SPA">Single Purpose Applications</a> (I modified the meaning of SPA a little) in no time.</p>
<h3>No CORS, no headache</h3>
<p>DRAPI allows to <a href="https://opensource.hcltechsw.com/Domino-rest-api/references/hostingstatic.html">host static applications</a> in the <code>keepweb.d</code> directory. "Static" might be a little misnomer (it only relates to the source files, not the interaction) since a JS file can make your experience quite interactive. Since you run on the same Domain and port as the API, you don't need to worry about <a href="https://developer.mozilla.org/en-US/docs/Glossary/CORS">CORS</a></p>
<h3>Preparation</h3>
<p>Your SPA will live in a sub directory of <code>keepweb.d</code>, so think about a name, we shall use <code>demo42</code> here. Add a suitable icon (e.g. 72x72 px png), name it <code>demo42.png</code> and you are ready to roll. Let's assume our Domino API is running on <code>https://api.demo.io</code></p>
<h3>Work faster with vitejs</h3>
<p><a href="https://vite.dev/">viteJS</a> is one of the fronteand tools you <strong>want</strong> to learn. It features "hot module reload" to speed up development and, when done, packages your application nice and tidy.</p>
<p>It is easy to get started. You need a current version (22.x at time of writing) of <a href="https://nodejs.org/en">nodeJS</a> installed as development tooling.</p>
<pre><code class="language-bash">npm create vite@latest demo42 -- --template vanilla
cd demo42
npm install
</code></pre>
<p>This will create the demo42 directory and scaffold the project for you. Before we get started with athe development, let's adjust the environment. In the root of the project create a file <code>vite.config.js</code></p>
<pre><code class="language-js">import { defineConfig } from 'vite';

export default defineConfig({
  base: '/keepweb/demo42/',
  server: {
    proxy: {
      '/api': {
        target: 'https://api.demo.io',
        changeOrigin: true
      }
    }
  }
});
</code></pre>
<p>This allows you to develop in the comfort of your local machine's <a href="https://vite.dev/guide/api-hmr">hot module reload</a> which refreshes your app on svae automagically. It also fixes the path matching to its final destination. Next create in <code>public</code> the file <code>manifest.json</code>. This file defines the tile layout for the landing page.</p>
<pre><code class="language-json">{
  "short_name": "Demo 42",
  "name": "The final answer to all Demos",
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#aacccc",
  "icon": "vite.svg"
}
</code></pre>
<p>You can play with colors and icons as you deem fit. Now we are ready to run the application:</p>
<pre><code class="language-bash">npm run dev
</code></pre></div>
					<hr />
 <a href="/blog/2025/03/deploying-a-spa-to-drapi.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 17 March 2025
<span class="divider">|</span>
<a href="/blog/2025/03/deploying-a-spa-to-drapi.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/domino.html">Domino</a>  <a href="/blog/categories/drapi.html">DRAPI</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2025/03/deploying-a-spa-to-drapi.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2025/02/ufw-cheatsheet.html">ufw cheatsheet</a></small></h1>
					<hr />
					<div><p>Mainly as a note to self.</p>
<h3>My default firewall setup</h3>
<pre><code class="language-bash">sudo ufw status
sudo ufw default allow outgoing
sudo ufw default deny incoming
grep IPV6 /etc/default/ufw
sudo ufw allow ssh
sudo ufw limit ssh/tcp comment 'Rate limit for openssh server'
sudo ufw allow 80/tcp comment 'Allow nginx HTTP'
sudo ufw limit 80 comment 'limit nginx HTTP'
sudo ufw allow 443/tcp comment 'Allow nginx HTTPS'
# For Domino mail
sudo ufw allow 1352/tcp comment 'Allow Notes replication'
sudo ufw allow 25/tcp comment 'Allow SMTP'
sudo ufw allow 587/tcp comment 'Allow SMTP'
sudo ufw allow 110/tcp comment 'Allow POP3'
sudo ufw allow 995/tcp comment 'Allow POP3s'
sudo ufw allow 143/tcp comment 'Allow IMAP'
sudo ufw allow 993/tcp comment 'Allow IMAPs'
sudo ufw allow from 1.2.3.4 'Allow the othe Domino'
sudo ufw enable
</code></pre></div>
					<hr />
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 26 February 2025
<span class="divider">|</span>
<a href="/blog/2025/02/ufw-cheatsheet.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/linux.html">Linux</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2025/02/ufw-cheatsheet.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2024/12/java-record-derived-creation.html">Java Record Derived Creation (stopgap until JEP 468 arrives)</a></small></h1>
					<hr />
					<div><p>Java 14 (in a preview feature) introduced <a href="https://docs.oracle.com/en/java/javase/14/language/records.html">Records</a>. In a nutshell: Records are (<a href="https://codeadventures.littlebluefrog.nl/posts/06-immutability-in-records/">mostly</a>) immutable objects with a greatly reduced amount of boilerplate code requirements. For a detailed introduction head over to <a href="https://www.baeldung.com/java-record-keyword">Baeldung</a>.</p>
<h3>When records need update</h3>
<p>The short answer: create a new record and use the existing as input. Let's look at an example:</p>
<pre><code class="language-java">public record Billionaire(String name, Long wealth, Temporal assessment) {

  public Billionaire cloneWithNewAssesment(Long newWealth, Temporal currentAssesment) {
    return new Billionaire(this.name, newWealth,currentAssesment);
  }
}
</code></pre>
<p>By itself this is a clean solution. You might add another function for unchanged assesment values. It gets messy when your records have a few more fields.</p>
<p>To address this, <a href="https://openjdk.org/jeps/468">JEP 468</a> has neen proposed. Unfortunately it isn't seen anywhere in <a href="https://openjdk.org/projects/jdk/23/">JDK 23</a> or <a href="https://openjdk.org/projects/jdk/24/">JDK 24</a>. Its syntax follows the spirit of boilerplate avoidance.</p>
<pre><code class="language-java">// Wealth changed
Billonaire theUpdated = oldBillionaire with { newWealth, newAssesment}

// Wealth unchanged
Billonaire anotherUpdated = oldBillionaire with { newAssesment}
</code></pre>
<p>Ultimately that's the way to go. Until then I needed a stopgap measure. It contains quite some boilerplate, following the <a href="https://www.digitalocean.com/community/tutorials/builder-design-pattern-in-java">builder pattern</a> to make use easier</p>
<pre><code class="language-java">public record Billionaire(String name, Long wealth, Temporal assessment) {

  public BillionaireUpdater forCloning() {
    return new BillionaireUpdater(this);
  }
}

public class BillionaireUpdater {

  Long wealth = null;
  Temporal assessment = null;
  final Billionaire old;


  public BillionaireUpdater(Billionaire old) {
    this.old = old;
  }

  public BillionaireUpdater wealth(Long wealth) {
    this.wealth = wealth;
    return this;
  }

  public BillionaireUpdater assessment(Temporal assessment) {
    this.assessment = assessment;
    return this;
  }

  public Billionaire build() {
    return new Billionaire(
      old.name(),
      this.wealth == null ? old.wealth : this.wealth,
      this.assesment == null ? old.assesment : this.assesment
    );
  }
}
</code></pre>
<p>This approach keeps the "bulky" code outside the record, so once <a href="https://openjdk.org/jeps/468">JEP 468</a> becomes available, updating should be managable leading to the ultimate removal of the <code>Updater</code> classes. The use is quite straight forward:</p>
<pre><code class="language-java">Billionaire theUpdated = oldBillionaire.forCloning()
                                    .wealth(insaneAmount)
                                    .assesment(dateOfAssesment)
                                    .build();

</code></pre>
<p>As usual YMMV</p></div>
					<hr />
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 30 December 2024
<span class="divider">|</span>
<a href="/blog/2024/12/java-record-derived-creation.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/java.html">Java</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2024/12/java-record-derived-creation.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2024/11/building-arm64-on-github.html">Building ARM64 on Github</a></small></h1>
					<hr />
					<div><p>Getting your <a href="https://www.redhat.com/en/topics/devops/what-is-ci-cd">CI/CD</a> pipeline right can be a daunting task. Here is one I had to address:</p>
<ul>
 <li>Create a <a href="https://quarkus.io/">Quarkus</a> Java application</li>
 <li>Compile it to a native executable</li>
 <li>Build a container for it</li>
 <li>Make the container available to both Linux and MacOS</li>
</ul>
<p>The little irony, Docker on macOS or Windowsruns Linux under the hood.</p>
<h3>The easy part - Quarkus</h3>
<p>As I've <a href="/blog/2023/10/quarkus-and-graalvm-starter.html">written before</a> it is easy to get started with <a href="https://quarkus.io/">Quarkus</a>. It provides <a href="https://quarkus.io/guides/container-image">5 ways to build containers</a>, and <a href="https://quarkus.io/guides/building-native-image">detailed instructions</a> to build a native image.</p>
<p>Building a native image looked daunting, with quite some prerequisites like GraalVM, CLI and C compiler. Luckily all this is available in a builder image, and a simple property settin in your <a href="https://maven.apache.org/guides/introduction/introduction-to-the-pom.html"><code>pom.xml</code></a> settles it:</p></div>
					<hr />
 <a href="/blog/2024/11/building-arm64-on-github.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 20 November 2024
<span class="divider">|</span>
<a href="/blog/2024/11/building-arm64-on-github.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/java.html">Java</a>  <a href="/blog/categories/quarkus.html">Quarkus</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2024/11/building-arm64-on-github.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2024/11/using-rbac-with-openapi-and-vertx.html">Using RBAC with OpenAPI and vert.x</a></small></h1>
					<hr />
					<div><p>I'm stronlgy in favour of <a href="https://openpracticelibrary.com/practice/contract-first-development/">Contract-First Development</a>, when in comes to APIs. All invested parties, including your future self, agree on a neutral format, that both API providers and consumers will stick to. For REST APIs that is the <a href="https://www.openapis.org/">OpenAPI spec</a></p>
<p>A popular critique of that approach is that it reeks of <a href="https://en.wikipedia.org/wiki/Big_design_up_front">Big Design Upfront</a>, happily skipping over the fact that nothing stops the teams to iterate over the specification too, one path, one schema at the time</p>
<h3>The source of truth</h3>
<p>The specification becomes the single authorative source for endpoints, security requirements, data formats and responses. While it is possible to generate the spec from source code, like. e.g. <a href="https://spring.io/projects">Spring</a> or <a href="https://quarkus.io/extensions/io.quarkus/quarkus-smallrye-openapi/">Quarkus</a>, I see clear advantages to provide the specification standalone. Create it <a href="https://tools.openapis.org/">with a tool</a> like <a href="https://studio.apicur.io/">Apicur.io</a>, <a href="https://stoplight.io/">Stoplight</a> or <a href="https://apigit.com/">APIGit</a>. Or use <a href="https://marketplace.visualstudio.com/items?itemName=42Crunch.vscode-openapi">a plugin</a> (or <a href="https://marketplace.visualstudio.com/search?term=OpenAPI&amp;target=VSCode">another</a>) in your <a href="https://visualstudio.microsoft.com/#vscode-section">IDE</a> or <a href="https://plugins.jetbrains.com/search?search=OpenAPI">the other one</a></p>
<p>Once you have your first draft, you want to implement it server side. <a href="https://vertx.io">Eclipse vert.x</a> offers the <a href="https://vertx.io/docs/vertx-web-openapi-router/java/">Vert.x OpenAPI Router</a> for exactly that. You can get more details from my <a href="https://stwissel.github.io/presentations/OpenAPI2023/index.html">OpenAPI talk</a>, or by peeking into the <a href="https://github.com/Stwissel/openapi-talk">sample project</a> (which used vert.x inside <a href="https://quarkus.io/">Quarkus</a>).</p></div>
					<hr />
 <a href="/blog/2024/11/using-rbac-with-openapi-and-vertx.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 08 November 2024
<span class="divider">|</span>
<a href="/blog/2024/11/using-rbac-with-openapi-and-vertx.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/java.html">Java</a>  <a href="/blog/categories/openapi.html">OpenAPI</a>  <a href="/blog/categories/vertx.html">vert.x</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2024/11/using-rbac-with-openapi-and-vertx.html";
						</script>
					</p></p>
				</article>
				<article class="well well-raised">
					<h1><small><a href="/blog/2024/10/onetime-idp-with-keycloak.html">One-Off IdP with KeyCloak</a></small></h1>
					<hr />
					<div><p>When end-2-end testing applications that use an <a href="https://en.wikipedia.org/wiki/Identity_provider">IdP</a>, an IdP needs to be in a known state to make test repeatable.</p>
<p>Typically a container is used, with a configuration that needs to be reset before (and after) a run. Restoring the IdP configuration isn't ideal, since addring new test cases (e.g. adding a user with different properties to check application behavior). I propose a different approach: One-off IdP</p>
<h3>Container without persistence</h3>
<p>I start with an empty deployment of <a href="https://www.keycloak.org/">KeyCloak</a> running in a docker container.</p>
<pre><code class="language-shell">#!/bin/bash
#Run a clean KeyCloak
docker run --rm -p 8080:8080 \
       --name testcloak \
       -e KEYCLOAK_ADMIN=admin \
       -e KEYCLOAK_ADMIN_PASSWORD=password \
       quay.io/keycloak/keycloak:latest start-dev
</code></pre>
<p>The <code>--rm</code> parameter ensures that the container is discarded after use. There is <strong>no</strong> persistence flag (<code>--mount</code>), so when the container goes down, all data perishes (and that's intendet).</p>
<h3>Configuration sequence</h3>
<p>The empty KeyCloak only knows the realm <code>master</code> and the user <code>admin</code>. To turn it into a fully functional IdP we need to configure it. Since we want this process to be repeatable we shall use <a href="https://www.keycloak.org/docs-api/latest/rest-api/index.html">Keycloak's REST API</a>. The documentation is complete, including an <a href="https://www.openapis.org/">OpenAPI</a> spec, but in a dictionary style, so all is good when you know what you are looking for. To learn what is needed the browser development tools while using the admin UI teach us the what.</p></div>
					<hr />
 <a href="/blog/2024/10/onetime-idp-with-keycloak.html">Read more</a>
					<p><p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 20 October 2024
<span class="divider">|</span>
<a href="/blog/2024/10/onetime-idp-with-keycloak.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/curl.html">Curl</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2024/10/onetime-idp-with-keycloak.html";
						</script>
					</p></p>
				</article>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/all.html" title="That's a loooong list!">Older entries<i class="icon-hand-right"></i></a>
					</li>
				</ul>
			</div>
			<div class="span3">
			    <aside id="sidebar_spreadshirt" class="well">
	<h5>Shop</h5>
	<a href="https://notessensei.myspreadshop.com/not+my+circus+not+my+monkeys-A61e1903cc8668379f1573899?productType=812&sellable=wQz9l23aJJcROmVm4nLX-812-7&appearance=2" title="Notessensei's Spreadshop"><img width="300" src="https://image.spreadshirtmedia.com/image-server/v1/products/T812A2PA4267PT17X58Y49D1043393171W23114H22690/views/1,width=650,height=650,appearanceId=2/sometimes-things-go-over-board-and-you-ask-yourself-whos-circus-is-that-not-yours.jpg" /></a>
</aside>

				<aside id="sidebar_languages" class="well">
					<h5>Languages</h5>
					<script language="JavaScript" type="text/javascript">
						var totranslate = window.location;
						var prefix = "//translate.google.com/translate?u=";
						var postfix = "&hl=en&ie=UTF-8&sl=en&tl=";
						var languages = new Array({
							"code" : "id",
							"language" : "Bahasa Indonesia"
						}, {
							"code" : "zh-CN",
							"language" : "&#20013;&#22269;"
						}, {
							"code" : "da",
							"language" : "Dansk"
						}, {
							"code" : "de",
							"language" : "Deutsch"
						}, {
							"code" : "es",
							"language" : "Espaniol"
						}, {
							"code" : "it",
							"language" : "Italiano"
						}, {
							"code" : "ko",
							"language" : "&#54620;&#44397;&#50612;"
						}, {
							"code" : "ru",
							"language" : "&#1056;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;"
						}, {
							"code" : "zh-TW",
							"language" : "&#32321;&#20013"
						});
						document.write("<ul>");
						for ( var i = 0; i < languages.length; i++) {
							document
									.write("<li><a href=\""+prefix+totranslate+postfix+languages[i].code+"\">"
											+ languages[i].language
											+ "</a></li>");
						}
						document.write("</ul>");
					</script>
					Other languages on request.
				</aside>

				<aside id="sidebar_visitors" class="well">
					<h5>Visitors</h5>
<script type="text/javascript" id="clstr_globe" src="//cdn.clustrmaps.com/globe.js?d=dyaFRPfPewNw_y5-9frkSPIp1gvX8qjkkF-LpRyuvQs"></script>
				</aside>

				<aside id="sidebar_categoriesArchive" class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Categories</li>
						<li ><a href="/blog/categories/afterhours.html">After Hours</a></li>
						<li ><a href="/blog/categories/agile.html">Agile</a></li>
						<li ><a href="/blog/categories/ai.html">AI</a></li>
						<li ><a href="/blog/categories/apex.html">Apex</a></li>
						<li ><a href="/blog/categories/blog.html">Blog</a></li>
						<li ><a href="/blog/categories/bluemix.html">Bluemix</a></li>
						<li ><a href="/blog/categories/buddhakids.html">Buddhakids</a></li>
						<li ><a href="/blog/categories/business.html">Business</a></li>
						<li ><a href="/blog/categories/buyingbroadband.html">Buying Broadband</a></li>
						<li ><a href="/blog/categories/caldav.html">calDAV</a></li>
						<li ><a href="/blog/categories/cloudcomputing.html">Cloud Computing</a></li>
						<li ><a href="/blog/categories/container.html">Container</a></li>
						<li ><a href="/blog/categories/continuousintegration.html">Continuous integration</a></li>
						<li ><a href="/blog/categories/couchdb.html">CouchDB</a></li>
						<li ><a href="/blog/categories/coursera.html">Coursera</a></li>
						<li ><a href="/blog/categories/curl.html">Curl</a></li>
						<li ><a href="/blog/categories/cycling.html">Cycling</a></li>
						<li ><a href="/blog/categories/development.html">Development</a></li>
						<li ><a href="/blog/categories/docker.html">Docker</a></li>
						<li ><a href="/blog/categories/domino.html">Domino</a></li>
						<li ><a href="/blog/categories/drapi.html">DRAPI</a></li>
						<li ><a href="/blog/categories/dxlmagic.html">DXLMagic</a></li>
						<li ><a href="/blog/categories/elearning.html">eLearning</a></li>
						<li ><a href="/blog/categories/github.html">GitHub</a></li>
						<li ><a href="/blog/categories/gonephisching.html">Gone Phisching</a></li>
						<li ><a href="/blog/categories/graalvm.html">GraalVM</a></li>
						<li ><a href="/blog/categories/grpc.html">gRPC</a></li>
						<li ><a href="/blog/categories/gtd.html">GTD</a></li>
						<li ><a href="/blog/categories/hclnotes.html">HCL Notes</a></li>
						<li ><a href="/blog/categories/heroku.html">Heroku</a></li>
						<li ><a href="/blog/categories/https.html">HTTP(S)</a></li>
						<li ><a href="/blog/categories/ibm.html">IBM</a></li>
						<li ><a href="/blog/categories/ibmlotus.html">IBM - Lotus</a></li>
						<li ><a href="/blog/categories/ibmnotes.html">IBM Notes</a></li>
						<li ><a href="/blog/categories/identitymanagement.html">Identity Management</a></li>
						<li ><a href="/blog/categories/intercultural.html">Intercultural</a></li>
						<li ><a href="/blog/categories/java.html">Java</a></li>
						<li ><a href="/blog/categories/javascript.html">JavaScript</a></li>
						<li ><a href="/blog/categories/junit.html">jUnit</a></li>
						<li ><a href="/blog/categories/jwt.html">JWT</a></li>
						<li ><a href="/blog/categories/k8s.html">K8S</a></li>
						<li ><a href="/blog/categories/learning.html">Learning</a></li>
						<li ><a href="/blog/categories/lightning.html">Lightning</a></li>
						<li ><a href="/blog/categories/linux.html">Linux</a></li>
						<li ><a href="/blog/categories/lotus.html">Lotus</a></li>
						<li ><a href="/blog/categories/lotusnotes.html">Lotus Notes</a></li>
						<li ><a href="/blog/categories/lotusphere.html">Lotusphere</a></li>
						<li ><a href="/blog/categories/mac.html">Mac</a></li>
						<li ><a href="/blog/categories/macos.html">macOS</a></li>
						<li ><a href="/blog/categories/maven.html">Maven</a></li>
						<li ><a href="/blog/categories/mobile.html">Mobile</a></li>
						<li ><a href="/blog/categories/networking.html">Networking</a></li>
						<li ><a href="/blog/categories/nginx.html">nginx</a></li>
						<li ><a href="/blog/categories/nodejs.html">NodeJS</a></li>
						<li ><a href="/blog/categories/nodered.html">NodeRED</a></li>
						<li ><a href="/blog/categories/nokia.html">Nokia</a></li>
						<li ><a href="/blog/categories/nosql.html">NoSQL</a></li>
						<li ><a href="/blog/categories/omnisophie.html">Omnisophie</a></li>
						<li ><a href="/blog/categories/openapi.html">OpenAPI</a></li>
						<li ><a href="/blog/categories/opensource.html">OpenSource</a></li>
						<li ><a href="/blog/categories/pmd.html">PMD</a></li>
						<li ><a href="/blog/categories/protocols.html">Protocols</a></li>
						<li ><a href="/blog/categories/quarkus.html">Quarkus</a></li>
						<li ><a href="/blog/categories/reactive.html">Reactive</a></li>
						<li ><a href="/blog/categories/rust.html">Rust</a></li>
						<li ><a href="/blog/categories/salesforce.html">Salesforce</a></li>
						<li ><a href="/blog/categories/sametime.html">Sametime</a></li>
						<li ><a href="/blog/categories/sfdx.html">SFDX</a></li>
						<li ><a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a></li>
						<li ><a href="/blog/categories/singapore.html">Singapore</a></li>
						<li ><a href="/blog/categories/socialbusiness.html">SocialBusiness</a></li>
						<li ><a href="/blog/categories/software.html">Software</a></li>
						<li ><a href="/blog/categories/sywtbadd.html">SYWTBADD</a></li>
						<li ><a href="/blog/categories/tdd.html">TDD</a></li>
						<li ><a href="/blog/categories/technology.html">Technology</a></li>
						<li ><a href="/blog/categories/travel.html">Travel</a></li>
						<li ><a href="/blog/categories/twins.html">Twins</a></li>
						<li ><a href="/blog/categories/typescript.html">TypeScript</a></li>
						<li ><a href="/blog/categories/umsys.html">UMsys</a></li>
						<li ><a href="/blog/categories/unittesting.html">UnitTesting</a></li>
						<li ><a href="/blog/categories/vertx.html">vert.x</a></li>
						<li ><a href="/blog/categories/webcomponents.html">WebComponents</a></li>
						<li ><a href="/blog/categories/webdevelopment.html">WebDevelopment</a></li>
						<li ><a href="/blog/categories/workflow.html">Workflow</a></li>
						<li ><a href="/blog/categories/writingchinese.html">Writing Chinese</a></li>
						<li ><a href="/blog/categories/xml.html">XML</a></li>
						<li ><a href="/blog/categories/xpages.html">XPages</a></li>
						<li class="nav-header">Archives</li>
						<li ><a href="/blog/2002/">2002</a></li>
						<li ><a href="/blog/2003/">2003</a></li>
						<li ><a href="/blog/2004/">2004</a></li>
						<li ><a href="/blog/2005/">2005</a></li>
						<li ><a href="/blog/2006/">2006</a></li>
						<li ><a href="/blog/2007/">2007</a></li>
						<li ><a href="/blog/2008/">2008</a></li>
						<li ><a href="/blog/2009/">2009</a></li>
						<li ><a href="/blog/2010/">2010</a></li>
						<li ><a href="/blog/2011/">2011</a></li>
						<li ><a href="/blog/2012/">2012</a></li>
						<li ><a href="/blog/2013/">2013</a></li>
						<li ><a href="/blog/2014/">2014</a></li>
						<li ><a href="/blog/2015/">2015</a></li>
						<li ><a href="/blog/2016/">2016</a></li>
						<li ><a href="/blog/2017/">2017</a></li>
						<li ><a href="/blog/2018/">2018</a></li>
						<li ><a href="/blog/2019/">2019</a></li>
						<li ><a href="/blog/2020/">2020</a></li>
						<li ><a href="/blog/2021/">2021</a></li>
						<li ><a href="/blog/2022/">2022</a></li>
						<li ><a href="/blog/2023/">2023</a></li>
						<li ><a href="/blog/2024/">2024</a></li>
						<li ><a href="/blog/2025/">2025</a></li>
						<li ><a href="/blog/all.html" title="That's a long list!">Complete archive</a></li>
					</ul>
				</aside>

				<aside id="sidebar_reference" class="well">
					<h5>Reference</h5>
					<ol style="list-style-type: upper-roman; padding-left: 30px;">
						<li><a style="display: inline;"
							href="/blog/2012/04/extracting-data-from-domino-into-pdf-using-xslt-and-xslfo-part-1.html">Use
								XSL:FO rendering (Domino)</a></li>
						<li><a target="_blank" href="https://wissel.net/blog/imprint.html">old references (IBM)</a></li>
					</ol>
				</aside>

			</div>
		</div>
	</div>
		<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="https://www.stickermule.com/u/43c09fe6343315f">Stickers from Stickermule</a></li>
						<li><a href="https://github.com/Stwissel">GitHub</a></li>
						<li><a href="https://bitbucket.org/stwissel/">Bitbucket</a></li>
						<li><a href="https://bsky.app/profile/stwissel.bsky.social">Bluesky</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2025 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script type="text/javascript" src="/blog/js2/admonition.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

</body>
</html>
