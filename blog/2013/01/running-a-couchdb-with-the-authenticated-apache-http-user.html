<!DOCTYPE html>
<html lang="en">
<head>
<title>Running a CouchDB with the authenticated Apache HTTP user - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
<meta name="ROBOTS" content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title" content="NotesSensei's Weblog - Running a CouchDB with the authenticated Apache HTTP user" />
<meta name="Author" content="Stephan H. Wissel" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,notes,r9,verse,r8,r7,r6,r5,raven,k-station,nsf,ntf,websphere,agile,sdlc,j2ee,.net,personcentric,singapore,twins,JavaScript,vertx, nodejs" />
<meta name="Abstract"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="ICBM" content="1.2994, 103.8425" />
<meta name="Copyright"
	content="2013,2017 Stephan H. Wissel - Creative commons licence" />
<meta HTTP-EQUIV="Content-Language" content="en" />
<meta property="fb:admins" content="567103136" />
<meta property="fb:app_id" content="219323514774289">
<meta property="og:title"
	content="wissel.net - Running a CouchDB with the authenticated Apache HTTP user" />
<meta property="og:type" content="blog" />
<meta property="og:url" content="https://wissel.net/blog" />
<meta property="og:image"
	content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<meta name="twitter:site" content="@notessensei" />
<meta name="twitter:card" content="summary" />
<meta name="xing:author"
	content="https://www.xing.com/profile/StephanH_Wissel" />

<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link href='//fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<!-- Masthead
		================================================== -->
		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

    <!--[if lt IE 10]>
  <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
    <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
    <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
      <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
      <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
        <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
        <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
      </div>
      <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox'/></a></div>
      <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 11'/></a></div>
      <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari'/></a></div>
      <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
    </div>
  </div>
<![endif]-->

    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/">2013</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/01/">January</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/CouchDB.html">CouchDB</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/01/10-commandments-for-public-facing-web-applications.html"><i class="icon-hand-left"></i>10 Commandments for public facing web applications</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/02/connect-2013-in-one-picture.html">Connect 2013 in one picture<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Running a CouchDB with the authenticated Apache HTTP user</small></h1>
					<hr />
					<div>Apache 
<a href="http://couchdb.apache.org/">CouchDB</a> shares the same 
<a href="http://www.dict.cc/?s=Stallgeruch">Stallgeruch</a> with Domino thanks to sharing a 
<a href="http://damienkatz.net/">warden</a> at some time. So during the festive season I gave it a spin. 
<br> There is 
<a href="http://www.amazon.com/s/ref=sr_nr_i_0?rh=k%3Acouchdb%2Ci%3Astripbooks&amp;keywords=couchdb&amp;ie=UTF8&amp;qid=1358953832">ample literature</a> around to get you 
<a href="http://www.amazon.com/gp/product/B00769UKVW/ref=as_li_ss_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00769UKVW&amp;linkCode=as2&amp;tag=wisselnetblog-20">started with CouchDB</a> 
<img src="http://www.assoc-amazon.com/e/ir?t=wisselnetblog-20&amp;l=as2&amp;o=1&amp;a=B00769UKVW" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> including Apache's 
<a href="http://wiki.apache.org/couchdb/Introduction">own wiki</a>. 
<br> So I was looking for something more sporty. 
<br> Since Domino 9.0 ships with IBM's version of the 
<a href="http://httpd.apache.org/">Apache HTTP server</a> I was wondering if I could setup 
<a href="http://wiki.apache.org/couchdb/Apache_As_a_Reverse_Proxy">couchDB behind an Apache reverse Proxy</a> 
<b>and</b> make couchDB recognize the authenticated user accessing the couchDB as kind of a poor man's single sign on. 
<br> I used Apache's basic authentication (only via HTTPs please), but it, in theory, would work with any authentication scheme that provides a username as outcome. 
<br> The whole solution required a bit of 
<strike>
  chicken string and duct tape 
</strike> combination of Apache modules, but works surprisingly well. 
<br> The participants: 
<ul> 
 <li><a href="https://issues.apache.org/jira/browse/COUCHDB-636">proxy_authentification_handler</a> (note the unconventional spelling): a couchDB module that accepts authentication information in the request header. You have to add that to the httpd section for the key <b>authentication handlers</b>. My entry looks like this: <code>{couch_httpd_oauth, oauth_authentication_handler}, {couch_httpd_auth, proxy_authentification_handler}, {couch_httpd_auth, cookie_authentication_handler}, {couch_httpd_auth, default_authentication_handler}</code></li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_headers.html">mod_headers</a>: Create, remove, alter headers. Anything coming in gets stripped of eventually fake headers and then the couchDB headers reapplied.</li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_proxy.html">mod_proxy</a>: The core proxy capability</li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_rewrite.html">mod_rewrite</a>: The dark magic of Apache. Used here mainly to lookup roles</li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_auth_basic.html">mod_auth_basic</a>: Used for authentication here, any other mechanis should work too</li> 
</ul> The whole magic lies in the Apache configuration (typically to find in 
<code>/etc/apache2/sites-enabled</code>. Here is what worked for me: 
<ul> 
 <li>In line 5-7 I remove any header that might be in the original request to prevent identity spoofing</li> 
 <li>Line 10 allows slashes to be transmitted encoded. I found it wouldn't work without that</li> 
 <li>Line 13-19 are standard Apache static files</li> 
 <li>Line 22-25 establish the regular reverse proxy pattern with the forward proxying switched off, nothing special there</li> 
 <li>Line 28 defines a simple <a href="http://httpd.apache.org/docs/trunk/mod/mod_rewrite.html#rewritemap">lookup map</a> which in a production system probably would be a LDAP or database query</li> 
 <li>Line 31-36 establish the authentication mechanism. For a production system you would use something <a href="http://code.google.com/p/mod-auth-oauth/wiki/mod_auth_oauth">more sophisticated</a> to run</li> 
 <li>Line 39 is essential: it simply states: only authenticated users here please</li> 
 <li>The dark magic happens in lines 42-48</li> 
 <li>Line 43 and 45 extract the identified user for use in a RewriteRule. It seems you can use the extracted variable only once, hence the duplicate lines (I might also simply not be skilled enough <img src="http://www.wissel.net/blog/emoticons/DLYH-5MZVLY/$File/smile.gif"> )</li> 
 <li>Line 44 assigns the current user to the variable <code>CUSER</code></li> 
 <li>Line 46 looks up the roles the user has into <code>CROLE</code>. Make sure your admin user has the role <code>_admin</code>. Multiple entries separated by comma and no spaces. If a user has no roles, (s)he is assigned the guest role</li> 
 <li>Lines 47/48 finally add them to the header</li> 
 <li>I didn't use the Token in this example</li> 
</ul> As usual YMMV - enjoy<div class="apache"> 
 <ol> 
  <li class="li1"> 
   <div class="de1">
     &lt; 
    <span class="kw3">VirtualHost</span> *: 
    <span class="nu0">80</span>&gt; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">ServerAdmin</span> webmaster@localhost 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="co1"># Removal of eventually spoofed request headers</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; 
    <span class="kw1">RequestHeader</span> unset X 
    <span class="sy0">-</span>Auth 
    <span class="sy0">-</span>CouchDB 
    <span class="sy0">-</span>UserName 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">RequestHeader</span> unset X 
    <span class="sy0">-</span>Auth 
    <span class="sy0">-</span>CouchDB 
    <span class="sy0">-</span>Roles 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">RequestHeader</span> unset X 
    <span class="sy0">-</span>Auth 
    <span class="sy0">-</span>CouchDB 
    <span class="sy0">-</span>Token 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="co1"># Needed for CouchDB</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; 
    <span class="kw1">AllowEncodedSlashes</span> 
    <span class="kw2">On</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="co1"># Location of static HTML files</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">DocumentRoot</span> /var/www/default 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &lt; 
    <span class="kw3">Directory</span> /&gt; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">Options</span> 
    <span class="kw2">Indexes</span> 
    <span class="kw2">FollowSymLinks</span> MultiViews 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">AllowOverride</span> 
    <span class="kw2">None</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">Order</span> 
    <span class="kw1">allow</span>, 
    <span class="kw1">deny</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">allow</span> from 
    <span class="kw2">all</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &lt;/ 
    <span class="kw3">Directory</span>&gt; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="co1"># We don't want to be an open relay</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">ProxyRequests</span> 
    <span class="kw2">Off</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">ProxyPreserveHost</span> 
    <span class="kw2">On</span> &nbsp; &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">ProxyPass</span> /couchdb http://localhost: 
    <span class="nu0">5984</span> nocanon 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; 
    <span class="kw1">ProxyPassReverse</span> /couchdb http://localhost: 
    <span class="nu0">5984</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="co1"># Role mapping for couch</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; 
    <span class="kw1">RewriteMap</span> role 
    <span class="sy0">-</span>map dbm:/var/secrets/passwd/rolemapping.map 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &lt; 
    <span class="kw3">Location</span> /couchdb&gt; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">AuthType</span> Basic 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">AuthName</span> couchdb 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">AuthUserFile</span> /var/secrets/passwd/users 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">AuthGroupFile</span> /var/secrets/passwd/groups 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">Order</span> 
    <span class="kw1">allow</span>, 
    <span class="kw1">deny</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">Allow</span> from 
    <span class="kw2">all</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="co1"># THIS WILL PROMPT AUTHENTICATION</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">Require</span> valid 
    <span class="sy0">-</span> 
    <span class="kw1">user</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="co1"># Request headers for CouchDB from authenticated user</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">RewriteEngine</span> 
    <span class="kw2">On</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">RewriteCond</span> % 
    <span class="br0">{</span>LA 
    <span class="sy0">-</span>U:REMOTE_USER 
    <span class="br0">}</span> 
    <span class="br0">(</span>. 
    <span class="sy0">+</span> 
    <span class="br0">)</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">RewriteRule</span> . 
    <span class="sy0">-</span> 
    <span class="br0">[</span>E=CUSER:%1 
    <span class="br0">]</span> 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">RewriteCond</span> % 
    <span class="br0">{</span>LA 
    <span class="sy0">-</span>U:REMOTE_USER 
    <span class="br0">}</span> 
    <span class="br0">(</span>. 
    <span class="sy0">+</span> 
    <span class="br0">)</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">RewriteRule</span> . 
    <span class="sy0">-</span> 
    <span class="br0">[</span>E=CROLE:$ 
    <span class="br0">{</span>role 
    <span class="sy0">-</span>map:%1|guest 
    <span class="br0">}</span> 
    <span class="br0">]</span> 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">RequestHeader</span> set X 
    <span class="sy0">-</span>Auth 
    <span class="sy0">-</span>CouchDB 
    <span class="sy0">-</span>UserName 
    <span class="st0">"%{CUSER}e"</span> env=CUSER 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &nbsp; &nbsp; 
    <span class="kw1">RequestHeader</span> set X 
    <span class="sy0">-</span>Auth 
    <span class="sy0">-</span>CouchDB 
    <span class="sy0">-</span>Roles 
    <span class="st0">"%{CROLE}e"</span> env=CROLE 
   </div></li> 
  <li class="li1"> 
   <div class="de1">
     &nbsp; &nbsp; &lt;/ 
    <span class="kw3">Location</span>&gt; 
   </div></li> 
  <li class="li2"> 
   <div class="de2">
     &lt;/ 
    <span class="kw3">VirtualHost</span>&gt; 
   </div></li> 
 </ol> 
</div></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-23 10:58
<span class="divider">|</span>
<a href="/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html#comments">Comments (2)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/CouchDB.html">CouchDB</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Running a CouchDB with the authenticated Apache HTTP user"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html";
						</script>
					</p>

				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_45F4FE0CC9AB106E48257AFC00523F82" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_45F4FE0CC9AB106E48257AFC00523F82"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
<img src="//www.gravatar.com/avatar/b937353fbbac2c9c47689e33db227ecb.jpg?s&#61;88" class="gravatarimg" />
							posted by <b>Steven Wagger</b> on <i>Friday 25 July 2014 AD - 00:53 Korea Standard Time</i>:<br /> <html>
 <head></head>
 <body>
  I've been looking for this! Thank you! 
  <br /> 
  <br />But it would be kind from you to include the instructions to create the rolemapping.map file. I've been trying to make it work without success... :'(
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="//www.gravatar.com/avatar/8b244c19421b34079796e5e64fc8ff75.jpg?s&#61;88" class="gravatarimg" />
							posted by <b>Stephan H. Wissel</b> on <i>Friday 25 July 2014 AD - 01:08 Korea Standard Time</i>:<br /> <html>
 <head></head>
 <body>
  The link in the bullet list points to the instructions how to make a mapping file. It is a space separated file with roles 
  <br /> 
  <br />johndoe admin,family,dev 
  <br />janedoe dev 
  <br /> 
  <br />then you use httx2dbm tool to create the map file. Which part didn't work?
 </body>
</html>
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/01/10-commandments-for-public-facing-web-applications.html"><i class="icon-hand-left"></i>10 Commandments for public facing web applications</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/02/connect-2013-in-one-picture.html">Connect 2013 in one picture<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/">2013</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/01/">January</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/CouchDB.html">CouchDB</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I'm working as Cloud "Program Architect Director" for Salesforce. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://plus.google.com/+StephanWissel/about" rel="author" style="text-decoration: none;">
						    <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" alt="" style="border: 0; width: 16px; height: 16px;" /> Google+</a></li>
						<li><a href="skype://notessensei?chat">Skype</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2018 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery.min.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>
    <script type="text/javascript">
    $(document).ready(function() {
            SyntaxHighlighter.all();
    });
    </script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
		        SyntaxHighlighter.all();
			renderComment("6LcUOewSAAAAACAI4zVcGFVkGWmp0sUH5gabwy1q", "45F4FE0CC9AB106E48257AFC00523F82");
		});
	</script>

</body>
</html>
