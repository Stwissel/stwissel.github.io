<!DOCTYPE html>
<html lang="en">
<head>
<title>NotesSensei's Blog by month: By Date: January 2013</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
<meta name="ROBOTS" content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title" content="NotesSensei's Weblog - " />
<meta name="Author" content="Stephan H. Wissel" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,notes,r9,verse,r8,r7,r6,r5,raven,k-station,nsf,ntf,websphere,agile,sdlc,j2ee,.net,personcentric,singapore,twins,JavaScript,vertx, nodejs" />
<meta name="Abstract"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="ICBM" content="1.2994, 103.8425" />
<meta name="Copyright"
	content=",2017 Stephan H. Wissel - Creative commons licence" />
<meta HTTP-EQUIV="Content-Language" content="en" />
<meta property="fb:admins" content="567103136" />
<meta property="fb:app_id" content="219323514774289">
<meta property="og:title"
	content="wissel.net - " />
<meta property="og:type" content="blog" />
<meta property="og:url" content="https://wissel.net/blog" />
<meta property="og:image"
	content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<meta name="twitter:site" content="@notessensei" />
<meta name="twitter:card" content="summary" />
<meta name="xing:author"
	content="https://www.xing.com/profile/StephanH_Wissel" />

<link rel="stylesheet" type="text/css" href="/blog/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/markdown.css" />
<link href='//fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnet" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li><a href="/blog">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>


	<div class="container">

    		<!-- Masthead
		================================================== -->
		<br />
		<header>
			<div id="main" class="hero-unit">
				<h1 id="jumbotron">wissel.net
				</h1>
				<p class="lead">Usability - Productivity - Business - The web -
					Singapore &amp; Twins</p>
			</div>
		</header>

    <!--[if lt IE 10]>
  <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
    <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
    <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
      <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
      <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
        <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
        <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
      </div>
      <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox'/></a></div>
      <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 11'/></a></div>
      <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari'/></a></div>
      <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
    </div>
  </div>
<![endif]-->

	<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog//"></a> <span class="divider">/</span></li>
  <li><a href="/blog///"></a></li>
</ul>

		<div class="row-fluid">
			<div class="span9">
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/index.html"><i class="icon-hand-left"></i>Year 2013</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/02/index.html">By Date: February 2013<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<div class="well well-raised">
					<h1>By Date: January 2013</h1>
				</div>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html">Running a CouchDB with the authenticated Apache HTTP user</a></small>
					</h1>
					<hr />
					<div>Apache 
<a href="http://couchdb.apache.org/">CouchDB</a> shares the same 
<a href="http://www.dict.cc/?s=Stallgeruch">Stallgeruch</a> with Domino thanks to sharing a 
<a href="http://damienkatz.net/">warden</a> at some time. So during the festive season I gave it a spin. 
<br /> There is 
<a href="http://www.amazon.com/s/ref=sr_nr_i_0?rh=k%3Acouchdb%2Ci%3Astripbooks&amp;keywords=couchdb&amp;ie=UTF8&amp;qid=1358953832">ample literature</a> around to get you 
<a href="http://www.amazon.com/gp/product/B00769UKVW/ref=as_li_ss_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00769UKVW&amp;linkCode=as2&amp;tag=wisselnetblog-20">started with CouchDB</a> 
<img src="http://www.assoc-amazon.com/e/ir?t=wisselnetblog-20&amp;l=as2&amp;o=1&amp;a=B00769UKVW" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> including Apache's 
<a href="http://wiki.apache.org/couchdb/Introduction">own wiki</a>. 
<br /> So I was looking for something more sporty. 
<br /> Since Domino 9.0 ships with IBM's version of the 
<a href="http://httpd.apache.org/">Apache HTTP server</a> I was wondering if I could setup 
<a href="http://wiki.apache.org/couchdb/Apache_As_a_Reverse_Proxy">couchDB behind an Apache reverse Proxy</a> 
<b>and</b> make couchDB recognize the authenticated user accessing the couchDB as kind of a poor man's single sign on. 
<br /> I used Apache's basic authentication (only via HTTPs please), but it, in theory, would work with any authentication scheme that provides a username as outcome. 
<br /> The whole solution required a bit of 
<strike>
  chicken string and duct tape 
</strike> combination of Apache modules, but works surprisingly well. 
<br /> The participants: 
<ul> 
 <li><a href="https://issues.apache.org/jira/browse/COUCHDB-636">proxy_authentification_handler</a> (note the unconventional spelling): a couchDB module that accepts authentication information in the request header. You have to add that to the httpd section for the key <b>authentication handlers</b>. My entry looks like this: <code>{couch_httpd_oauth, oauth_authentication_handler}, {couch_httpd_auth, proxy_authentification_handler}, {couch_httpd_auth, cookie_authentication_handler}, {couch_httpd_auth, default_authentication_handler}</code></li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_headers.html">mod_headers</a>: Create, remove, alter headers. Anything coming in gets stripped of eventually fake headers and then the couchDB headers reapplied.</li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_proxy.html">mod_proxy</a>: The core proxy capability</li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_rewrite.html">mod_rewrite</a>: The dark magic of Apache. Used here mainly to lookup roles</li> 
 <li><a href="http://httpd.apache.org/docs/trunk/mod/mod_auth_basic.html">mod_auth_basic</a>: Used for authentication here, any other mechanis should work too</li> 
</ul> The whole magic lies in the Apache configuration (typically to find in 
<code>/etc/apache2/sites-enabled</code>. Here is what worked for me: 
<ul> 
 <li>In line 5-7 I remove any header that might be in the original request to prevent identity spoofing</li> 
 <li>Line 10 allows slashes to be transmitted encoded. I found it wouldn't work without that</li> 
 <li>Line 13-19 are standard Apache static files</li> 
 <li>Line 22-25 establish the regular reverse proxy pattern with the forward proxying switched off, nothing special there</li> 
 <li>Line 28 defines a simple <a href="http://httpd.apache.org/docs/trunk/mod/mod_rewrite.html#rewritemap">lookup map</a> which in a production system probably would be a LDAP or database query</li> 
 <li>Line 31-36 establish the authentication mechanism. For a production system you would use something <a href="http://code.google.com/p/mod-auth-oauth/wiki/mod_auth_oauth">more sophisticated</a> to run</li> 
 <li>Line 39 is essential: it simply states: only authenticated users here please</li> 
 <li>The dark magic happens in lines 42-48</li> 
 <li>Line 43 and 45 extract the identified user for use in a RewriteRule. It seems you can use the extracted variable only once, hence the duplicate lines (I might also simply not be skilled enough <img src="http://www.wissel.net/blog/emoticons/DLYH-5MZVLY/$File/smile.gif" /> )</li> 
 <li>Line 44 assigns the current user to the variable <code>CUSER</code></li> 
 <li>Line 46 looks up the roles the user has into <code>CROLE</code>. Make sure your admin user has the role <code>_admin</code>. Multiple entries separated by comma and no spaces. If a user has no roles, (s)he is assigned the guest role</li> 
 <li>Lines 47/48 finally add them to the header</li> 
 <li>I didn't use the Token in this example</li> 
</ul> As usual YMMV - enjoy</div>
					<hr />
 <a href="/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html">Read more</a>
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-23 10:58
<span class="divider">|</span>
<a href="/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html#comments">Comments (2)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/CouchDB.html">CouchDB</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Running a CouchDB with the authenticated Apache HTTP user"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/running-a-couchdb-with-the-authenticated-apache-http-user.html";
						</script>
					</p>

				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/10-commandments-for-public-facing-web-applications.html">10 Commandments for public facing web applications</a></small>
					</h1>
					<hr />
					<div>A customer recently asked how a public facing web application on Domino would be different from an Intranet application. In general there shouldn't be a difference. However in a cost/benefit analysis Intranets are usually considered &quot;friendly territory&quot;, so less effort is spent on hardening against attacks and poking around (much to my delight, when I actually poke around). With this in mind here you go (in no specific order): 
<ol> 
 <li><b>Protect your server</b>: Typically you would have a <a href="http://www.genua.eu/" title="The best firewall ever. When you contact Dr. Markus Harlander, tell him Stephan Wissel says hi">firewall</a> and <a href="http://httpd.apache.org/docs/trunk/mod/mod_proxy.html">reverse proxy</a> that provides access to your application.<br /> It should be configured to check URLs carefully to ensure no unexpected calls are made from somebody probing database URLs. It is <b>quite some work</b> to get that right (for any platform), but you surly don't want to become &quot;data leak&quot; front-page news.<br /> There's not much to do on the Domino side, it is mostly the firewall guys' work. Typical attack attempts include stuff like <code>?ReadViewEntries</code>, <code>$Defaultxx</code> or <code>$First</code>. Of course when you use Ajax calls into views you need to cater for that.<br /> I would block <b>*all*</b> <code>?ReadViewEntries</code> and have URL masks for the Ajax calls you plan to use. Be careful with categorized views. Avoid them if possible and always select &quot;hide empty categories&quot;. Have an empty <code>$$ViewTemplateDefault</code> that redirects to the application</li> 
 <li><b>Mask your URLs</b>: Users shouldn't go to &quot;<code>/newApp/Loand2013/loanapproduction.nsf?Open</code>&quot; but to &quot;<code>/loans</code>&quot;. Use Internet site documents to configure that (eventually the firewall/reverse proxy can do that too). In Notes 9.0 IBM provides mod_domino, so you can use the <a href="http://www-01.ibm.com/software/webservers/httpservers/">IBM HTTP Server</a> (a.k.a Apache HTTP) to front Domino. On the XPagesWiki there is more information <a href="http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/How_to_secure_your_application">on securing URLs with redirects</a>. Go and read them</li> 
 <li><b>Harden your agents</b>: Do not allow any <code>?OpenAgent</code> URL (challenge: an agent also opens on ?Open, so if all agents have a certain naming you can use URL pattern to block them). In an agent make sure your code handles errors properly. Check where the call to an agent came from. If it was called directly discard it.</li> 
 <li><b>Treat data with suspicion</b>: Do not rely on client side validation. Providing it is nice for the user as comfortable input aid. However you don't control the devices and browsers anymore and an attacker can use <a href="https://getfirebug.com/">Firebug</a> or <a href="http://curl.haxx.se/ ">CURL</a> to bypass any of your validations. You have to validate everything on the server (again). Also you have to check content for unexpected input like passthru HTML or JavaScript. <a href="http://xpages.info">XPages</a> does that for you</li> 
 <li><b>Know your user</b>: Split your application into more than one database. One for the publicly accessible content (access anonymous) and one that requires authentication. Do not try to dodge authenticated users and re-invent security mechanisms. You <b>*will*</b> overlook something and then your organisation makes headline news in the &quot;latest data breach&quot; section. There are <a href="https://www.google.com/search?q=create+ltpa+token">ample examples how to generate LTPA tokens</a> outside of Domino, so you don't need to manage usernames/passwords etc if you don't want to. Connect them to your existing customer authentication scheme (e.g. eBanking if you are a bank) for starters. <b>Do not rely</b> on some cookie you try to interpret and then show or don't show content. The security tools at your hand are are ACL and reader fields</li> 
 <li><b>Test, Test, Test</b>: You can <a href="https://www.youtube.com/watch?v=Aa-svs5mQD8">Usability test</a>, <a href="/blog/d6plinks/SHWL-7664GU">load test</a>, <a href="seleniumhq.org/">functional test</a>, <a href="http://en.wikipedia.org/wiki/Penetration_test">penetration test</a>, <a href="http://validator.w3.org/">validity test</a>, <a href="http://www.webpagetest.org/">speed test</a> and <a href="http://junit.sourceforge.net/">unit test</a>. If you don't test, the general public and <i>interested 3rd parties</i> will do that for you. The former leads to bad press, the later to data breaches</li> 
 <li>Use a <b>responsive layout</b>: Use the <a href="http://infolib.lotus.com/resources/oneui/3.0/docPublic/index.htm">IBM OneUI</a> (v3.0 as of this blog date) or <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> (get a <a href="https://wrapbootstrap.com/">nice theme</a>). XPages provides great mobile controls. Using an XPage single page application you can limit the range of allowed URLs to further protect your assets</li> 
 <li>Code for the most <b>modern browser</b>: use <a href="http://www.html5rocks.com/en/">HTML5</a> and <a href="/blog/d6plinks/SHWL-92PKK7">degrade gracefully</a>. So it is not &quot;<i>must look the same in all browsers</i>&quot;, but &quot;<i>users must be able to complete tasks in all browsers</i>&quot; - experienced might differ. Take advantage of <a href="https://www.youtube.com/watch?v=HKNZ-tQQnSY">local cache</a> (use an <a href="http://en.wikipedia.org/wiki/HTTP_ETag">ETag</a> and all the <a href="http://www.slideshare.net/souders">other tips!</a>)</li> 
 <li><b>Use <a href="http://en.wikipedia.org/wiki/https">https</a></b> the very moment a user is known. If in doubt try <a href="http://codebutler.com/firesheep/">Firesheep</a></li> 
 <li>Of course the <b><a href="http://www.joelonsoftware.com/articles/fog0000000043.html">Spolsky Test</a></b> applies here too!</li> 
</ol> As usual YMMV</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-23 11:17
<span class="divider">|</span>
<a href="/blog/2013/01/10-commandments-for-public-facing-web-applications.html#comments">Comments (3)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/Show-N-Tell Thursday.html">Show-N-Tell Thursday</a>  <a href="/blog/categories/Software.html">Software</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/10-commandments-for-public-facing-web-applications.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="10 Commandments for public facing web applications"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/10-commandments-for-public-facing-web-applications.html";
						</script>
					</p>

				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/what-happened-when-the-notes-1-9-time-line.html">What happened when - the Notes 1-9 time line</a></small>
					</h1>
					<hr />
					<div>The 
<a href="http://www.ibm.com/developerworks/lotus/library/ls-NDHistory/">history of 
 <strike>
   Lotus 
 </strike> IBM Notes</a> makes an interesting read (there's a 
<a href="http://en.wikipedia.org/wiki/IBM_Lotus_Notes#History">Wikipedia version</a> too). Since 1989 (that's 24 years) Notes has delivered releases that are 
<i>fiercely backwards compatible</i>â„¢. I loaded the 
<a href="/blog/d6plinks/SHWL-7P27CR">nifty fifty</a> into a current Notes client and the R2 databases worked (after a 
<a href="/blog/d6plinks/SHWL-6L4CJR">compact</a>) just fine. I like to put things into perspective: 
<br /> 
<img src="/blog/images/2013/NotesTimeline640.jpg" border="0" alt="Notes from version 1.0 to 9.0" /> 
<br /> There are a few factoids that are quite interesting: 
<ul> 
 <li>Linux is almost as old as Notes</li> 
 <li>The first public release of MS Exchange was 4.0 when Notes released 4.5. Ein Schelm wer einen Zufall vermutet</li> 
 <li>Symbian predated Blackberry by 5 years</li> 
 <li>Sharepoint was introduced in the same year as IE6, could there be coincidences to the pain level?</li> 
 <li>Android was released in the same year as the iPhone, but it took a year before phones were available</li> 
 <li>There seems to be a huge period of inactivity after the 5.0 release.<br /> However there were not less than 12 point releases of the 5.0 code stream (5.0.1 - 5.0.13) with 5.0.8 the most popular (as I recall).</li> 
 <li>The biggest expansion of Notes were the following versions 6.0 / 6.5. So if history, as common saying goes, repeats itself, we are in for interesting days for Notes 9.0</li> 
 <li>2004/2005 was a big year for Internet technology: the term <a href="http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications">Ajax was coined</a>, <a href="http://www.ubuntu.com/">Ubuntu</a> and <a href="http://www.getfirefox.com/">Firefox</a> had their 1.0 release</li> 
 <li>There seems to be a huge gap between 8.5 and 9.0 of 5 years. However in each of this years IBM delivered a point release with new functionality (just some highlights listed, check the <a href="http://www-10.lotus.com/ldd/fixlist.nsf/">full release notes</a> to see all): 
  <ul> 
   <li>2009 <a href="http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.notes85.help.doc%2Ffram_what_new_85_r.html">8.5.1</a>: XPiNC: XPages in the Notes client</li> 
   <li>2010 <a href="http://www-10.lotus.com/ldd/dominowiki.nsf/dx/Whats_new_in_Lotus_Notes_8.5.2">8.5.2</a>: Managed replicas, private iCalendar feeds</li> 
   <li>2011 <a href="http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.help.domino.admin85.doc%2F___whatsnewinibmlotusdomino853.html">8.5.3</a>: Performance, Security and Integration improvements (with fixpacks in 2012)</li> 
  </ul> Of course that version policy has a dark side: business users typically don't care for the numbers behind the dot and perceived Notes as &quot;in maintenance mode&quot; while it is alive and kicking </li> 
</ul> There are exiting times ahead for 
<a href="http://www-01.ibm.com/software/lotus/products/notes/" title="I hope you don't miss the irony of that link">IBM Notes</a>. See you in 
<a href="http://www-01.ibm.com/software/collaboration/events/connect/">Orlando</a>. Say hi.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-21 11:23
<span class="divider">|</span>
<a href="/blog/2013/01/what-happened-when-the-notes-1-9-time-line.html#comments">Comments (3)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/IBM Notes.html">IBM Notes</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/what-happened-when-the-notes-1-9-time-line.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="What happened when - the Notes 1-9 time line"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/what-happened-when-the-notes-1-9-time-line.html";
						</script>
					</p>

				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/generating-test-data.html">Generating Test data</a></small>
					</h1>
					<hr />
					<div>You have seen that over and over: 
<i>Test1, qwertyyui, asdfgh</i> as data entered in development to test an application. Short of borrowing a copy of production data, having useful test data is a pain in the neck. For my currently limited exposure to development (after all I work as pre 
<b>Sales</b> engineer) I use a Java class that helps me to generate random result from a set of selection values. To make this work I used the following libraries: 
<ul> 
 <li><a href="http://joda-time.sourceforge.net/">JodaTime</a>: takes the headache out of date calculation</li> 
 <li><a href="http://code.google.com/p/google-gson/">gson</a>: save and load JSON, in this case the random data</li> 
 <li><a href="http://loremipsum.sourceforge.net/">Lorem Ipsum</a>: generate blocks of text that <a href="https://www.google.com/search?q=lorem+ipsum+jokes">look good</a> </li> Here you go: 
 <div class="java5"> 
  <span class="kw2">package</span> 
  <span class="co2">com.notessensei.randomdata</span> 
  <span class="sy0">;</span> 
  <br /> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.io.InputStream</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.io.InputStreamReader</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.io.OutputStream</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.io.PrintWriter</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.util.Date</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.util.HashMap</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.util.List</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.util.Map</span> 
  <span class="sy0">;</span> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">java.util.Random</span> 
  <span class="sy0">;</span> 
  <br /> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">org.joda.time.DateTime</span> 
  <span class="sy0">;</span> 
  <br /> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">com.google.gson.Gson</span> 
  <span class="sy0">;</span> 
  <br /> 
  <br /> 
  <span class="kw2">import</span> 
  <span class="co2">de.svenjacobs.loremipsum.LoremIpsum</span> 
  <span class="sy0">;</span> 
  <br /> 
  <br /> 
  <span class="co3">/**<br /> &nbsp;* Source of random data to generate test data for anything before use you need<br /> &nbsp;* either load lists of your data using addRandomStringSource or load a JSON<br /> &nbsp;* file from a previous run using loadDataFromJson<br /> &nbsp;* <br /> &nbsp;* @author NotesSensei<br /> &nbsp;* <br /> &nbsp;*/</span> 
  <br /> 
  <span class="kw2">public</span> 
  <span class="kw2">class</span> RandomLoader 
  <span class="br0">{</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="coMULTI">/*<br /> &nbsp; &nbsp; &nbsp;* How often should the random generator try for getRandomString with<br /> &nbsp; &nbsp; &nbsp;* exclusion before it gives up<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <span class="kw2">static</span> 
  <span class="kw2">final</span> 
  <span class="kw3">int</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MAX_RANDOM_TRIES&nbsp; &nbsp; = 
  <span class="nu0">100</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">private</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Map.html"><span class="kw46">Map</span></a> 
  <span class="sy0">&lt;</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a>, 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+List"><span class="kw166">List</span></a> 
  <span class="sy0">&lt;</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> 
  <span class="sy0">&gt;&gt;</span> &nbsp; randomStrings 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">private</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Random.html"><span class="kw46">Random</span></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; randomGenerator 
  <span class="sy0">;</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Initialize all things random<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> RandomLoader 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span> = 
  <span class="kw2">new</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/HashMap.html"><span class="kw46">HashMap</span></a> 
  <span class="sy0">&lt;</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a>, 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+List"><span class="kw166">List</span></a> 
  <span class="sy0">&lt;</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> 
  <span class="sy0">&gt;&gt;</span> 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">this</span>. 
  <span class="me1">randomGenerator</span> = 
  <span class="kw2">new</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Random.html"><span class="kw46">Random</span></a> 
  <span class="br0">(</span> 
  <span class="kw2">new</span> 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+Date"><span class="kw166">Date</span></a> 
  <span class="br0">(</span> 
  <span class="br0">)</span>. 
  <span class="me1">getTime</span> 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Adds or ammends a collection of values to draw from<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <span class="kw3">void</span> addRandomStringSource 
  <span class="br0">(</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> sourceName, 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+List"><span class="kw166">List</span></a> 
  <span class="sy0">&lt;</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> 
  <span class="sy0">&gt;</span> sourceMembers 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw1">if</span> 
  <span class="br0">(</span> 
  <span class="sy0">!</span> 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span>. 
  <span class="me1">containsKey</span> 
  <span class="br0">(</span>sourceName 
  <span class="br0">)</span> 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span>. 
  <span class="me1">put</span> 
  <span class="br0">(</span>sourceName, sourceMembers 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <span class="kw1">else</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="co1">// We have a list of this name, so we add the values</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+List"><span class="kw166">List</span></a> 
  <span class="sy0">&lt;</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> 
  <span class="sy0">&gt;</span> existingList = 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span>. 
  <span class="me1">get</span> 
  <span class="br0">(</span>sourceName 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw1">for</span> 
  <span class="br0">(</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> newMember : sourceMembers 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; existingList. 
  <span class="me1">add</span> 
  <span class="br0">(</span>newMember 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Get rid of a list we don't need anymore<br /> &nbsp; &nbsp; &nbsp;* <br /> &nbsp; &nbsp; &nbsp;* @param sourceName<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <span class="kw3">void</span> dropRandomStringSource 
  <span class="br0">(</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> sourceName 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw1">if</span> 
  <span class="br0">(</span> 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span>. 
  <span class="me1">containsKey</span> 
  <span class="br0">(</span>sourceName 
  <span class="br0">)</span> 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span>. 
  <span class="me1">remove</span> 
  <span class="br0">(</span>sourceName 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Gets a random value from a predefined list<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> getRandomString 
  <span class="br0">(</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> sourceName 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw1">if</span> 
  <span class="br0">(</span> 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span>. 
  <span class="me1">containsValue</span> 
  <span class="br0">(</span>sourceName 
  <span class="br0">)</span> 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+List"><span class="kw166">List</span></a> 
  <span class="sy0">&lt;</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> 
  <span class="sy0">&gt;</span> sourceCollection = 
  <span class="kw2">this</span>. 
  <span class="me1">randomStrings</span>. 
  <span class="me1">get</span> 
  <span class="br0">(</span>sourceName 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw3">int</span> whichValue = 
  <span class="kw2">this</span>. 
  <span class="me1">randomGenerator</span>. 
  <span class="me1">nextInt</span> 
  <span class="br0">(</span>sourceCollection. 
  <span class="me1">size</span> 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> sourceCollection. 
  <span class="me1">get</span> 
  <span class="br0">(</span>whichValue 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="co1">// If we don't have that list we return the requested list name</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> sourceName 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Get a random String, but not the value specified Good for populating<br /> &nbsp; &nbsp; &nbsp;* travel to (exclude the from) or from/to message pairs etc<br /> &nbsp; &nbsp; &nbsp;* <br /> &nbsp; &nbsp; &nbsp;* @param sourceName<br /> &nbsp; &nbsp; &nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from which list<br /> &nbsp; &nbsp; &nbsp;* @param excludedResult<br /> &nbsp; &nbsp; &nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;what not to return<br /> &nbsp; &nbsp; &nbsp;* @return<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> getRandomStringButNot 
  <span class="br0">(</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> sourceName, 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> excludedResult 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> result = 
  <span class="kw4">null</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw1">for</span> 
  <span class="br0">(</span> 
  <span class="kw3">int</span> i = 
  <span class="nu0">0</span> 
  <span class="sy0">;</span> i 
  <span class="sy0">&lt;</span> MAX_RANDOM_TRIES 
  <span class="sy0">;</span> i++ 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = 
  <span class="kw2">this</span>. 
  <span class="me1">getRandomString</span> 
  <span class="br0">(</span>sourceName 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw1">if</span> 
  <span class="br0">(</span> 
  <span class="sy0">!</span>result. 
  <span class="me1">equals</span> 
  <span class="br0">(</span>excludedResult 
  <span class="br0">)</span> 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">break</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> result 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* For populating whole paragraphs of random text LoremIpsum Style<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> getRandomParagraph 
  <span class="br0">(</span> 
  <span class="kw3">int</span> numberOfWords 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; LoremIpsum li = 
  <span class="kw2">new</span> LoremIpsum 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> li. 
  <span class="me1">getWords</span> 
  <span class="br0">(</span>numberOfWords 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Get a date in the future<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+Date"><span class="kw166">Date</span></a> getFutureDate 
  <span class="br0">(</span> 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+Date"><span class="kw166">Date</span></a> startDate, 
  <span class="kw3">int</span> maxDaysDistance 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw3">int</span> actualDayDistance = 
  <span class="kw2">this</span>. 
  <span class="me1">randomGenerator</span>. 
  <span class="me1">nextInt</span> 
  <span class="br0">(</span>maxDaysDistance + 
  <span class="nu0">1</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; DateTime jdt = 
  <span class="kw2">new</span> org. 
  <span class="me1">joda</span>. 
  <span class="me1">time</span>. 
  <span class="me1">DateTime</span> 
  <span class="br0">(</span>startDate 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; DateTime jodaResult = jdt. 
  <span class="me1">plusDays</span> 
  <span class="br0">(</span>actualDayDistance 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> jodaResult. 
  <span class="me1">toDate</span> 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Get a date in the past, good for approval simulation<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+Date"><span class="kw166">Date</span></a> getPastDate 
  <span class="br0">(</span> 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+Date"><span class="kw166">Date</span></a> startDate, 
  <span class="kw3">int</span> maxDaysDistance 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw3">int</span> actualDayDistance = 
  <span class="kw2">this</span>. 
  <span class="me1">randomGenerator</span>. 
  <span class="me1">nextInt</span> 
  <span class="br0">(</span>maxDaysDistance + 
  <span class="nu0">1</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; DateTime jdt = 
  <span class="kw2">new</span> org. 
  <span class="me1">joda</span>. 
  <span class="me1">time</span>. 
  <span class="me1">DateTime</span> 
  <span class="br0">(</span>startDate 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; DateTime jodaResult = jdt. 
  <span class="me1">minusDays</span> 
  <span class="br0">(</span>actualDayDistance 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> jodaResult. 
  <span class="me1">toDate</span> 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Lots of applications are about $$ approvals, so we need a generator<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <span class="kw3">float</span> getRandomAmount 
  <span class="br0">(</span> 
  <span class="kw3">float</span> minimum, 
  <span class="kw3">float</span> maximum 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="co1">// between 0.0 and 1.0F</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw3">float</span> seedValue = 
  <span class="kw2">this</span>. 
  <span class="me1">randomGenerator</span>. 
  <span class="me1">nextFloat</span> 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> 
  <span class="br0">(</span>minimum + 
  <span class="br0">(</span> 
  <span class="br0">(</span>maximum - minimum 
  <span class="br0">)</span> 
  <span class="sy0">*</span> seedValue 
  <span class="br0">)</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Save the random strings to a JSON file for reuse<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <span class="kw3">void</span> saveDatatoJson 
  <span class="br0">(</span> 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+OutputStream"><span class="kw166">OutputStream</span></a> out 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; Gson gson = 
  <span class="kw2">new</span> Gson 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/io/PrintWriter.html"><span class="kw20">PrintWriter</span></a> writer = 
  <span class="kw2">new</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/io/PrintWriter.html"><span class="kw20">PrintWriter</span></a> 
  <span class="br0">(</span>out 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; gson. 
  <span class="me1">toJson</span> 
  <span class="br0">(</span> 
  <span class="kw2">this</span>, writer 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <br /> &nbsp; &nbsp; 
  <span class="co3">/**<br /> &nbsp; &nbsp; &nbsp;* Load a saved JSON file to populate the random strings<br /> &nbsp; &nbsp; &nbsp;*/</span> 
  <br /> &nbsp; &nbsp; 
  <span class="kw2">public</span> 
  <span class="kw2">static</span> RandomLoader loadDataFromJson 
  <span class="br0">(</span> 
  <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+InputStream"><span class="kw166">InputStream</span></a> in 
  <span class="br0">)</span> 
  <span class="br0">{</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/io/InputStreamReader.html"><span class="kw20">InputStreamReader</span></a> reader = 
  <span class="kw2">new</span> 
  <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/io/InputStreamReader.html"><span class="kw20">InputStreamReader</span></a> 
  <span class="br0">(</span>in 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; Gson gson = 
  <span class="kw2">new</span> Gson 
  <span class="br0">(</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; RandomLoader result = gson. 
  <span class="me1">fromJson</span> 
  <span class="br0">(</span>reader, RandomLoader. 
  <span class="kw2">class</span> 
  <span class="br0">)</span> 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
  <span class="kw2">return</span> result 
  <span class="sy0">;</span> 
  <br /> &nbsp; &nbsp; 
  <span class="br0">}</span> 
  <br /> 
  <span class="br0">}</span> 
 </div> As usual YMMV 
</ul></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-18 09:54
<span class="divider">|</span>
<a href="/blog/2013/01/generating-test-data.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/Software.html">Software</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/generating-test-data.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Generating Test data"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/generating-test-data.html";
						</script>
					</p>

				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/mobile-application-interaction-models.html">Mobile Application Interaction Models</a></small>
					</h1>
					<hr />
					<div>Latest since 
<a href="https://plus.google.com/u/0/+EricSchmidt/about">Eric Schmidt</a> announced the 
<a href="http://googlemobile.blogspot.sg/2010/02/barcelona-mobile-first.html">mobile first</a> doctrine in Barcelona, every developer knows that it is coming. 
<br /> Of course with the fragmentation of the runtimes (think Android, i/OS, Blackberry, Bada, Windows Phone 8 etc.) and the development platforms (Objective C, C++, Java, C#) the discussion rages on: is a web application (think HTML, CSS, JavaScript) sufficient or do I really need to write native code for each platform? I covered 
<a href="/blog/d6plinks/SHWL-8HP8UR">my view on the options</a> before. 
<br /> At a closer look, the difference is not so much about how an application is developed, but about the interaction model used. Of course each development environment leans towards a specific interaction model. Web applications tend to interact online, while native applications can do anything, but work tentatively offline (think 
<a href="http://filmsbykris.com/pop/">Angry Birds</a>) 
<br /> One obvious problem with online applications is network coverage (think: everywhere, just not in this conference room or plane), another perceived one is bandwidth. The situation 
<a href="http://www.akamai.com/stateoftheinternet/">is improving</a> and obscures the real issue: Latency. An online application works roughly like this: 
<br /> 
<img src="/blog/images/2013/MobileApp1.jpg" border="0" alt="Mobile Application with network traffic" /> 
<br /> The data packages are, once the main page is loaded, actually quite small, but frequent. 
<br /> How to explain latency? I usually take the restaurant as example. Bandwidth is the size of the tray the waiter can carry. In a small bistro the waiter needs to go back and forth a number of times if you and your football team (soccer for our American friends) order their beers at once - you have a bandwidth problem - one that doesn't exist on the 
<a href="http://www.wdr.de/bilder/mediendb/Fotostrecken/wdr2/120921_kellnerin_kruege_pahuber_990x660_m.jpg">Oktoberfest</a>. Latency however is the time from calling the waitress until she appears and the time she needs to place the order. Now imagine instead of ordering your 11 beers in one go, you do that sequentially one by one (besides p*****g the waitress off), you have a latency problem. The waitress spends more time running back and forth than actually serving beer. 
<br /> 
<img src="/blog/images/2013/NetworkLatency.jpg" border="0" alt="Network Latency is the issue here" /> 
<br /> As long as you sit in a well connected environment, you won't experience much: 
<ul> 
 <li>My server in the home network has a latency of about 0.2 ms</li> 
 <li>In the IBM office the local servers have about 6-8ms (Switches &amp; Firewalls take their toll)</li> 
 <li>when I reach out to an overseas server that is not cached by a <a href="http://en.wikipedia.org/wiki/Content_delivery_network">CDN</a> I get latencies of 200-300ms</li> 
 <li>On mobile 2 or 3G in a crowded place that latency easily goes up to 1.5sec</li> 
</ul> Now imagine you have an application that makes 100 small Ajax calls like populating a dropbox, doing a typeahead, load contact details etc. 
<ul> 
 <li>In my local network that amounts to a total delay of 20ms, not noticeable</li> 
 <li>In the office it is still below a second</li> 
 <li>overseas it is already 30sec</li> 
 <li>on the patchy mobile network 2.5 minutes, rendering such an application useless.</li> 
</ul> The solution here, available to native and web applications is to stick to rule 1 of application development: 
<h2>Keep the network out of the user experience!</h2> This sounds easier and harder than it actually is: 
<br /> 
<img src="/blog/images/2013/MobileApp2.jpg" border="0" alt="Mobile Application with local interaction" /> 
<br /> The UI would only interact with local content and all network communication would, as far as possible, happen in the background. 
<a href="http://www.w3.org/html/wg/drafts/html/master/">HTML5</a> knows the 
<a href="http://www.html5rocks.com/en/features/storage">storage API</a> and is quite 
<a href="http://www.html5rocks.com/en/features/offline">offline capable</a>. Background operations are supported using 
<a href="http://www.whatwg.org/specs/web-workers/current-work/">web workers</a> or (via 
<a href="http://www.appcelerator.com/platform/titanium-sdk">Titanium</a>) 
<a href="http://mqtt.org/">MQTT</a> (my personal favourite). 
<br /> Of course that mode is much harder to master - which applies to the native applications too: suddenly you have data on a central server and a mobile device and need to keep them in sync. 
<br /> This is manageable for One-user-access applications like email, but quite a headache for concurrent access applications like Collaboration, ERP or CRM. Short of reinventing Notes replication (someone else 
<a href="http://damienkatz.net/">did that</a>) you could treat the local data as &quot;cache only&quot; and 
<a href="/blog/d6plinks/shwl-78e34m">queue updates</a>. Of course proper sync needs extra meta data, quite a headache for an RDBMS.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-15 10:26
<span class="divider">|</span>
<a href="/blog/2013/01/mobile-application-interaction-models.html#comments">Comments (2)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/Mobile.html">Mobile</a>  <a href="/blog/categories/XPages.html">XPages</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/mobile-application-interaction-models.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Mobile Application Interaction Models"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/mobile-application-interaction-models.html";
						</script>
					</p>

				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/how-we-successfully-killed-email-almost.html">How we successfully killed eMail (almost)</a></small>
					</h1>
					<hr />
					<div>A recent 
<a href="https://twitter.com/alanlepo/status/287314304309530624">conversation</a> (in 140 characters or less) with 
<a href="http://www.alanlepofsky.net/">Alan</a> and a 
<a href="http://www.elsua.net/2013/01/07/social-business-in-2013-a-commitment/">thought exchange</a> with 
<a href="https://plus.google.com/101335707221917520541/posts">Luis</a> got me thinking (again) about the death of eMail, namely the death wish the 
<a href="https://plus.google.com/s/%23SocBiz">#SocBiz</a> movement has for it. 
<br /> When looking at the general discussion three items constantly get mixed up: 
<ul> 
 <li>&quot;eMail the transport&quot; (<a href="http://en.wikipedia.org/wiki/SMTP">SMTP</a> for that matter) </li> 
 <li>&quot;eMail the software&quot; to <a href="http://en.wikipedia.org/wiki/List_of_email_clients">deal with</a> what arrives </li> 
 <li> &quot;eMail the habit&quot; -- of swamping people with irrelevant information and hiding relevant information from others</li> 
</ul> The transport is a wild success and together with 
<a href="http://en.wikipedia.org/wiki/Http">http</a> holds the 
<a href="http://en.wikipedia.org/wiki/Series_of_tubes">intertubes</a> together. Innovation in the inbox (which I'm 
<a href="/blog/d6plinks/SHWL-7WH84K">quite fond of</a>) has been rather glacial (unless 
<strike>
  Store form in document 
</strike> 
<a href="http://opensocial.org/">Embedded Experiences</a>, with their painful network dependency, are the next big thing). There areh a few pockets 
<a href="http://www.kickstarter.com/projects/1380180715/mail-pilot-email-reimagined">of hope</a>. 
<br /> 
<br />. 
<b>Kicking <a href="http://zenhabits.net/fitness-habit/">the habit</a> is what #SocBiz is all about</b> 
<span style="font-size : smaller">(yes - this is a gross simplification)</span> 
<br /> 
<br /> Of course all the software vendors, including my employer, the 
<a href="http://www-03.ibm.com/press/us/en/pressrelease/38066.wss">market leader in Social Software</a>, will help you there with 
<a href="http://store.nike.com/us/en_us/product/pro-combat-hypercool-fitted-sleeveless-crew-id-shirt/?piid=28521&amp;pbid=7574463#?pbid=7574463">apparel</a>, training 
<a href="http://www.youtube.com/user/serpent1ne?feature=watch">videos</a> and 
<a href="http://www.nutritionpark.com/">supplements</a>, where you might need is just some 
<a href="http://www.precisionnutrition.com/coaching">coaching</a>. 
<br /> Reflecting on past projects 
<a href="http://www.syccess.de/">back home</a>, I recalled one where we actually almost completely killed eMail off - more than a decade ago. The customer was a project driven organization (projects like: build a new quarters in this town, build the biggest, tallest...) The secret recipe was this: 
<br /> 
<img src="/blog/images/2013/SimpleWorkflowUI.png" alt="Everything is a workflow" border="0" /> 
<br /> Messages would come in from the outside, via SMTP, SMS, pager, paper or Fax. They ended in a central processing database where they were enriched with 
<a href="http://en.wikipedia.org/wiki/Meta_data">meta data</a> (manual in the beginning, with more and more automation / decision support later on) and assigned to a person to act on. Once a message was fed into the queue it would show up with the supplier, the project, the status, the document type. 
<br /> Instead of sending gazillions of useless CCs to &quot;keep people in the loop&quot;, users simply could watch any of the meta data of their choosing (and access rights of course). It would also allow to see if someone was swamped with 
<a href="http://www.merriam-webster.com/dictionary/actionable">actionables</a> and help him out. 
<br /> What was very interesting in the implementation project: We probably spend by a magnitude more time on defining the meta data structure and coaching adoption than on coding the tool. 
<br /> We also had an army of nay sayers: &quot; 
<i>doesn't fit, it's against the law, our organisation is different, people won't change</i>&quot; etc. - This is why we spend all the time in implementation coaching. It took a year to finish, but work satisfaction and productivity went up greatly. 
<br />And I couldn't agree more with Alan: 
<a href="http://www.alanlepofsky.net/alepofsky/alanblog.nsf/dx/social-business-2013-less-talking-more-doing">Less talking, more doing</a>. A case for 
<a href="/blog/d6plinks/SHWL-8BSKQT">GGTD</a>!</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-10 11:51
<span class="divider">|</span>
<a href="/blog/2013/01/how-we-successfully-killed-email-almost.html#comments">Comments (1)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/Business.html">Business</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/how-we-successfully-killed-email-almost.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="How we successfully killed eMail (almost)"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/how-we-successfully-killed-email-almost.html";
						</script>
					</p>

				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/explaining-web-enablement-challenges-to-business-users.html">Explaining web enablement challenges to business users</a></small>
					</h1>
					<hr />
					<div>With 
<a href="http://xpages.info/">XPages</a> Notes and Domino application can be the new sexy and run beautifully on all sorts of devices big and small. So a whole 
<a href="http://www.thefreedictionary.com/cottage+industry">cottage industry</a> (no insult intended) of offerings around 
<a href="https://www.google.com/search?q=domino+application+modernization">Domino Application Modernization</a> appeared. 
<br /> Modernization always also means: browser and mobile enablement. 
<br /> Expectations ran high, that a magic button would transform (pun intended) a code base organically grown over two decades into beautiful working responsive web 2.0 applications. But 
<a href="http://en.wikipedia.org/wiki/Garbage_in,_garbage_out">GIGO</a> stands firm and not all applications are created equal. Domino's (and LotusScript's) greatest strength, turned into a curse: being an incredible forgiving environment. Any clobbered together code would somehow still run and lots of applications truly deserve the label &quot; 
<i>contains Frankencode</i>&quot;. 
<br /> There is a lot of 
<a hre="http://en.wikipedia.org/wiki/Technical_debt">technical debt</a> than needs to be paid. 
<br /> The biggest obstacle I've come across is the wild mix of the front-end (a.k.a Notes client) and back-end (core database operations) in forms views and libraries. This problem never arises in the popular web environments, since there are different languages at the front and back at work (e.g. JavaScript/PHP, JavaScript/Ruby, JavaScript/Java) - only in very modern environments it is all JavaScript (the single language idea Notes sported 20 years ago). 
<br /> The first thing I taught every developer in LotusScript, is to keep front- and backend separate and keep the business logic in script libraries that only contain back-end classes. Developers who followed these guidelines have a comparable easy time to web enable application. 
<br /> But how to explain this problem to a business user (who probably saw some advertisement about automatic conversion to web, be it on IBM technology or a competitor)? 
<br /> Tell them a story (if they are not interested at listening at any of that, there's a 
<a href="http://www.monster.com">solution too</a>)! 
<br /> 
<b>Here we go</b>: 
<br /> You are supply specialist for natural resources exploration company and your current assignment is to get your geo engineers set up in a remote jungle location. So you have to source vehicles, build roads and establish a supply chain. Probably you get a bunch of 
<a href="http://www.unimog.net/">those</a> (a living legent since 
<a href="http://www.youtube.com/watch?v=CxdX0au-BNA">1948</a>), stock spare parts and ensure that you have diesel stations along the way. 
<br /> Everything is fine - the road might be 
<a href="http://www.benzworld.org/forums/attachments/unimog/211165d1229708548-post-your-favorite-mog-mud-shots-picture-110.jpg">a little patchy</a> here 
<a href="http://littlepixel.info/wordpress/wp-content/uploads/2008/02/unimog.jpg">and there</a>, but that's not a problem, you get you guys delivered and working. You even 
<a href="http://www.globalxvehicles.com/wp-content/uploads/2009/08/Unimog-Camper7.jpg">look good</a> (sometimes). 
<br /> This are your Notes client applications, delivering business value, robust, efficient and can deal with a lot of road deficiency (that would be code quality). 
<br /> Your remote location becomes successful and suddenly the requirements change. People want to get there 
<a href="http://www.porsche.com/usa/models/cayenne/cayenne-diesel/">in style</a> (Browsers). Your gas stations will do, no problem here, but already the roads need to be a 
<a href="https://www1.pec.porsche.com/filestore.aspx/normal.jpg?pool=silverstone&amp;type=article&amp;id=sst_pde_cayenne_on_offroad&amp;lang=en&amp;filetype=normal&amp;version=15c7279b-593f-4bf2-b6a0-1455016bc4a5">little less patchy</a> and your stock of spare parts and the mechanics trained on them are useless. That would be your front-end classes and the &quot;mix-them-all-up&quot; coding style that worked in the past. 
<br /> If the &quot;arrive-in-style&quot; meme 
<a href="http://www.porsche.com/usa/models/911/911-carrera-4s/gallery/">escalates further</a> (mobile devices) you need to build flawless roads (unless your oil has been found in 
<a href="http://en.wikipedia.org/wiki/Dallas_%282012_TV_series%29">Dallas</a> where proper roads supposedly exist). 
<br /> An experienced supply planner might anticipate what is coming and while sending in the Unimogs already prepare the gravel foundation, so paving of the road for the 
<a href="http://www.teslamotors.com/roadster">fragile cars</a> is just a small step. Or nothing has been done for a while and the 
<strike>
  health 
</strike>road check comes back with a huge bill of material. 
<br /> You get the gist, now go and tell your own story.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-04 11:33
<span class="divider">|</span>
<a href="/blog/2013/01/explaining-web-enablement-challenges-to-business-users.html#comments">Comments (3)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/Show-N-Tell Thursday.html">Show-N-Tell Thursday</a>  <a href="/blog/categories/XPages.html">XPages</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/explaining-web-enablement-challenges-to-business-users.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Explaining web enablement challenges to business users"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/explaining-web-enablement-challenges-to-business-users.html";
						</script>
					</p>

				</article>
				<article class="well well-raised">
					<h1>
						<small><a href="/blog/2013/01/what-to-do-with-save-replication-conflicts.html">What to do with Save &amp;amp; Replication conflicts</a></small>
					</h1>
					<hr />
					<div>When customers start developing new Domino applications, the distributed nature of Domino can pose a stumbling block. Suddenly the unheard of 
<i>replication conflict</i> crops up and wants to be dealt with. A customer recently asked: 
<br /> &quot; 
<i>I need to check with you about the Conflict Handling in Lotus Notes application. Default I will set the Conflict Handling to Create Conflicts, but I found my application have create more and more replication or save conflict documents. What can I do for all these replication or save conflict documents, and I found some information in conflict documents is not in original document? How can I prevent the system to generate conflict document?</i>&quot; 
<br /> 
<img src="http://www.wissel.net/blog/Images/SHWL-93KFL9/$File/replicationconflict.jpg" border="0" alt="Replication Conflict Handling" /> 
<br /> Before going into details, lets have a closer look how Notes handles its data. There's quite some hierarchy involved: 
<ol> 
 <li>to replicate two databases need to have the same replica id. The replica id is created when a database is created and only can be changed using the C API (or <a href="http://www.openntf.org/p/Surely Template">a wrapper</a> around it). When a NSF is copied on the file system, you actually create a replica (but you <a href="/blog/d6plinks/SHWL-8MZDTB">wouldn't do that</a>, would you?</li> 
 <li>Inside a database 2 documents need to have the same document unique id (<a href="http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_DOCUMENTUNIQUEID.html">UNID</a>), which is created from a time stamp at document creation time. The UNID is actually read/write in LotusScript and Java and a <a href="http://planetlotus.org/profiles/nathan-t-freeman">certain gentleman</a> can teach you about creative 
  <strike>
    ab 
  </strike>use of this capability. In addition in the document properties a sequence number is stored that gets incremented when a document is changed. Together with the last modification date this forms the <a href="http://en.wikipedia.org/wiki/IBM_Lotus_Notes#Data_replication">patented</a> Notes replication.</li> 
 <li>Inside the document the Notes items are stored. This are not just field values in a schema (like in an RDBMS) but little treasure troves of information. An item has a name, an array of values, a data type, an actual length and a <b>sequence number</b>. Notes can (and does) use this sequence number to see what items have been altered (note the difference: a form contains fields, a document contains items)</li> 
</ol> So how do the form options behave for conflicts (which are stored as $ConflictAction item in the document)? First Notes determines a &quot;winner&quot; and a &quot;loser&quot; document. The winner is the 
<a href="http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/rep_save_conflicts_t.html">most edited document</a>. If there same amount of edits, only then the document saved last wins (savour this: an older document still can be a winner). Once the winner is determined, the conflict resolution is executed: 
<ul> 
 <li><b>Create conflicts</b> (no $ConflictAction item)<br /> The &quot;loser&quot; document is converted into a response document of the winner document and an item $Conflict is created. The conflicts are shown in in views unless excluded by view selection formula (<code>&amp; !@isAvailable($Conflict)</code>). Conflict resolution is manual (an agent you write is considered manual too) </li> 
 <li><b>Merge conflicts</b> ($ConflictAction = &quot;1&quot;)<br /> If a document has been edited concurrently but different field have been altered, then they are merged into the one document and no conflict is created. If the same fields are altered a conflict is still generated.<br /> Sounds good? In practise I often see this fail, when true distributed edits by users are the conflict cause, since applications habitually contain a field &quot;LastEditedBy&quot; with @UserName as formula - a lesson to be learned when designing distributed apps: update only what is really necessary</li> 
 <li><b>Merge/No Conflicts</b> ($ConflictAction = &quot;3&quot;)<br /> Same as above: if different fields have been altered, then they are merged. If the same fields were altered the loser document is silently discarded. One could argue: why not merge at least the different fields. But that would create rather a data mess</li> 
 <li><b>No Conflicts</b> ($ConflictAction = &quot;2&quot;)<br /> The radical solution: the winner takes it all, the loser disappears and nobody will ever know. I haven't seen a good use case for that, but the world is big</li> 
</ul> So what to do about them? First you need to have clarity: They are called &quot;Replication and 
<b>Save</b>&quot; conflicts. So they can also happen on the same server. Some pointers how to prevent them: 
<ul> 
 <li>Using <a href="http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.notes.help.doc/DOC/H_LOCKING_YOUR_DOCUMENTS_OVER.html">document locking</a> prevents them when edits happen on the same server</li> 
 <li>Also make sure, that you scheduled agent don't run on <a href="http://www-10.lotus.com/ldd/dominowiki.nsf/dx/02172008091426PMWEB4N3.htm">two servers concurrently</a></li> 
 <li>A nice rookie mistake is to use <code>NotesDocument.save(...)</code> in a querySave (or postSave without closing the form) event - Domino will (or has) saved the document, get out of its way</li> 
 <li>Recheck your application flow: Can you limit the current allowed editor using <a href="/blog/d6plinks/SHWL-89PMVR">Author</a> fields/items? Quite often removing access in querySave combined with an agent altering access &quot;on documents changed&quot; makes a lot of sense</li> 
 <li>Check your forms: are there fields that are &quot;computed&quot; and changed by agents? You could/should set them to &quot;computed when composed&quot;</li> 
 <li>Avoid <code>NotesDocument.computeWithForm(..)</code> in agents unless you are sure it isn't the source of your conflict</li> 
 <li>If your business logic mandates that you have multiple concurrent edits, consider to implement the <a href="/blog/d6plinks/shwl-78e34m">inversion of logging</a> pattern (with XPages you can make that real snappy)</li> 
 <li>last not least: replicate more often or consider to cluster your servers</li> 
</ul> As usual YMMV</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-01-02 07:28
<span class="divider">|</span>
<a href="/blog/2013/01/what-to-do-with-save-replication-conflicts.html#comments">Comments (6)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/Show-N-Tell Thursday.html">Show-N-Tell Thursday</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2013/01/what-to-do-with-save-replication-conflicts.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="What to do with Save &amp;amp; Replication conflicts"></div>
						<script type="text/javascript">
							var permaLink = "https://www.notessensei.com/blog/2013/01/what-to-do-with-save-replication-conflicts.html";
						</script>
					</p>

				</article>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/index.html"><i class="icon-hand-left"></i>Year 2013</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/02/index.html">By Date: February 2013<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>

			<div class="span3">
				<aside id="sidebar_reference" class="well">
					<h5>Reference</h5>
					<ol style="list-style-type: upper-roman; padding-left: 30px;">
						<li><a style="display: inline;"
							href="/blog/2013/12/domino-development-back-to-basics-overview.html" title="Read this if you are new to IBM Notes and want to know what there is to know">Notes &amp; Domino Development - the Basics</a></li>
						<li><a style="display: inline;"
							href="/blog/2012/01/learning-xpages.html" title="XPages">Learn
								XPages</a></li>
						<li><a style="display: inline;"
							href="/blog/2010/12/notes-/-domino-upgrade-cheat-sheet.html">Upgrade
								cheat sheet</a></li>
						<li><a style="display: inline;"
							href="/blog/2012/06/how-does-an-ideal-notes-client-deployment-look-like.html">How
								does an ideal Notes Client deployment look like</a></li>
						<li><a style="display: inline;"
							href="/blog/2010/04/communicating-with-ibmers-and-lotus-professionals-using-sametime.html"
							title="Chat with IBMers using Sametime">Chat with IBMers and Lotus
								Experts using Sametime</a></li>
						<li><a style="display: inline;"
							href="/blog/2012/04/extracting-data-from-domino-into-pdf-using-xslt-and-xslfo-part-1.html">Use
								XSL:FO in Domino</a></li>
						<li><a target="_blank" href="//www.amazon.com/mn/search/?_encoding=UTF8&tag=wisselnetblog-20&linkCode=ur2&camp=1789&creative=390957&field-keywords=XPages&url=search-alias%3Daps">XPages
								books on Amazon</a><img
							src="https://www.assoc-amazon.com/e/ir?t=wisselnetblog-20&l=ur2&o=1"
							width="1" height="1" border="0" alt=""
							style="border: none !important; margin: 0px !important;" /></li>
					</ol>
				</aside>

				<aside id="sidebar_categoriesArchive" class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Categories</li>
						<li ><a href="/blog/categories/After hours.html">after hours</a></li>
						<li ><a href="/blog/categories/angular.js.html">angular.js</a></li>
						<li ><a href="/blog/categories/Apache.html">apache</a></li>
						<li ><a href="/blog/categories/Blog.html">blog</a></li>
						<li ><a href="/blog/categories/Bluemix.html">bluemix</a></li>
						<li ><a href="/blog/categories/Buddhakids.html">buddhakids</a></li>
						<li ><a href="/blog/categories/Business.html">business</a></li>
						<li ><a href="/blog/categories/Buying Broadband.html">buying broadband</a></li>
						<li ><a href="/blog/categories/Cloud Computing.html">cloud computing</a></li>
						<li ><a href="/blog/categories/Continuous integration.html">continuous integration</a></li>
						<li ><a href="/blog/categories/CouchDB.html">couchdb</a></li>
						<li ><a href="/blog/categories/Coursera.html">coursera</a></li>
						<li ><a href="/blog/categories/Cycling.html">cycling</a></li>
						<li ><a href="/blog/categories/DXLMagic.html">dxlmagic</a></li>
						<li ><a href="/blog/categories/eLearning.html">elearning</a></li>
						<li ><a href="/blog/categories/eMailComparison.html">emailcomparison</a></li>
						<li ><a href="/blog/categories/Gone Phisching.html">gone phisching</a></li>
						<li ><a href="/blog/categories/GTD.html">gtd</a></li>
						<li ><a href="/blog/categories/IBM.html">ibm</a></li>
						<li ><a href="/blog/categories/IBM - Lotus.html">ibm - lotus</a></li>
						<li ><a href="/blog/categories/IBM Connections.html">ibm connections</a></li>
						<li ><a href="/blog/categories/IBM Notes.html">ibm notes</a></li>
						<li ><a href="/blog/categories/Intercultural.html">intercultural</a></li>
						<li ><a href="/blog/categories/Java.html">java</a></li>
						<li ><a href="/blog/categories/JavaScript.html">javascript</a></li>
						<li ><a href="/blog/categories/Learning.html">learning</a></li>
						<li ><a href="/blog/categories/Learningbox.html">learningbox</a></li>
						<li ><a href="/blog/categories/Linux.html">linux</a></li>
						<li ><a href="/blog/categories/Lotus.html">lotus</a></li>
						<li ><a href="/blog/categories/Lotus Connections.html">lotus connections</a></li>
						<li ><a href="/blog/categories/Lotus Notes.html">lotus notes</a></li>
						<li ><a href="/blog/categories/Lotus Quickr.html">lotus quickr</a></li>
						<li ><a href="/blog/categories/LotusLive.html">lotuslive</a></li>
						<li ><a href="/blog/categories/Lotusphere2006.html">lotusphere2006</a></li>
						<li ><a href="/blog/categories/Lotusphere2007.html">lotusphere2007</a></li>
						<li ><a href="/blog/categories/Lotusphere2008.html">lotusphere2008</a></li>
						<li ><a href="/blog/categories/Lotusphere2009.html">lotusphere2009</a></li>
						<li ><a href="/blog/categories/Lotusphere2010.html">lotusphere2010</a></li>
						<li ><a href="/blog/categories/Lotusphere2011.html">lotusphere2011</a></li>
						<li ><a href="/blog/categories/Lotusphere2012.html">lotusphere2012</a></li>
						<li ><a href="/blog/categories/Mac.html">mac</a></li>
						<li ><a href="/blog/categories/Mobile.html">mobile</a></li>
						<li ><a href="/blog/categories/nginx.html">nginx</a></li>
						<li ><a href="/blog/categories/NodeJS.html">nodejs</a></li>
						<li ><a href="/blog/categories/NodeRED.html">nodered</a></li>
						<li ><a href="/blog/categories/Nokia.html">nokia</a></li>
						<li ><a href="/blog/categories/Omnisophie.html">omnisophie</a></li>
						<li ><a href="/blog/categories/OpenSource.html">opensource</a></li>
						<li ><a href="/blog/categories/Prototyping.html">prototyping</a></li>
						<li ><a href="/blog/categories/Rotary.html">rotary</a></li>
						<li ><a href="/blog/categories/Salesforce.html">salesforce</a></li>
						<li ><a href="/blog/categories/Sametime.html">sametime</a></li>
						<li ><a href="/blog/categories/Show-N-Tell Thursday.html">show-n-tell thursday</a></li>
						<li ><a href="/blog/categories/Singapore.html">singapore</a></li>
						<li ><a href="/blog/categories/SocialBusiness.html">socialbusiness</a></li>
						<li ><a href="/blog/categories/Software.html">software</a></li>
						<li ><a href="/blog/categories/SYWTBADD.html">sywtbadd</a></li>
						<li ><a href="/blog/categories/Technology.html">technology</a></li>
						<li ><a href="/blog/categories/Thoughts.html">thoughts</a></li>
						<li ><a href="/blog/categories/Travel.html">travel</a></li>
						<li ><a href="/blog/categories/Twins.html">twins</a></li>
						<li ><a href="/blog/categories/UMsys.html">umsys</a></li>
						<li ><a href="/blog/categories/vert.x.html">vert.x</a></li>
						<li ><a href="/blog/categories/WebDevelopment.html">webdevelopment</a></li>
						<li ><a href="/blog/categories/Workflow.html">workflow</a></li>
						<li ><a href="/blog/categories/Writing Chinese.html">writing chinese</a></li>
						<li ><a href="/blog/categories/XPages.html">xpages</a></li>
						<li class="nav-header">Archives</li>
						<li ><a href="/blog/2003">2003</a></li>
						<li ><a href="/blog/2004">2004</a></li>
						<li ><a href="/blog/2005">2005</a></li>
						<li ><a href="/blog/2006">2006</a></li>
						<li ><a href="/blog/2007">2007</a></li>
						<li ><a href="/blog/2008">2008</a></li>
						<li ><a href="/blog/2009">2009</a></li>
						<li ><a href="/blog/2010">2010</a></li>
						<li ><a href="/blog/2011">2011</a></li>
						<li ><a href="/blog/2012">2012</a></li>
						<li ><a href="/blog/2013">2013</a></li>
						<li ><a href="/blog/2014">2014</a></li>
						<li ><a href="/blog/2015">2015</a></li>
						<li ><a href="/blog/2016">2016</a></li>
						<li ><a href="/blog/2017">2017</a></li>
						<li ><a href="/blog/all.html" title="That's a long list!">Complete archive</a></li>
					</ul>
				</aside>

				<aside id="sidebar_visitors" class="well">
					<h5>Visitors</h5>
<script type="text/javascript" id="clstr_globe" src="//cdn.clustrmaps.com/globe.js?d=dyaFRPfPewNw_y5-9frkSPIp1gvX8qjkkF-LpRyuvQs"></script>
				</aside>

			</div>
		</div>
	</div>
	<!-- Footer	================================================== -->
		<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I'm working as "Cloud Program Architect" for Salesforce. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://plus.google.com/+StephanWissel/about" rel="author" style="text-decoration: none;">
						    <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" alt="" style="border: 0; width: 16px; height: 16px;" /> Google+</a></li>
						<li><a href="skype//:notessensei?chat">Skype</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2017 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

		<script type="text/javascript" src="/blog/js/jquery.min.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/main.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>
    <script type="text/javascript">
    $(document).ready(function() {
            SyntaxHighlighter.all();
    });
    </script>

</body>
</html>
