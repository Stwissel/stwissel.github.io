<!DOCTYPE html>
<html lang="en">
<head>
<title>NotesSensei's Blog - NotesSessions, XPages and Threads</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
<meta name="ROBOTS" content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title" content="NotesSensei's Weblog - NotesSessions, XPages and Threads" />
<meta name="Author" content="Stephan H. Wissel" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,notes,r6,r5,raven,k-station,nsf,ntf,websphere,agile,sdlc,j2ee,.net,personcentric,singapore,twins" />
<meta name="Abstract"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: IBM Lotus Notes and Domino, IBM Websphere, other IBM Lotus stuff,  J2EE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="ICBM" content="1.2994, 103.8425" />
<meta name="Copyright"
	content="2013,2015 Stephan H. Wissel - Creative commons licence" />
<meta HTTP-EQUIV="Content-Language" content="en" />
<meta property="fb:admins" content="567103136" />
<meta property="fb:app_id" content="219323514774289">
<meta property="og:title"
	content="wissel.net - NotesSessions, XPages and Threads" />
<meta property="og:type" content="blog" />
<meta property="og:url" content="http://www.wissel.net/blog" />
<meta property="og:image"
	content="http://www.wissel.net/blog/skin/OrangeKeys.css/$File/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<meta name="twitter:site" content="@notessensei" />
<meta name="twitter:card" content="summary" />
<meta name="xing:author"
	content="https://www.xing.com/profile/StephanH_Wissel" />

<link rel="stylesheet" type="text/css" href="/blog/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/shariff.complete.css" />
<!-- link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' / -->
<link href='http://fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />


<link rel="stylesheet" href="/blog/css/markdown.css" />
<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="http://feeds.feedburner.com/Wisselnet" />
<link rel="alternate" type="application/rss+xml" title="RSS Comments Feed" href="http://feeds.feedburner.com/Wisselnet-Comments" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="/blog/categories/Cycling.html">Cycling</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="http://www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>


	<div class="container">

    		<!-- Masthead
		================================================== -->
		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

    <!--[if lt IE 10]>
  <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
    <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
    <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
      <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
      <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
        <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
        <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
      </div>
      <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox'/></a></div>
      <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 11'/></a></div>
      <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari'/></a></div>
      <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
    </div>
  </div>
<![endif]-->

    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/">2013</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/07/">July</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/XPages.html">XPages</a>
  </li>
</ul>


		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/07/xpinc-development-insights.html"><i class="icon-hand-left"></i>XPiNC development insights</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/07/protecting-your-xpages-application.html">Protecting your XPages Application<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1>
						<small>NotesSessions, XPages and Threads</small>
					</h1>
					<hr />
					<div>When you build an XPages application, long running operations will time out. After all there is a timing limit how long a browser (or XPiNC) client (and the user) will wait for a response. You could resort to launching an agent via a console command, but besides the security consideration it is quite a hack and headache. Mixing XPages and agents doesn't have a happy ending (and should be confined to the upgrading phase of your classic application). 
<br /> Enter 
<a href="http://www.vogella.com/articles/JavaConcurrency/article.html">Java multi-threading</a>. I call it &quot; 
<i>Teenage-mode</i>&quot;: your code does multiple things at the same time and doesn't seem to get distracted. 
<br /> When you read 
<a href="http://www.mindview.net/Books/TIJ/">the classics</a> you will find threading hard and rather threatening (pun intended), but thanks to progress in Java6 and above it isn't too hard. 
<br /> There is the 
<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executor.html">Executor</a> framework that handles all your 
<code>Runnables</code>. There are 2 challenges to overcome: one specific to Notes and one general to all concurrency programming. The former: The Notes 
<code>Session</code> class is not threadsave and can't be shared between threads, the later: you have to get your queueing right: 
<br /> 
<a href="http://chewonitcomics.blogspot.sg/2009/02/you-foreigner.html" title="Queuing is a challenge in Singapore"><img src="http://i485.photobucket.com/albums/rr219/chewonitcomics/myopic_mrt.jpg" border="0" /></a> 
<br /> (Image courtesy of 
<a href="http://chewonitcomics.blogspot.sg/">Lee Chee Chew</a>) 
<br /> To get a new 
<code>Session</code> object, we have the session cloner, thanks to the extension library. All your threads implement the 
<code>Runnable</code> interface that is later called by the executor framework. There are 2 approaches for background task: one where you expect the thread to return some value at some time and the other where a thread runs its course and terminates silently when done. For a 
<a href="/blog/d6plinks/SHWL-99RAG7">current project</a> I opted for the later. The threads contain a callback class where they report back what they have to say. To make it all work we need: 
<ol> 
 <li>A management class that executes the threads for us. Preferably long living (like session or application beans)</li> 
 <li>A cloned Notes Session</li> 
 <li>One or more classes implementing the runnable interface</li> 
</ol> Let's look at some code, first the class that runs in the background: 
<div class="java5"> 
 <span class="kw2">package</span> 
 <span class="co2">com.notessensei.demo</span> 
 <span class="sy0">;</span> 
 <br /> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">java.util.Collection</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">java.util.Map</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">lotus.domino.Database</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">lotus.domino.NotesException</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">lotus.domino.Session</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">com.ibm.domino.xsp.module.nsf.NSFComponentModule</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">com.ibm.domino.xsp.module.nsf.NotesContext</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">com.ibm.domino.xsp.module.nsf.SessionCloner</span> 
 <span class="sy0">;</span> 
 <br /> 
 <br /> 
 <span class="kw2">public abstract class</span> AbstractNotesBackgroundTask 
 <span class="kw2">implements</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Runnable.html"><span class="kw21">Runnable</span></a> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">protected</span> 
 <span class="kw2">final</span> Session &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; notesSession 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">protected</span> 
 <span class="kw2">final</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Collection.html"><span class="kw46">Collection</span></a> 
 <span class="sy0">&lt;</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> 
 <span class="sy0">&gt;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; callBackMessages 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">private</span> SessionCloner &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sessionCloner 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">private</span> NSFComponentModule&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; module 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">public</span> AbstractNotesBackgroundTask 
 <span class="br0">(</span> 
 <span class="kw2">final</span> Session optionalSession, 
 <span class="kw2">final</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/Collection.html"><span class="kw46">Collection</span></a> 
 <span class="sy0">&lt;</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> 
 <span class="sy0">&gt;</span> messageHandler 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">callBackMessages</span> = messageHandler 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="co1">// optionalSession MUST be NULL when this should run in a thread, contain a session when</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="co1">// the class is running in the same thread as it was constructed</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">notesSession</span> = optionalSession 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">setDominoContextCloner</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">public</span> 
 <span class="kw3">void</span> run 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">callBackMessages</span>. 
 <span class="me1">add</span> 
 <span class="br0">(</span> 
 <span class="st0">&quot;Background task run starting: &quot;</span> + 
 <span class="kw2">this</span>. 
 <span class="me1">getClass</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span>. 
 <span class="me1">toString</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">try</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Session session 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw1">if</span> 
 <span class="br0">(</span> 
 <span class="kw2">this</span>. 
 <span class="me1">notesSession</span> == 
 <span class="kw4">null</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NotesContext context = 
 <span class="kw2">new</span> NotesContext 
 <span class="br0">(</span> 
 <span class="kw2">this</span>. 
 <span class="me1">module</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NotesContext. 
 <span class="me1">initThread</span> 
 <span class="br0">(</span>context 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; session = 
 <span class="kw2">this</span>. 
 <span class="me1">sessionCloner</span>. 
 <span class="me1">getSession</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <span class="kw1">else</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="co1">// We run in an established session</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; session = 
 <span class="kw2">this</span>. 
 <span class="me1">notesSession</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="coMULTI">/* Do the work here */</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">runNotes</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <span class="kw2">catch</span> 
 <span class="br0">(</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Throwable.html"><span class="kw21">Throwable</span></a> e 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e. 
 <span class="me1">printStacktrace</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <span class="kw2">finally</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw1">if</span> 
 <span class="br0">(</span> 
 <span class="kw2">this</span>. 
 <span class="me1">notesSession</span> == 
 <span class="kw4">null</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NotesContext. 
 <span class="me1">termThread</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">try</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">sessionCloner</span>. 
 <span class="me1">recycle</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <span class="kw2">catch</span> 
 <span class="br0">(</span>NotesException e1 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e1. 
 <span class="me1">printStacktrace</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">callBackMessages</span>. 
 <span class="me1">add</span> 
 <span class="br0">(</span> 
 <span class="st0">&quot;Background task run completed: &quot;</span> + 
 <span class="kw2">this</span>. 
 <span class="me1">getClass</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span>. 
 <span class="me1">toString</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">private</span> 
 <span class="kw3">void</span> setDominoContextCloner 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="co1">// Domino stuff to be able to get a cloned session</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw1">if</span> 
 <span class="br0">(</span> 
 <span class="kw2">this</span>. 
 <span class="me1">notesSession</span> == 
 <span class="kw4">null</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">try</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">module</span> = NotesContext. 
 <span class="me1">getCurrent</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span>. 
 <span class="me1">getModule</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">sessionCloner</span> = SessionCloner. 
 <span class="me1">getSessionCloner</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <span class="kw2">catch</span> 
 <span class="br0">(</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Exception.html"><span class="kw21">Exception</span></a> e 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e. 
 <span class="me1">printStacktrace</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">protected</span> 
 <span class="kw2">abstract</span> 
 <span class="kw3">void</span> runNotes 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="br0">}</span> 
</div> You only need to subclass it and implement 
<code>runNotes()</code> to get started. However you probably want to hand over more parameters, so you need to modify the constructor accordingly. Please note: you can't bring Notes objects across thread boundaries. Next the class that controls all the threads. It should live in the session or application.The class is actually quite simple: 
<div class="java5"> 
 <span class="kw2">package</span> 
 <span class="co2">com.notessensei.demo</span> 
 <span class="sy0">;</span> 
 <br /> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">java.io.Serializable</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">java.util.concurrent.ExecutorService</span> 
 <span class="sy0">;</span> 
 <br /> 
 <span class="kw2">import</span> 
 <span class="co2">java.util.concurrent.Executors</span> 
 <span class="sy0">;</span> 
 <br /> 
 <br /> 
 <span class="kw2">public</span> 
 <span class="kw2">class</span> NotesBackgroundManager 
 <span class="kw2">implements</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/io/Serializable.html"><span class="kw20">Serializable</span></a> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">private</span> 
 <span class="kw2">static</span> 
 <span class="kw2">final</span> 
 <span class="kw3">long</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; serialVersionUID&nbsp; &nbsp; &nbsp; &nbsp; = 1L 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="co1">// # of threads running concurrently</span> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">private</span> 
 <span class="kw2">static</span> 
 <span class="kw2">final</span> 
 <span class="kw3">int</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; THREADPOOLSIZE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
 <span class="nu0">10</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">private</span> 
 <span class="kw2">final</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/concurrent/ExecutorService.html"><span class="kw47">ExecutorService</span></a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; service &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/util/concurrent/Executors.html"><span class="kw47">Executors</span></a>. 
 <span class="me1">newFixedThreadPool</span> 
 <span class="br0">(</span>THREADPOOLSIZE 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">public</span> CSIApplication 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="co1">// For use in managed beans</span> 
 <br /> &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">public</span> 
 <span class="kw3">void</span> submitService 
 <span class="br0">(</span> 
 <span class="kw2">final</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Runnable.html"><span class="kw21">Runnable</span></a> taskDef 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw1">if</span> 
 <span class="br0">(</span>taskDef == 
 <span class="kw4">null</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/System.html"><span class="kw21">System</span></a>. 
 <span class="me1">err</span>. 
 <span class="me1">println</span> 
 <span class="br0">(</span> 
 <span class="st0">&quot;submitService: NULL callable submitted to submitService&quot;</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">return</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="co1">// Execute runs without return</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">service</span>. 
 <span class="me1">execute</span> 
 <span class="br0">(</span>taskDef 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> 
 <br /> &nbsp; &nbsp; @ 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Override.html"><span class="kw21">Override</span></a> 
 <br /> &nbsp; &nbsp; 
 <span class="kw2">protected</span> 
 <span class="kw3">void</span> finalize 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="kw2">throws</span> 
 <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/Throwable.html"><span class="kw21">Throwable</span></a> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw1">if</span> 
 <span class="br0">(</span> 
 <span class="br0">(</span> 
 <span class="kw2">this</span>. 
 <span class="me1">service</span> 
 <span class="sy0">!</span>= 
 <span class="kw4">null</span> 
 <span class="br0">)</span> 
 <span class="sy0">&amp;&amp;</span> 
 <span class="sy0">!</span> 
 <span class="kw2">this</span>. 
 <span class="me1">service</span>. 
 <span class="me1">isTerminated</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="br0">)</span> 
 <span class="br0">{</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">this</span>. 
 <span class="me1">service</span>. 
 <span class="me1">shutdown</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> &nbsp; &nbsp; &nbsp; &nbsp; 
 <span class="kw2">super</span>. 
 <span class="me1">finalize</span> 
 <span class="br0">(</span> 
 <span class="br0">)</span> 
 <span class="sy0">;</span> 
 <br /> &nbsp; &nbsp; 
 <span class="br0">}</span> 
 <br /> 
 <span class="br0">}</span> 
</div> If you rather want the thread returning something at the end of the run (which you must poll from the 
<a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html">ExecutorService</a>, you would call 
<a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)">ExecutorService.submit</a> and get back a 
<a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html ">Future</a> holding the future result, but that's another story for another time. 
<br /> The final missing piece is to define 
<code>NotesBackgroundManager</code> as 
<a href="https://www.google.com/search?q=XPages+managed+beans">managed bean</a> e.g. 
<code>background</code> and you can launch a background task in SSJS: 
<code>background.submitService(new com.notessensei.demo.SampleNotesBackgroundTask());</code> 
<br /> As usual YMMV.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2013-07-23 11:29
<span class="divider">|</span>
<a href="/blog/2013/07/notessessions-xpages-and-threads.html#comments">Comments (7)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/XPages.html">XPages</a> 

						<div class="shariff" data-lang="en" data-url="http://www.notessensei.com/blog/2013/07/notessessions-xpages-and-threads.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="NotesSessions, XPages and Threads"></div>
						<script type="text/javascript">
							var permaLink = "http://www.notessensei.com/blog/2013/07/notessessions-xpages-and-threads.html";
						</script>
					</p>

				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_4F2FF7AFE405DE0E48257BB0001324B6" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_4F2FF7AFE405DE0E48257BB0001324B6"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
<img src="http://www.gravatar.com/avatar/d624e774e5f1cb9d58b25ba7610ba4f7.jpg?s=88" class="gravatarimg" />
							posted by <b>Nathan T. Freeman</b> on <i>Tuesday 23 July 2013 AD - 21:11 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  Wonderful article. Concurrency is something that Domino developers really should learn more about. 
  <br /> 
  <br />&quot;...The Notes Session class is not threadsave(sic) and can't be shared between threads...&quot; 
  <br /> 
  <br />We're all friends here, so I'm going to be a little pedantic, because I used to think this too. 
  <br /> 
  <br />It's not that you can't share a Session (or a Database or a Collection or whatever) between threads; it's that Domino objects *must* be recycled on the same thread in which they were established. So if you have Thread 1, and you have a Session and a Database that you then give to Thread 2, which creates Views, DocumentCollections, Documents and Items from there, all those View, DCs, Docs and Items must be recycled on Thread 2, but the Database and the Session MUST NOT be recycled on Thread 2. They can only be recycled on Thread 1 and obviously only after Thread 2 finishes its work. (Technically you *can* recycle on a different thread, if you don't mind the side-effect of crashing your client or server.) 
  <br /> 
  <br />What deepens the challenge still further is the following: Let's say you have Thread 1 with a Session, and you create Threads 2 and 3 with the same Session. Thread 2 gets a handle on foo.nsf and begins some processing. Thread 3 is processing something else, but also needs a handle on foo.nsf a few milliseconds later. Now you have a problem -- 2 and 3, because they share a Session, actually get the same handle on foo.nsf. But you don't really have any way of knowing that. 
  <br /> 
  <br />Recycle in 3, and you crash. Recycle in 2, and if 3 is still working, it gets the dreaded &quot;Object has been removed or recycled&quot; error. 
  <br /> 
  <br />You can try to keep track of who got what objects first, and who else accessed them and whether they still need them. And then you can .join all your Threads so they don't release any concurrently accessed objects until everyone else is finished with them. But you have to do all this with a lot of synchronized Maps and it's a serious performance killer. At some point, you ask yourself: why am I bothering with multiple threads when I have to synchronize everything that's happening anyway? 
  <br /> 
  <br />Or at least, that's what I did when trying to solve the problem for the OpenNTF Domino API. Once I got a mostly workable solution done, I ran some benchmarks, found that it was about 8 times slower, and said &quot;this is dumb. Just don't share Sessions between threads.&quot;
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="http://www.gravatar.com/avatar/8b244c19421b34079796e5e64fc8ff75.jpg?s=88" class="gravatarimg" />
							posted by <b>Stephan Wissel</b> on <i>Tuesday 12 November 2013 AD - 03:08 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  To keep my simple mind from blowing up, I invented the simple rule: if you make them, you dispose them. So if a method defines a NotesObject that object must be removed in the same method. Works most of the time. 
  <img alt="Emoticon" src="&lt;img border=&quot;0&quot; src=&quot;/blog/images/emoticons/biggrin.gif&quot; /&gt;" /> stw
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="http://www.gravatar.com/avatar/f66ab73b87b16a8c7b78cdd9efaeb3f3.jpg?s=88" class="gravatarimg" />
							posted by <b>Greg</b> on <i>Friday 29 November 2013 AD - 18:31 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  Thanks a lot for this article, it is something that I sorely need! (I don't like making a user wait while the application goes off on its own little tangent (task). 
  <br /> 
  <br />I was playing around with this because I want to create multiple documents while dynamically calculating and fetching configuration documents from other databases etc. And I keep getting the following error in the server log: 
  <br /> 
  <br />29.11.2013 11:14:17 HTTP JVM: Exception in thread &quot;pool-4-thread-1&quot; 
  <br />29.11.2013 11:14:17 HTTP JVM: java.lang.IllegalStateException: NotesContext not initialized for the thread 
  <br />29.11.2013 11:14:17 HTTP JVM: at com.ibm.domino.xsp.module.nsf.NotesContext.getCurrent(NotesContext.java:123) 
  <br />29.11.2013 11:14:17 HTTP JVM: at com.ibm.domino.xsp.module.nsf.ModuleClassLoader$DynamicClassLoader.loadClass(ModuleClassLoader.java:383) 
  <br />29.11.2013 11:14:17 HTTP JVM: at java.lang.ClassLoader.loadClass(ClassLoader.java:638) 
  <br />29.11.2013 11:14:17 HTTP JVM: at de.holistic.utils.multithreading.AbstractBackgroundTask.run(AbstractBackgroundTask.java:29) 
  <br />29.11.2013 11:14:17 HTTP JVM: at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:906) 
  <br />29.11.2013 11:14:17 HTTP JVM: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:929) 
  <br />29.11.2013 11:14:17 HTTP JVM: at java.lang.Thread.run(Thread.java:738) 
  <br /> 
  <br />(sorry if that is a bit difficult to work with) 
  <br /> 
  <br />I am using Domino 901, Notes 900, and the latest 900 ExtLibs. Do you have any idea why I might be getting the IllegalStateException / NotesContext not initialized for the thread message? I am guessing that my first step should be to get my versions consistent with each other and try again, but I wanted to ask for your input as well.
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="http://www.gravatar.com/avatar/f66ab73b87b16a8c7b78cdd9efaeb3f3.jpg?s=88" class="gravatarimg" />
							posted by <b>Greg</b> on <i>Friday 29 November 2013 AD - 23:31 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  to make it easier: [link= stackoverflow.com/questions/20285907/xpage-concurrency-notescontext-not-initialized] here is a stack overflow question [/link]
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="http://www.gravatar.com/avatar/90081e38e95aa5970949dadcb7fbd719.jpg?s=88" class="gravatarimg" />
							posted by <b>Panu Haaramo</b> on <i>Monday 13 October 2014 AD - 22:22 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  I'm getting the same exception as Greg, NotesContext.getCurrent() fails. 
  <br /> 
  <br />Any idea why the same code works for you but not for us? Thanks.
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="http://www.gravatar.com/avatar/8b244c19421b34079796e5e64fc8ff75.jpg?s=88" class="gravatarimg" />
							posted by <b>Stephan H. Wissel</b> on <i>Monday 13 October 2014 AD - 22:31 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  I haven't revisited the code for a rather long time. The smartest way is to move on and use the OpenNTF Domino API. Nathan did an outstanding job to make that even easier.
 </body>
</html>
							<hr style="clear : both" />
						</li> 						<li>
<img src="http://www.gravatar.com/avatar/90081e38e95aa5970949dadcb7fbd719.jpg?s=88" class="gravatarimg" />
							posted by <b>Panu Haaramo</b> on <i>Tuesday 14 October 2014 AD - 15:37 Singapore Time</i>:<br /> <html>
 <head></head>
 <body>
  Thanks, haven't tried that yet. Actually your code works. I was not getting module and SessionCloner in the constructor.
 </body>
</html>
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/07/xpinc-development-insights.html"><i class="icon-hand-left"></i>XPiNC development insights</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/07/protecting-your-xpages-application.html">Protecting your XPages Application<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/">2013</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/07/">July</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/XPages.html">XPages</a>
  </li>
</ul>

	</div>
<!-- Footer	================================================== -->
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I am the "IBM Cloud Development Advocate for Collaboration". I'm based in Singapore.
						<g:plusone size="small" href="http://www.wissel.net/blog"></g:plusone>
					</p>
					<script src="http://stackoverflow.com/users/flair/131021.js?theme=default" type="text/javascript"></script>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://plus.google.com/+StephanWissel/about" rel="author" style="text-decoration: none;">
						    <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" alt="" style="border: 0; width: 16px; height: 16px;" /> Google+</a></li>
						<li><a href="skype//:notessensei?chat">Skype</a></li>
						<li><a href="/blog/2010/04/communicating-with-ibmers-and-lotus-professionals-using-sametime.html"
							   title="Many ways to use Sametime, no own Sametime server required">Sametime</a></li>
						<li><a href="http://www.ibm.com/contact/employees/servlets/lookup?lastname=Wissel&amp;firstname=Stephan">IBM</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by Lotus Software nor IBM Corporation.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						IBM's - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2016 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="http://creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "http://www.wissel.net/blog/2013/07/notessessions-xpages-and-threads.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/jquery.fittext.js"></script>
	<script type="text/javascript" src="/blog/js/main.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>   
    <script type="text/javascript">
		SyntaxHighlighter.all();
    </script>
	<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
	
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="http://feeds.feedburner.com/~s/Wisselnet?i=http://www.wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/comments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			renderComment("6LcUOewSAAAAACAI4zVcGFVkGWmp0sUH5gabwy1q", "4F2FF7AFE405DE0E48257BB0001324B6");
		});
	</script>

</body>
</html>
