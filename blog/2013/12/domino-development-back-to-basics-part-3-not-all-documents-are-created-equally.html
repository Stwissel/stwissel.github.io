<!DOCTYPE html>
<html lang="en">
<head>
<title>Domino Development - Back to Basics - Part 3: Not all Documents are created equally - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Domino Development - Back to Basics - Part 3: Not all Documents are created equally" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2013/12/domino-development-back-to-basics-part-3-not-all-documents-are-created-equally.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Domino Development - Back to Basics - Part 3: Not all Documents are created equally" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Domino Development - Back to Basics - Part 3: Not all Documents are created equally - Continuing from Part 2 this installment will introduce you to the four types of documents you can find inside an NSF: Documents Responses Response to Responses Profiles Profile Documents All document types follow the same rules as outlined in Part 2, but differ in the way they are created or accesse" />
<meta name="Keywords"
	content="IBM Notes,XPages," />
<meta name="Abstract"
	content="Domino Development - Back to Basics - Part 3: Not all Documents are created equally - Continuing from Part 2 this installment will introduce you to the four types of documents you can find inside an NSF: Documents Responses Response to Responses Profiles Profile Documents All document types follow the same rules as outlined in Part 2, but differ in the way they are created or accesse" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/">2013</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/12/">December</a></li>
	<li class="pull-right">
	<a href="/blog/d6plinks/SHWL-9ENBXY" title="originally published at /blog/d6plinks/SHWL-9ENBXY">SHWL-9ENBXY</a>
	</li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/ibmnotes.html">IBM Notes</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
							<div class="well well-raised">
				<p>This article is part of a mini series. Read them all:</p>
				<h3>Domino Development - Back to Basics</h3>
				<ol reversed class="nav nav-list">
					<li ><a href="/blog/2013/12/domino-development-back-to-basics-overview.html">Domino Development - Back to Basics - Overview</a></li>
					<li ><a href="/blog/2013/12/domino-development-back-to-basics-part-1-the-nsf.html">Domino Development - Back to Basics - Part 1: The NSF</a></li>
					<li ><a href="/blog/2013/12/domino-development-back-to-basics-part-2-forms-and-documents.html">Domino Development - Back to Basics - Part 2: Forms and Documents</a></li>
					<li  class="active"><a href="/blog/2013/12/domino-development-back-to-basics-part-3-not-all-documents-are-created-equally.html">Domino Development - Back to Basics - Part 3: Not all Documents are created equally</a></li>
					<li ><a href="/blog/2013/12/domino-development-back-to-basics-part-4-domino-views-are-different.html">Domino Development - Back to Basics - Part 4: Domino views are different</a></li>
					<li ><a href="/blog/2014/01/domino-development-back-to-basics-part-5-finding-data-collections-and-search.html">Domino Development - Back to Basics - Part 5: Finding data - Collections and Search</a></li>
					<li ><a href="/blog/2014/02/domino-development-back-to-basics-part-6-better-safe-than-sorry-security.html">Domino Development - Back to Basics - Part 6: Better safe than sorry - Security</a></li>
					<li ><a href="/blog/2014/02/domino-development-back-to-basics-part-7-map-reduce-domino-style.html">Domino Development - Back to Basics - Part 7: Map Reduce Domino Style</a></li>
				</ol>
			</div>	

				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/12/domino-development-back-to-basics-part-2-forms-and-documents.html"><i class="icon-hand-left"></i>Domino Development - Back to Basics - Part 2: Forms and Documents</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/12/domino-development-back-to-basics-part-4-domino-views-are-different.html">Domino Development - Back to Basics - Part 4: Domino views are different<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Domino Development - Back to Basics - Part 3: Not all Documents are created equally</small></h1>
					<hr />
					<div>Continuing from <a href="/blog/2013/12/domino-development-back-to-basics-part-2-forms-and-documents.html">Part 2</a> this installment will introduce you to the four types of documents you can find inside an NSF: 
<ol>
 <li>Documents</li>
 <li>Responses</li>
 <li>Response to Responses</li>
 <li>Profiles</li>
</ol>
<h3>Profile Documents</h3> All document types follow the same rules as outlined in <a href="/blog/2013/12/domino-development-back-to-basics-part-2-forms-and-documents.html">Part 2</a>, but differ in the way they are created or accessed. Short of profiles all documents typically get accessed in one or more views, by users or your code. Profiles on the other hand, never show up in a view, they are only accessed using some code. The easiest case is <code>@Commmand([EditProfile]"NameOfAForm")</code> for a System profile and <code>@Commmand([EditProfile]"NameOfAForm";@UserName)</code> for a user profile. Notes keeps an internal index for profiles and they are typically cached in memory, so accessing them is superfast (and quite a headache if you fall into the trap to use them for frequently updating information). Their intended use is storing configuration and selection options, so <code>@GetProfileField(FormName;FieldName)</code> has rapid access to options. In XPages applications the need for profiles is diminished, since you typically would store such configuration options in the Session and Application Scope where you load them once. 
<h3>Document hierarchies</h3>
<img src="/blog/images/2013/DocumentHierarchy.jpg" border="0" alt="The Document Hierarchy">
<br> The different "Document types" are actually "only" form properties (One can see how forms and documents are points of confusion). Inside a document the presence of the <code>$REF</code> field (containing the UNID of the parent) makes a document a response. If the parent document happens to be a response itself, the document then is considered a "Response to Response" All Notes APIs have methods to create or query a Parent - Child hierarchy. A good overview can be found in <a href="http://techlab.ytria.com/2247/lotus-notes-secrets/dealing-lotus-notes-parentresponse-issues/">this Ytria TechLab</a>. To my knowledge a Response-to-response document doesn't contain a direct reference to the root document 
<br> The form properties are used when you create a document in the Notes client to automatically establish Parent-Response relationships. A typical mechanism used in response document forms is to enable inheritance (that feature can also be used for standard documents, it isn't limited to responses!): When the document get created in the context of the parent (think: you read an entry in a discussion and press reply) all items from the parent document, that have fields in the response form with the same name as the item get copied into the response document (good fun if item and field don't have the same data type). Additionally all formulas computation in the response get executed against the parent, but stored in the response. This happens <b>once</b> at creation, not thereafter. To keep fields in sync you would use <code>@GetDocField($REF;"SomeFieldName")</code> to obtain the latest value (there are methods in LotusScript, JavaScript and Java too). 
<br> Sounds complicated? Go and create a discussion database (the template is on your Notes client) and play with it for a while. All this leads to an important Notes concept: 
<h3>Inheritance over Normalization</h3> Database <a href="http://en.wikipedia.org/wiki/Database_normalization">normalization</a> is a corner stone concept of <a href="http://en.wikipedia.org/wiki/Relational_database">RDBMS</a>. If RDBMS is all you ever used and you are stuck in the idea that databases = RDBMS ( <a href="http://en.wikipedia.org/wiki/Database">really?</a>), this will be hard to swallow. 
<br> Normalization is an abstraction that is suitable and needed for an RDBMS, it isn't a real life fact or an absolute necessity. If you blindly apply Normalization to <a href="http://en.wikipedia.org/wiki/XML_database">XML Database</a>, <a href="http://en.wikipedia.org/wiki/Document-oriented_database">document databases</a>, <a href="http://en.wikipedia.org/wiki/Graph_database">Graph databases</a> you create more problems than solutions. So <a href="http://www.youtube.com/watch?v=i7iQbBbMAFE">free your mind</a> and follow: 
<br> Let's look at a typical normalization example: an invoice: You have one customer table, one invoice table, one items table and one products table. In your invoice table you point to the customer table, in the item table to your invoice table and your product table. Life seems good. 
<br>
<img src="/blog/images/2013/InvoiceER1.jpg" border="0" alt="Invoice Entity relationship diagram">
<br> But then pesky reality kicks in: Customers move, but legal demands that existing invoices don't change (commonly changing a legal document is called <a href="http://legal-dictionary.thefreedictionary.com/forgery">forgery</a>). Product prices change, or sales negotiated a different price. Customers might call your articles different from your product table etc. So you adjust your diagram: 
<br>
<img src="/blog/images/2013/InvoiceER2.jpg" border="0" alt="Enhanced Invoice Entity relationship diagram">
<br> The attributes in red are inherited from the respective tables. This inheritance in an RDBMS is entirely done in code, in (classic) Notes it could be done through a form property. So inheritance is also quite common in RDBMS based applications too. 
<br> In Notes it is rather the rule than the exception. Retrofitting an RDBMS normalization onto a Notes application might not bring the benefits you might expect, so keep in mind: 
<br><b>Notes favours inheritance over normalization</b>. 
<br> Interestingly when you want to export data, e.g. for <a href="http://en.wikipedia.org/wiki/EbXML">data interchange</a> you hardly generate one table/file per RDBMS table, but you de-normalize the data for transport. In Notes this tandem of normalization/de-normalization isn't necessary since you deal with a (self contained) document already. 
<h3>Items have multi-values and can be grouped</h3> A typical way in a Notes application to handle parent-child records is the use of a group of related multi-value fields (in the form), resulting in a set of items in the document with the same number of values. You might have one address field (which can have many lines - much more flexible than a text column in an RDBMS) and a set of multi-value fields like: ProductID, description, Price, Quantity and SumPrice. Since the (classic) UI didn't make it very easy to keep those in sync, a module called <a href="http://www.bananahome.com/ldd/sandbox.nsf/search?SearchView&amp;Query=TableWalker">Table Walker</a> had been made available on the <a href="http://www.bananahome.com/ldd/sandbox.nsf" title="It needed the Yellow Bubble to preserve access to the Sandbox which IBM abandoned">Sandbox</a>. I later created <a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Tutorial-Introduction-to-XPages-Exercise-23">Tablewalker for XPages</a> as part of the <a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Tutorial-intro-to-XPages.htm">XPages tutorial</a> (with enlightened bug fixes courtesy <a href="http://mattwhite.me/">Matt White</a>). Keeping the line items inside a document makes transporting, processing or securing them much easier, however it makes querying the line items a bit more difficult (more on that when looking at views). You can take a similar (actually more powerful from a modelling point of view) approach when using <a href="http://www-01.ibm.com/software/data/db2/linux-unix-windows/xml/index.html">DB/2 PureXML</a>. DB/2 <a href="http://en.wikipedia.org/wiki/PureXML">PureXML</a> and XPages are actually a match made in heaven (or was that the other place starting with h?), which is the subject to another story, another time. 
<br> Remember (before you start bitching about parent-child relations): the explanations above are guidelines, there are valid cases where RDBMS like separation of properties and detail rows into separate documents is a better approach. You know how to normalize, so I don't need to explain that part 
<h3>A Document can save directly to an RDBMS</h3> There was an ill-fated attempt to use DB/2 as storage destination for NSF data called <a href="http://www-10.lotus.com/ldd/dominowiki.nsf/xpViewTags.xsp?categoryFilter=db2nsf">NSFDB2</a> which unfortunately predated PureXML capabilities (otherwise the story might have been different), and it shall not be spoken about it anymore (support for it has ceased anyway). The tools here, available since R5 are <a href="https://www.ibm.com/developerworks/lotus/documentation/decs/">DECS</a> (Domino Enterprise Connection Service, included on every Domino server and <a href="http://www-03.ibm.com/software/products/en/ibmenterpriseintegrator">LEI</a> ( <strike> Lotus </strike>IBM Enterprise Integrator, an IBM product you need to buy). Filling in some simple forms in the configuration database can link your Notes forms (and partially views) to backend data from various databases or ERP systems. Once you got a grasp of these tools, some <a href="/blog/2008/11/advanced-decs-usage.html">creative usage patterns</a> become possible ( <a href="/blog/2009/09/domino-and-rdbms.html">more details here</a> about Domino and RDBMS). Of course you can use code (ODBC, JDBC or LCLSX) your data transfer or use the <a href="https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/Tivoli%20Directory%20Integrator">IBM Swiss Data Knife</a> for moving data around. 
<br>
<br> Next up: <a href="/blog/2013/12/domino-development-back-to-basics-part-4-domino-views-are-different.html">Domino views are different</a></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 25 December 2013
<span class="divider">|</span>
<a href="/blog/2013/12/domino-development-back-to-basics-part-3-not-all-documents-are-created-equally.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/ibmnotes.html">IBM Notes</a>  <a href="/blog/categories/xpages.html">XPages</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2013/12/domino-development-back-to-basics-part-3-not-all-documents-are-created-equally.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_8987EF88D4A80DBC48257C4A002E92E6" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_8987EF88D4A80DBC48257C4A002E92E6"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li id="nocomments">
							<h5>No comments yet, be the first to comment</h5>
						</li>
					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2013/12/domino-development-back-to-basics-part-2-forms-and-documents.html"><i class="icon-hand-left"></i>Domino Development - Back to Basics - Part 2: Forms and Documents</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2013/12/domino-development-back-to-basics-part-4-domino-views-are-different.html">Domino Development - Back to Basics - Part 4: Domino views are different<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/">2013</a> <span class="divider">/</span></li>
  <li><a href="/blog/2013/12/">December</a></li>
	<li class="pull-right">
	<a href="/blog/d6plinks/SHWL-9ENBXY" title="originally published at /blog/d6plinks/SHWL-9ENBXY">SHWL-9ENBXY</a>
	</li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/ibmnotes.html">IBM Notes</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2022 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2013/12/domino-development-back-to-basics-part-3-not-all-documents-are-created-equally.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "8987EF88D4A80DBC48257C4A002E92E6");
 		};
	</script>

</body>
</html>
