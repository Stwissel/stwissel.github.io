<!DOCTYPE html>
<html lang="en">
<head>
<title>What&#39;s on your gRPC wire, Protocol Buffers or JSON? - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - What&#39;s on your gRPC wire, Protocol Buffers or JSON?" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2019/10/whats-on-your-grpc-wire-protobuffer-or-json.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - What&#39;s on your gRPC wire, Protocol Buffers or JSON?" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="What&#39;s on your gRPC wire, Protocol Buffers or JSON? - The hot kid on the block for microservice APIs is gRPC, a Google developed, OpenSource binary wire protocol. Its native serialization format is Protocol Buffers, advertised as &#39;Protocol buffers are a language-neutral, platform-neutral extensible mechanism for serializing structured data&#39;. How does t" />
<meta name="Keywords"
	content="Domino,gRPC,HTTP(S),Networking,WebDevelopment," />
<meta name="Abstract"
	content="What&#39;s on your gRPC wire, Protocol Buffers or JSON? - The hot kid on the block for microservice APIs is gRPC, a Google developed, OpenSource binary wire protocol. Its native serialization format is Protocol Buffers, advertised as &#39;Protocol buffers are a language-neutral, platform-neutral extensible mechanism for serializing structured data&#39;. How does t" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/admonition.css" />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
					<li><a href="/mealplan.html">Food</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2019/">2019</a> <span class="divider">/</span></li>
  <li><a href="/blog/2019/10/">October</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/domino.html">Domino</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/grpc.html">gRPC</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/https.html">HTTP(S)</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/networking.html">Networking</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/webdevelopment.html">WebDevelopment</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2019/10/caldav-reference-server.html"><i class="icon-hand-left"></i>A calDAV reference server</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2019/10/create-your-own-ca.html">Create your own Certificate Authority (CA)<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>What's on your gRPC wire, Protocol Buffers or JSON?</small></h1>
					<hr />
					<div><p>The hot kid on the block for microservice APIs is <a href="https://grpc.io/">gRPC</a>, a Google developed, OpenSource <strong>binary</strong> wire protocol.</p>
<p>Its native serialization format is <a href="https://developers.google.com/protocol-buffers">Protocol Buffers</a>, advertised as "<em>Protocol buffers are a language-neutral, platform-neutral extensible mechanism for serializing structured data</em>". How does that fit into Domino picture?</p>
<h3>Same same, but different</h3>
<p>When old bags, like me, hear the word <a href="https://en.wikipedia.org/wiki/Remote_procedure_call"><em>RPC</em></a> a flood of memories and technologies come to mind:</p>
<ul>
 <li><a href="https://en.wikipedia.org/wiki/Distributed_Component_Object_Model">DCOM</a> Microsoft's take on: like Java, but Windows only, superceded by <a href="https://en.wikipedia.org/wiki/Windows_Communication_Foundation">WCF</a> for dotNet</li>
 <li><a href="https://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture">Corba</a> a standard defined by a commitee, mainly Java (and <strong>YES</strong> Domino still ships with a <a href="https://en.wikipedia.org/wiki/DIIOP">Corba Server</a>)</li>
 <li><a href="https://www.w3.org/TR/soap/">SOAP</a> with our beloved (or was the word: cursed?) <a href="https://www.w3.org/TR/wsdl/">WSDL</a></li>
</ul>
<p>There are a few more modern contenders like <a href="https://thrift.apache.org/">Apache Thrift</a>, <a href="https://avro.apache.org/">Apache Avro</a> or the <a href="http://www.e-s-r.net/specifications/index.html">KF - TEE</a>. Good to have <a href="https://xkcd.com/927/">so many open standards</a>.</p>
<h3>the good</h3>
<p>Especially with <strong>SOAP</strong> the common reaction to the rise of <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> was: <em>Good riddance RPC</em>. I'm using the term <em>REST</em> fast and loose here, since a lot of the APIs are more like "<em>http endpoints accepting JSON payloads</em>" rather than REST in the formal sense of the definition.</p>
<p>So what's different with <em>gRPC</em>, so it got adopted by the <a href="https://www.cncf.io/">Cloud Native Computing Foundation</a>? IMHO there are several reasons:</p>
<ul>
 <li>It is designed by really smart engineers to run up to <em>Google scale</em></li>
 <li>It is ground up optimized, not bothering with legacy, but betting on <a href="https://tools.ietf.org/html/rfc7540">HTTP/2</a> and its wire efficiencies</li>
 <li>It is a compact binary protocol, making it efficient in low bandwidth and/or high volume use cases (<em>Google scale</em> anyone)</li>
 <li>It transmits data only, no repeated meta data as in JSON or XML based approaches (at least when you use Protocol Buffers)</li>
 <li>It focused on code generation, functioning more like an <a href="https://en.wikipedia.org/wiki/Software_development_kit">SDK</a> than an API</li>
 <li>It has versioning support built in</li>
 <li>It uses rich structured data types (15 <a href="https://developers.google.com/protocol-buffers/docs/proto3">on last count</a>) including enumerations. Notably absent: date/time and currency</li>
</ul>
<p>And of course: it's the current fashion. RedHat provides a <a href="https://servicesblog.redhat.com/2019/01/31/comparing-openapi-with-grpc/">compehensive comparison</a> to <a href="https://www.openapis.org/">OpenAPI</a>, as <a href="https://medium.com/apis-and-digital-transformation/openapi-and-grpc-side-by-side-b6afb08f75ed">do others</a>. Poking <a href="https://www.youtube.com/results?search_query=grpc">around YouTube</a> I gained the impression, that most comparisons are made to REST and its limitations, almost similar to sessions about <a href="https://www.youtube.com/results?search_query=graphql">GraphQL</a>. Mr. Sandoval tries to <a href="https://nordicapis.com/when-to-use-what-rest-graphql-webhooks-grpc/">describe differentiators and use cases</a>, go read it, it is quite good.</p><h3>the bad and ugly</h3>
<p>Clearly seeing the strenght, I see weakness too. Some of them are more or less relevant, lets list them out:</p>
<ul>
 <li>SDK vs. API. Google's <a href="https://github.com/protocolbuffers/protobuf/releases">protoc</a> generates code for C++, Java, Python, Objective-C, C#, JavaScript, Ruby, Go, PHP and Dart. If you <a href="https://en.wikipedia.org/wiki/List_of_programming_languages">fancy other languages</a> you are out of luck. Pretty much each language can access http (even <a href="https://en.wikipedia.org/wiki/LotusScript">LotusScript</a>), but for gRPC, you are limited to the provided languages (probably not an issue for mainstream programmers, except for our <em>LotusScript</em> fans)</li>
 <li>The binary protocol makes it way harder to introspect. Without the proto file, it is a lot of guesswork what goes over the wire. If you think that's not an issue, check the <a href="https://doc.cwpcollaboration.com/appdevpack/docs/en/homepage.html">Domino AppDev Pack</a>) for its proto file</li>
 <li>Structured data (only). Domino's documents and views are notoriously flexible. While you could define a structured data model for one specific application, generic Domino will pose a challenge</li>
</ul>
<h3>JSON over gRPC</h3>
<p>Is there potentially a way to still use JSON, but leveraging HTTP/2 and the gRPC protocol? Turns out, it is possible. Protocol Buffers is only one (default) way to use gRPC. In an <a href="https://grpc.io/blog/grpc-with-json/">August 2018 blog post</a>, <a href="https://carlmastrangelo.com/">Carl Mastrangelo</a> outlines how a JSON binding using Google's <a href="https://github.com/google/gson">GSON</a> JSON library (there is also <a href="https://cloud.google.com/endpoints/docs/grpc/transcoding">transcoding</a>, but requiring data to be structured).</p>
<p>Compared to his <a href="https://grpc.io/blog/optimizing-grpc-part-2/">native example</a> that did 2400 RPCs per second, the JSON binding example comes in at 2200 RPCs per second. Unless you have a Google scale problem, that should suffice.</p>
<p>Ditching Protocol Buffers comes with a price: <em>protoc</em> will no longer generate any code stubs for you, so you have to handcraft those. In the <a href="https://grpc.io/blog/grpc-stacks/">bigger scheme of things</a> that might just be a <em>labour of love</em>. Unless someone takes your <a href="https://www.openapis.org">OpenAPI</a> <a href="https://github.com/OAI/OpenAPI-Specification">specification</a> and send it through an <a href="https://openapi-generator.tech/">OpenAPI Generator</a>. If <a href="https://github.com/swagger-api/swagger-codegen/commit/6b27898c21332828abc1a1a7492b5f1232b272e4">memory serves</a> that might not be as hard as it looks.</p>
<p>So stay tuned!</p></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 15 October 2019
<span class="divider">|</span>
<a href="/blog/2019/10/whats-on-your-grpc-wire-protobuffer-or-json.html#comments">Comments (0)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/domino.html">Domino</a>  <a href="/blog/categories/grpc.html">gRPC</a>  <a href="/blog/categories/https.html">HTTP(S)</a>  <a href="/blog/categories/networking.html">Networking</a>  <a href="/blog/categories/webdevelopment.html">WebDevelopment</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2019/10/whats-on-your-grpc-wire-protobuffer-or-json.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_529f9d60-ef5d-11e9-ad93-715e4f586c95" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_529f9d60-ef5d-11e9-ad93-715e4f586c95"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li id="nocomments">
							<h5>No comments yet, be the first to comment</h5>
						</li>
					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2019/10/caldav-reference-server.html"><i class="icon-hand-left"></i>A calDAV reference server</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2019/10/create-your-own-ca.html">Create your own Certificate Authority (CA)<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2019/">2019</a> <span class="divider">/</span></li>
  <li><a href="/blog/2019/10/">October</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/domino.html">Domino</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/grpc.html">gRPC</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/https.html">HTTP(S)</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/networking.html">Networking</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/webdevelopment.html">WebDevelopment</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="https://www.stickermule.com/u/43c09fe6343315f">Stickers from Stickermule</a></li>
						<li><a href="https://github.com/Stwissel">GitHub</a></li>
						<li><a href="https://bitbucket.org/stwissel/">Bitbucket</a></li>
						<li><a href="https://bsky.app/profile/stwissel.bsky.social">Bluesky</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2025 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2019/10/whats-on-your-grpc-wire-protobuffer-or-json.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script type="text/javascript" src="/blog/js2/admonition.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "529f9d60-ef5d-11e9-ad93-715e4f586c95");
 		};
	</script>

</body>
</html>
