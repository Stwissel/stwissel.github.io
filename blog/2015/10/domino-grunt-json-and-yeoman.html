<!DOCTYPE html>
<html lang="en">
<head>
<title>Domino, Extlib, GRUNT, JSON and Yeoman - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Domino, Extlib, GRUNT, JSON and Yeoman" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2015/10/domino-grunt-json-and-yeoman.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Domino, Extlib, GRUNT, JSON and Yeoman" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2015,2019 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Domino, Extlib, GRUNT, JSON and Yeoman - TL:TR With a few tweaks and clever setup, you can have web developers deliver front-ends for Domino without ever touching it. Contemporary web development workflows separate front-end and back-end through a JSON API and HTTP (that&#39;s 21st century 3270 for you). The approach in these workflows is to t" />
<meta name="Keywords"
	content="XPages," />
<meta name="Abstract"
	content="Domino, Extlib, GRUNT, JSON and Yeoman - TL:TR With a few tweaks and clever setup, you can have web developers deliver front-ends for Domino without ever touching it. Contemporary web development workflows separate front-end and back-end through a JSON API and HTTP (that&#39;s 21st century 3270 for you). The approach in these workflows is to t" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link href='//fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

    <script> 
var $buoop = {notify:{e:-0.01,f:-0.01,o:-0.01,s:-0.01,c:-0.01},insecure:true,unsupported:true,api:5}; 
function $buo_f(){ 
 var e = document.createElement("script"); 
 e.src = "//browser-update.org/update.min.js"; 
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script>

    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/">2015</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/10/">October</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2015/08/theres-a-plug-in-for-that-getting-started-with-cf-plug-ins.html"><i class="icon-hand-left"></i>There&apos;s a plug-in for that! Getting started with Cloud Foundry plug-ins</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2015/11/the-lowdown-on-notes-application-web-and-mobile-enablement.html">The lowdown on Notes application web and mobile enablement<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Domino, Extlib, GRUNT, JSON and Yeoman</small></h1>
					<hr />
					<div><h3>TL:TR</h3> With a few tweaks and clever setup, you can have web developers deliver front-ends for Domino without ever touching it. 
<br> Contemporary web development workflows separate front-end and back-end through a JSON API and HTTP (that's 21st century 3270 for you). The approach in these workflows is to treat the webserver as source of static files (HTML, CSS, JS) and JSON payload data being shuffled back and forth. This article describes how my development setup makes all this work with Domino and Domino designer. 
<br> 
<h3>The full monty</h3> The front-end tools I use are: 
<ul> 
 <li><a href="https://nodejs.org/">Node.js</a>: a JavaScript runtime based on Google's V8 engine. It provides all runtime for all the other tools. If you don't have a node.js installation on your developer workstation, where were you hiding the last 2 years?</li> 
 <li><a href="http://bower.io/">Bower</a>: a dependency manager for browser files like CSS, JS with their various frameworks. You add a depencency (e.g. Bootstrap) to the <code>bower.json</code> file and Bower will find the right version for you </li> 
 <li><a href="http://gruntjs.com/">Grunt</a>: a task runner application, used for assembly of web sites/applications (or any other stuff). Configured using a <code>Gruntfile.js</code>: it can do all sorts of steps like: copy files, combine and minify, check code quality, run tests etc.</li> 
 <li><a href="http://yeoman.io/">Yeoman</a>: A application scaffolding tool. It puts all the tools and needed configurations together. It uses generators to blueprint different applications from classic web, to reveal application to mobile hybrid apps. The site lists hundreds of generators and you are invited to modifiy them or roll your own</li> 
 <li><a href="https://git-scm.com/">GIT</a>: the version control system</li> 
</ul> The list doesn't include 
<a href="http://www.geany.org/">one</a> or 
<a href="http://www.sublimetext.com/">the other</a> editor, 
<a href="http://www.eclipse.org/">one</a> or 
<a href="https://www.jetbrains.com/webstorm/">the other</a> IDE or 
<a href="https://www.sourcetreeapp.com/">version control client</a>, since theses choices don't influence the workflow steps or setup. Pick what you like. 
<br> My general directory layout starts with a project folder that has entries for code, documentation, nsf and a misc. folder. I only put the 
<code>code</code> folder into the GIT version control. 
<br> 
<img src="/blog/images/2015/FrontEndBackEndDevelopment.jpg" border="0" alt="Seperation of concerns for frontend and backend development"> 
<br> The front-end developer doesn't need any of the Domino components available to create user interface and interaction models. The back-end developer will use exclusively the REST controls from the Domino XPages Extension library (which is part of a default current Domino server install). The two directory structures are linked in a GIT project, but that isn't mandatory. One step that made my live much easier: take the 
<code>dist</code> directory and link it to 
<code>WebContent</code>. This saves me the step to copy things around. The fine-tuning of the setup is where the fun starts.But first things first: 
<h3>Installation</h3> You follow the 
<a href="https://nodejs.org/">Node.js</a> instructions for your platform to get a running node.js version (v4.2.1 as time of writing). Thereafter you install as admin ( 
<code>sudo</code> for Linux/Mac) Bower, Grunt and Yeoman: 
<br> 
<pre class="brush: bash">
npm install -g bower
npm install -g grunt-cli
npm install -g yo
npm install -g generator-karma generator-angular
</pre> 
<br> I use the 
<a href="https://github.com/yeoman/generator-angular">generator-angular</a>, but looking very promising is 
<a href="https://github.com/mcfly-io/generator-mcfly">mcfly</a>. Go and checkout the 
<a href="http://yeoman.io/">Yeoman</a> website for the many more options you have for generators. 
<br> Change to the Frontend directory and initialize your new front-end application using 
<br> 
<pre class="brush: bash">
 yo angular myAwesomeApp
</pre> You get walked through a series of questions, node.js does some magic (requires internet connection) and you have a basic 
<a href="https://angularjs.org/">Angular.js</a> application ready. There are tons of tutorials how to use Yeoman, Bower, Grunt and Angular.js, so go google them, I'll limit myself to the tweaks I made to make my Domino live easier. 
<br> Once the 
<code>yo</code> magic work concludes, you can use 
<br> 
<pre class="brush: bash">
grunt serve
</pre> to have a first look at your new frontend in action (by default on port 9000). As long as that grunt task is running, any change you save will automatically reload the browser and show you the new result (praise to the second monitor). 
<br> 
<h3>Tweaks</h3> 
<ul> 
 <li>All my JSON controls live on an XPage with the name <code>api.xsp</code>.<br> I create a <b>directory</b> under the app directory named api.xsp and add one file each that matches the path property in the XPages REST controls (api.xsp/people, api.xsp/setup.json etc). These files contain sample JSON of what the Domino REST control eventually will return.</li> 
 <li>To prevent that directory to be copied into the NSF (when <code>grunt build</code> runs), I edit the <code>Gruntfile.js</code> and change the copy:dist:files:src array to include <code>'!api.xsp'</code>.<br> If you use more XPages you could use a wildcard. Be careful to include the exclamation mark which stands for <i>not</i></li> 
 <li>With the file open, I adjust the <b>clean</b> section where I add <code>'!&lt;%= yeoman.dist %&gt;/WEB-INF{,*/}*'</code> to <code>clean:dist:files:src</code>.<br> Again don't forget the exclamation mark. This allows me to keep WebContent and dist linked and the build task won't wipe out the WEB-INF directory.<br> Now we can make JSON calls (in Angular services/providers) to our REST endpoints without having anything Domino installed (which allows you to use a Mac or Linux for this part of the exercise). The only missing step: posting things back.</li> 
 <li>This part is 
  <strike>
    a little trickier 
  </strike> easy when you ask <a href="https://www.linkedin.com/pub/benjamin-kroeger/81/290/19a">the right people</a>:<br> in a frontend dev environment you don't want to fully simulate the server, a static reply or just echo the submitted JSON does suffice.<br> The default configuration of the Gruntfile.js only caters to GET requests, but I wasn't <a href="http://stackoverflow.com/questions/16361931/yeoman-1-0-make-development-server-accept-post-calls">the first to ask</a>, so there's precedence. It turned out, that it is just a few lines of changes at the top of your Gruntfile.js (and 2 lines down): <pre class="brush: js">
var bodyParser = require("body-parser");
var postResponder = function(request, response, next) {
if (request.method === 'POST') {
   console.log(request.method+" "+request.url);
   response.setHeader('Content-Type', 'application/json');
   response.statusCode = 200;
   response.end(JSON.stringify(request.body));
   } else {
     next();
  }
};
</pre><br> and to the <code>connect.livereload.options.middleware</code> object:<br> <pre class="brush: js">
function (connect) {
   return [
      connect().use('/api.xsp', bodyParser.json()),
      connect().use('/api.xsp', postResponder),
      connect.static('.tmp'),
      connect().use('/bower_components', connect.static('./bower_components')),
      connect().use('/app/styles', connect.static('./app/styles')),
      connect.static(appConfig.app)
   ];
}
</pre><br> Note: You only add the first two lines after the return statement, the others are already there. </li> 
</ul> Musing (insider pun intended) to put all this into a generator 
<img src="/blog/images/emoticons/wink.gif">. 
<br> As usual YMMV!</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 30 October 2015
<span class="divider">|</span>
<a href="/blog/2015/10/domino-grunt-json-and-yeoman.html#comments">Comments (3)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/xpages.html">XPages</a> 

						<div class="shariff" data-lang="en" data-url="https://www.wissel.net/blog/2015/10/domino-grunt-json-and-yeoman.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;mail&quot;]" data-title="Domino, Extlib, GRUNT, JSON and Yeoman" data-twitter-via="@notessensei"></div>
						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2015/10/domino-grunt-json-and-yeoman.html";
						</script>
					</p>

				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_00E8CF390AF2573348257EEC00482632" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_00E8CF390AF2573348257EEC00482632"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>Arun Agnihotri</b> on <i>Saturday 31 October 2015 AD</i>:<br /> 
  Steve...great post as usual.. one thing where most of it gets stuck is file attachment handling... can you tell us a little bit more about handling attachments in above scenario??
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Monday 02 November 2015 AD</i>:<br /> 
  The short answer: you don't. 
  <br /> 
  <br />The long answer: A JSON based REST service serves JSON. An attachment is binary data. JSON != binary. You could start shoehorning files into a JSON API, but that's most likely not a brilliant idea. 
  <br /> 
  <br />You have 2 use cases: extending existing application where you need to preserve attachments inside your main document and new applications where you can do what you deem fit. In the later case you save yourself a lot of trouble storing attachments in their own documents. In the former you deal with XPages native way to upload files (e.g. using the multi-upload control). I'll blog about this as need arises in my projects
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Avi Haiat</b> on <i>Wednesday 04 November 2015 AD</i>:<br /> 
  Hi there, nice article, and thks for mentioning the generator-mcfly
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2015/08/theres-a-plug-in-for-that-getting-started-with-cf-plug-ins.html"><i class="icon-hand-left"></i>There&apos;s a plug-in for that! Getting started with Cloud Foundry plug-ins</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2015/11/the-lowdown-on-notes-application-web-and-mobile-enablement.html">The lowdown on Notes application web and mobile enablement<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/">2015</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/10/">October</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2020 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2015/10/domino-grunt-json-and-yeoman.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>
    <script type="text/javascript">
    $(document).ready(function() {
            SyntaxHighlighter.all();
    });
    </script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "00E8CF390AF2573348257EEC00482632");
 		};
	</script>

</body>
</html>
