<!DOCTYPE html>
<html lang="en">
<head>
<title>Random insights in Bluemix development (a.k.a Die Leiden des Jungen W) - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Random insights in Bluemix development (a.k.a Die Leiden des Jungen W)" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2015/06/random-insights-in-bluemix-development.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Random insights in Bluemix development (a.k.a Die Leiden des Jungen W)" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2020 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Random insights in Bluemix development (a.k.a Die Leiden des Jungen W) - Each platform comes with it&#39;s own little challenges, things that work differently than you expect. Those little things can easily steal a few hours. This post collects some of my random insights: Development cycle I&#39;m a big fan of offline development. My preferred way is to use a local git repositor" />
<meta name="Keywords"
	content="Bluemix," />
<meta name="Abstract"
	content="Random insights in Bluemix development (a.k.a Die Leiden des Jungen W) - Each platform comes with it&#39;s own little challenges, things that work differently than you expect. Those little things can easily steal a few hours. This post collects some of my random insights: Development cycle I&#39;m a big fan of offline development. My preferred way is to use a local git repositor" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/">2015</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/06/">June</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/bluemix.html">Bluemix</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2015/06/investigating-jndi.html"><i class="icon-hand-left"></i>Investigating JNDI</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2015/07/validating-json-object.html">Validating JSON object<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Random insights in Bluemix development (a.k.a Die Leiden des Jungen W)</small></h1>
					<hr />
					<div>Each platform comes with it's own little challenges, things that work differently than you expect. Those little things can easily steal a few hours. This post collects some of my random insights: 
<ul>
 <li><h3>Development cycle</h3> I'm a big fan of <a href="/blog/2015/03/develop-local-deploy-cloud-global-java-and-couchdb.html">offline development</a>. My preferred way is to use a local git repository and push my code to <a href="https://hub.jazz.net/">Bluemix DevOps service</a> to handle compilation and deployment. It comes with a few caveats 
  <ul>
   <li>When you do anything beyond basic <b>Java</b>, you want to use <a href="http://maven.apache.org">Apache Maven</a>. The dependency management is worth the learning curve. If you started with the Java boilerplate, you end up with an ANT project. Take some time, to not only mavenize it, but adjust the directories to follow the maven standards. This involves shuffling a few files around (<code>/src</code> vs. <code>/src/main/java</code> and <code>/bin</code> vs. <code>/target/main/java</code> for starters) and edit the pom.xml to remove the custom path</li>
   <li>Make sure you clear out the path in the build job on Devops, maven already deploys to target. If you have specified target in Devops, you end with the code in target/target and the deploy task won't find anything</li>
   <li>Learn about the <a href="https://developer.ibm.com/wasdev/websphere-liberty/">liberty profile</a> and its available feature, so you can properly specify <code>&lt;scope&gt;provided&lt;/scope&gt;</code> in the POM.xml</li>
   <li>In node.js, when you manually install a module in <code>node_modules</code>, that isn't pulled from a repository through an entry in <code>package.json</code>, that module will not be visible to standard build and deploy, since (surprise surprise) node_modules are excluded from version control and build checkout.<br> Now there are a bunch of workarounds described, but I'll sum it up: don't bother. Either you move your module into a repository DevOps can reach or you build the application locally and use <code>cf push</code></li>
   <li><code>manifest.yml</code> is your friend. Learn about it. Especially the path command. When deploying a maven build your path will be <code>/target/[name-of-app]-[maven-version].war</code></li>
   <li>You can specify a buildpack and environment parameters in a manifest. Works like a charm. However removing them from the manifest has no effect. You have to manually unset the values using the cf tool. Also the buildpack needs to be reset manually, so be careful there!</li>
  </ul> </li>
 <li><h3>Services</h3> The <i>automagical</i> configuration of services is one of the things to love in Bluemix. This especially holds true for Java 
  <ul>
   <li>The samples suggest to use the <code>VCAP_SERVICES</code> environment variable to get credentials and urls for your services. In short: don't. The Java Liberty build pack does a nice job making the values available though JNDI or Spring. So simply use those. To make sure that <code>Java:comp/env</code> can see them properly, don't forget to reference them in <code>web.xml</code></li>
   <li>In diversion from this: I found the <a href="https://developer.ibm.com/messaging/2015/05/22/getting-started-with-java-apps-using-the-mq-light-service-for-bluemix/">mqLite Java classes</a> less stressful that configuring JMS via JNDI. The developers did a good job making that library too work automagical on Bluemix.</li>
   <li>For some services (e.g. JAX-RS 2.0 client; <a href="">BlueMix SSO</a>) you do have to touch the server.xml.<br> The two methods are <a href="https://www.ng.bluemix.net/docs/starters/liberty/index.html#optionsforpushinglibertyapplications__PackagedServer">a packaged server</a> or <a href="https://www.ng.bluemix.net/docs/starters/liberty/index.html#optionsforpushinglibertyapplications__ServerDirectory">a server directory</a>. The former requires a local liberty profile installed, so I prefer the later. It is actually easier than it sounds. In your (Maven) project, you create new directories <code>DefaultServer</code> and <code>DefaultServer/apps</code> (case sensitive!). You create/edit the server.xml in the DefaultServer directory. Then check for your maven plugin in <code>pom.xml</code> and change the output directory (in bold):<br> <pre><code class="language-xml">
&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
  &lt;version&gt;2.3&lt;/version&gt;
  &lt;configuration&gt;
    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
    &lt;warName&gt;${artifactId}&lt;/warName&gt;
    <b>&lt;outputDirectory&gt;${basedir}/defaultServer/apps&lt;/outputDirectory&gt;</b>
  &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre><br> Then you can deploy your application using <code>mvn install</code> and <code>cf push [appname] -p defaultServer</code>. These two commands work in DevOps too! </li>
   <li>The SSO service is "Single Sign <b>On</b>", there is no real "Single Sign <b>Out</b>". That's not an issue specific to Bluemix, but something all SSO solutions struggle with, just to be clear what to expect. The login dialog is ugly, but fully customizable. The nature of SSO (Corporate and/or a public provider) makes it a minimal provider: identity only, no roles, attributes or groups. In the spirit of micro services: build a rest based service for that</li>
  </ul> </li>
 <li><h3>Node-RED</h3> While it is advertised as IoT tool, there is much more to this little gem 
  <ul>
   <li>Node-RED runs on Bluemix, your local PC or even a Rasberry Pi. For the later head over to <a href="http://thethingbox.io/">The Thingbox</a> to get your ready OS image</li>
   <li>Node-RED can be easily expanded, there are tons of ready modules at <a href="http://flows.nodered.org/">Node-RED flows</a>. Not all are suitable for Bluemix (e.g. the ones talking Bluetooth), but a local Node-RED can easily talk to a Bluemix Node-RED making it easy for applications to run distributed</li>
   <li>My little favourite: connect a HTTP post input directly to a Cloudant output. Node-RED converts the encoded form into a JSON object you can drop into the database as is. You might want to add a small <a href="http://stackoverflow.com/questions/23593878/node-js-equivalent-for-gson-json-creation">filter</a> (a compute node) to avoid data contamination</li>
  </ul> </li><!--
<li><h3></h3>
<ul>
<li></li>
<li></li>
</ul>
</li>
-->
</ul> As usual YMMV</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 29 June 2015
<span class="divider">|</span>
<a href="/blog/2015/06/random-insights-in-bluemix-development.html#comments">Comments (1)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/bluemix.html">Bluemix</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2015/06/random-insights-in-bluemix-development.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_C9362E590B9E879648257E7300295AA5" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_C9362E590B9E879648257E7300295AA5"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>Toby Samples</b> on <i>Monday 29 June 2015 AD</i>:<br /> 
  I wasn't a big fan of the fact that it started with an ANT task. But I guess I'll deal with it.
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2015/06/investigating-jndi.html"><i class="icon-hand-left"></i>Investigating JNDI</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2015/07/validating-json-object.html">Validating JSON object<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/">2015</a> <span class="divider">/</span></li>
  <li><a href="/blog/2015/06/">June</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/bluemix.html">Bluemix</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2022 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2015/06/random-insights-in-bluemix-development.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "C9362E590B9E879648257E7300295AA5");
 		};
	</script>

</body>
</html>
