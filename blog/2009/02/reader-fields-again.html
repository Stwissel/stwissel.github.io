<!DOCTYPE html>
<html lang="en">
<head>
<title>Reader fields (again) - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Reader fields (again)" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2009/02/reader-fields-again.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Reader fields (again)" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Reader fields (again) - Reader Fields and how to handle them to balance security and performance is a never ending topic. Let us have a a closer look what actually happens. Let us assume we have a view with 500,000 document, where a particular user has access to 77 documents (which is not so uncommon in big organizations)." />
<meta name="Keywords"
	content="Show-N-Tell Thursday," />
<meta name="Abstract"
	content="Reader fields (again) - Reader Fields and how to handle them to balance security and performance is a never ending topic. Let us have a a closer look what actually happens. Let us assume we have a view with 500,000 document, where a particular user has access to 77 documents (which is not so uncommon in big organizations)." />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/">2009</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/02/">February</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2009/02/customer-disservice.html"><i class="icon-hand-left"></i>Customer Disservice</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2009/03/quickr-dominodoc-and-a-lotus-redbook.html">Quickr, Domino.Doc and a Lotus Redbook<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Reader fields (again)</small></h1>
					<hr />
					<div>Reader Fields and <a href="/blog/2009/02/workflow-and-document-access.html" title="Workflow and Document Access">how to handle them</a> to balance security and performance is a <a href="/blog/2008/10/access-protected-notes-documents-rdbms-style.html" title="Access protected Notes documents - RDBMS style">never ending topic</a>. Let us have a a closer look what actually happens. Let us assume we have a view with 500,000 document, where a particular user has access to 77 documents (which is not so uncommon in big organizations). In the first case the view is sorted by some criteria (case number, date or whatever) that scatters the 70 documents all over the database. 
<br>
<img src="/blog/images/2009/ReaderProtectionScattered.png" alt="ReaderProtectionScattered.png">
<br> When the user e.g. opens that view from the web requesting the default 25 entries, the Domino server actually will more than 350,000 documents. It needs to instantiate a document object and evaluate access control rules for it. These are costly (read time and memory) operations. Performance will not meet any user expectation. Ironically this is hardly discovered by developers since they test with a few hundred documents and very often have universal access. With a little change of the view layout, the situation changes completely. We take the same view but categorize it by e.g. by @Unique(DocAuthors:DocReaders) which would list all documents for a specific reader (remember: an Author field includes Read Access Rights). 
<br>
<img src="/blog/images/2009/ReaderProtectionCategorized.png" alt="ReaderProtectionCategorized.png">
<br> Now the Domino Server does an index search which is very fast going after a build index and reads exactly 25 documents. So with a little change in the view layout we removed 99.9929% of the document reads (bad news for hardware sellers). Looks good.... but you will say: wait a second. One user can have read access because her name is in a Reader/Author field, she might be member of a group or have a specific role, the single category only will show me <b>one</b> of that entries at a time.And you are right. To cover that a little more work is needed. There are two approaches to handle this problem. The first is from a functional angle, the second one involved code. The functional angle: The various reasons why a users can read a document typically translate into a business functionality. First there are "My Documents". That would be all the documents where a user is explicitly named for being the requestor, approver, reviewer etc., Then there are e.g. Revision Documents where the users has the role [Revisor] or Audit Document where the user has the role [Audit]. And then there are the documents that belong to my department, which translates into a group name. To reflect that in an UI you need to populate a dropdown box with the human values in the UI and the technical value in als result. And voila single category access will work. A UI could look like this: 
<br>
<img src="/blog/images/2009/ApprovalCentral.png" alt="ApprovalCentral.png">
<br>(UI created with <a href="http://www.balsamiq.com/products/mockups">Balsamic Mockups</a>). I have tested this variation over-and-over by giving users both options and monitoring what they choose: access by business role as described here or (see below) flat anything. Business users pick the business role access in a high 90% range of cases for their daily work. 
<br> The <b>code version</b>: Create a $$ViewTemplate for your view. Do not add a $$ViewBody field (or the embedded view element). Add a RichText field "Body" and a webQueryOpen agent. That wqo agent writes into that body field which effectively becomes our view display. For creative minds: you are not limited by a table display. The agent looks up all Roles/Groups/Names of the current user by leveraging @UserNameList and makes one call to getViewEntriesByKey. The trick here: a) use ViewEntries not Documents b) have the UNID in one column and use a LotusScript list not to output a document twice c) use a sorting Dojo Table to get the stuff sorted (optional). The nice side effect of the agent: you can output as many lines as you deem fit. 
<br> Some sample code: 
<br>
<style>.lotusscript { font-family: sans-serif; font-size: 9pt; color: black; }
.ls-comment { color: green; }
.ls-quote { color: black; }
.ls-datatype { color: black; }
.ls-operator { color: blue; }
.ls-keyword { color: blue; }
.ls-statement { color: blue; }
.ls-function { color: blue; }
.ls-class { color: black; }
.ls-constant { color: purple; }
</style>
<pre>
 <div class="lotusscript"><font class="ls-statement">Sub</font><font class="ls-keyword">Initialize</font><font class="ls-statement">Dim</font> s
  
  <font class="ls-keyword">As</font><font class="ls-keyword">New</font><font class="ls-class">NotesSession</font><font class="ls-statement">Dim</font> doc
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesDocument</font><font class="ls-statement">Dim</font> db
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesDatabase</font><font class="ls-statement">Set</font> doc
  
  <font class="ls-operator">=</font> s
  
  <font class="ls-operator">.</font>DocumentContext
 
  <font class="ls-statement">Set</font> db
  
  <font class="ls-operator">=</font> s
  
  <font class="ls-operator">.</font>CurrentDatabase
 
  <font class="ls-statement">Dim</font> rt
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesRichTextItem</font><font class="ls-statement">Set</font> rt
  
  <font class="ls-operator">=</font><font class="ls-keyword">New</font><font class="ls-class">NotesRichTextItem</font><font class="ls-operator">(</font>doc
  
  <font class="ls-operator">,</font><font class="ls-quote">"Body"</font><font class="ls-operator">)</font><font class="ls-function">Call</font> test1
  
  <font class="ls-operator">(</font>doc
  
  <font class="ls-operator">,</font> rt
  
  <font class="ls-operator">)</font><font class="ls-comment">'Just one test</font><font class="ls-statement">Dim</font> v
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesView</font><font class="ls-statement">Dim</font> catList
  
  <font class="ls-keyword">As</font><font class="ls-keyword">Variant</font><font class="ls-statement">Set</font> v
  
  <font class="ls-operator">=</font> db
  
  <font class="ls-operator">.</font>GetView
  
  <font class="ls-operator">(</font><font class="ls-quote">"catByAccess"</font><font class="ls-operator">)</font>
 catList
  
  <font class="ls-operator">=</font> doc
  
  <font class="ls-operator">.</font>GetItemValue
  
  <font class="ls-operator">(</font><font class="ls-quote">"UserNameList"</font><font class="ls-operator">)</font><font class="ls-function">Call</font> RenderViewToRT
  
  <font class="ls-operator">(</font>v
  
  <font class="ls-operator">,</font> rt
  
  <font class="ls-operator">,</font> catList
  
  <font class="ls-operator">)</font><font class="ls-statement">End</font><font class="ls-statement">Sub</font>
 </div>
 <div class="lotusscript"><font class="ls-statement">Sub</font> RenderViewToRT
  
  <font class="ls-operator">(</font>v
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesView</font><font class="ls-operator">,</font> rt
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesRichTextItem</font><font class="ls-operator">,</font> catList
  
  <font class="ls-keyword">As</font><font class="ls-keyword">Variant</font><font class="ls-operator">)</font><font class="ls-comment">'catlist is an array with the list of categories to lookup</font><font class="ls-statement">Dim</font> i
  
  <font class="ls-keyword">As</font><font class="ls-keyword">Integer</font><font class="ls-statement">Dim</font> k
  
  <font class="ls-keyword">As</font><font class="ls-keyword">Integer</font><font class="ls-statement">Dim</font> m
  
  <font class="ls-keyword">As</font><font class="ls-keyword">Integer</font><font class="ls-statement">Dim</font> vec
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesViewEntryCollection</font><font class="ls-statement">Dim</font> ve
  
  <font class="ls-keyword">As</font><font class="ls-class">NotesViewEntry</font><font class="ls-statement">Dim</font> colVals
  
  <font class="ls-keyword">As</font><font class="ls-keyword">Variant</font><font class="ls-statement">Dim</font> curVal
  
  <font class="ls-keyword">As</font><font class="ls-keyword">Variant</font><font class="ls-statement">On</font><font class="ls-function">Error</font><font class="ls-keyword">Goto</font> Err_RenderViewToRT
 
  <font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">|&lt;table class="data"&gt;|</font><font class="ls-operator">)</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AddNewline
  
  <font class="ls-operator">(</font>1
  
  <font class="ls-operator">)</font><font class="ls-comment">'One lookup at a time</font><font class="ls-statement">For</font> i
  
  <font class="ls-operator">=</font> 0
  
  <font class="ls-statement">To</font><font class="ls-function">Ubound</font><font class="ls-operator">(</font>catList
  
  <font class="ls-operator">)</font><font class="ls-statement">Step</font> 1
  
  <font class="ls-statement">Set</font> vec
  
  <font class="ls-operator">=</font> v
  
  <font class="ls-operator">.</font>GetAllEntriesByKey
  
  <font class="ls-operator">(</font>catList
  
  <font class="ls-operator">(</font>i
  
  <font class="ls-operator">)</font><font class="ls-operator">)</font><font class="ls-statement">If</font> vec
  
  <font class="ls-operator">.</font>Count
  
  <font class="ls-operator">&gt;</font> 0
  
  <font class="ls-statement">Then</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">|&lt;tr class="success"&gt;&lt;td colspan="7"&gt;|</font><font class="ls-operator">+</font><font class="ls-function">Cstr</font><font class="ls-operator">(</font>vec
  
  <font class="ls-operator">.</font>Count
  
  <font class="ls-operator">)</font><font class="ls-operator">+</font><font class="ls-quote">| entries found for |</font><font class="ls-operator">+</font>catList
  
  <font class="ls-operator">(</font>i
  
  <font class="ls-operator">)</font><font class="ls-operator">+</font><font class="ls-quote">|&lt;/td&gt;&lt;/tr&gt;|</font><font class="ls-operator">)</font><font class="ls-statement">Set</font> ve
  
  <font class="ls-operator">=</font> vec
  
  <font class="ls-operator">.</font>GetFirstEntry
   
  <font class="ls-statement">Do</font> Until ve
  
  <font class="ls-operator">Is</font><font class="ls-constant">Nothing</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">|&lt;tr&gt;|</font><font class="ls-operator">)</font>    
    
  <font class="ls-statement">For</font> k
  
  <font class="ls-operator">=</font> 0
  
  <font class="ls-statement">To</font><font class="ls-function">Ubound</font><font class="ls-operator">(</font>ve
  
  <font class="ls-operator">.</font>ColumnValues
  
  <font class="ls-operator">)</font><font class="ls-statement">Step</font> 1
     colVals
  
  <font class="ls-operator">=</font> ve
  
  <font class="ls-operator">.</font>ColumnValues
  
  <font class="ls-operator">(</font>k
  
  <font class="ls-operator">)</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">"&lt;td&gt;"</font><font class="ls-operator">)</font><font class="ls-statement">If</font><font class="ls-function">Isarray</font><font class="ls-operator">(</font>colVals
  
  <font class="ls-operator">)</font><font class="ls-statement">Then</font><font class="ls-statement">For</font> m
  
  <font class="ls-operator">=</font> 0
  
  <font class="ls-statement">To</font><font class="ls-function">Ubound</font><font class="ls-operator">(</font>colVals
  
  <font class="ls-operator">)</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font>colVals
  
  <font class="ls-operator">(</font>m
  
  <font class="ls-operator">)</font><font class="ls-operator">)</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">"&lt;br /&gt;"</font><font class="ls-operator">)</font> 
      
  <font class="ls-statement">Next</font><font class="ls-statement">Else</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font>colVals
  
  <font class="ls-operator">)</font>      
     
  <font class="ls-statement">End</font><font class="ls-statement">If</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">"&lt;/td&gt;"</font><font class="ls-operator">)</font><font class="ls-statement">Next</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">|&lt;/tr&gt;|</font><font class="ls-operator">)</font>    
    
  <font class="ls-statement">Set</font> ve
  
  <font class="ls-operator">=</font> vec
  
  <font class="ls-operator">.</font>GetNextEntry
  
  <font class="ls-operator">(</font>ve
  
  <font class="ls-operator">)</font><font class="ls-statement">Loop</font><font class="ls-statement">Else</font><font class="ls-comment">'This is for demo only --- in production this info is useless</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">|&lt;tr class="failure"&gt;&lt;td colspan="7"&gt;No data found for |</font><font class="ls-operator">+</font>catList
  
  <font class="ls-operator">(</font>i
  
  <font class="ls-operator">)</font><font class="ls-operator">+</font><font class="ls-quote">|&lt;/td&gt;&lt;/tr&gt;|</font><font class="ls-operator">)</font><font class="ls-statement">End</font><font class="ls-statement">If</font><font class="ls-statement">Next</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-quote">"&lt;/table&gt;"</font><font class="ls-operator">)</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AddNewline
  
  <font class="ls-operator">(</font>1
  
  <font class="ls-operator">)</font>
 
Exit_RenderViewToRT
  
  <font class="ls-operator">:</font><font class="ls-statement">Exit</font><font class="ls-statement">Sub</font>
 
Err_RenderViewToRT
  
  <font class="ls-operator">:</font><font class="ls-function">Print</font><font class="ls-function">Error$</font><font class="ls-operator">&amp;</font><font class="ls-quote">" in line "</font><font class="ls-operator">&amp;</font><font class="ls-function">Cstr</font><font class="ls-operator">(</font><font class="ls-function">Erl</font><font class="ls-operator">)</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AppendText
  
  <font class="ls-operator">(</font><font class="ls-function">Error$</font><font class="ls-operator">&amp;</font><font class="ls-quote">" in line "</font><font class="ls-operator">&amp;</font><font class="ls-function">Cstr</font><font class="ls-operator">(</font><font class="ls-function">Erl</font><font class="ls-operator">)</font><font class="ls-operator">)</font><font class="ls-function">Call</font> rt
  
  <font class="ls-operator">.</font>AddNewline
  
  <font class="ls-operator">(</font>1
  
  <font class="ls-operator">)</font> 
 
  <font class="ls-statement">Resume</font> Exit_RenderViewToRT
 
  <font class="ls-statement">End</font><font class="ls-statement">Sub</font>
 </div></pre>
<div style="FONT-SIZE: 8pt; COLOR: gray; FONT-FAMILY: sans-serif; BORDER: 1 solid Grey; margin : 5px 50px 5px 50px;">
 <center>
   This LotusScript was converted to HTML using the <b><i>ls2html</i></b> routine, 
  <br>provided by Julian Robichaux at <a href="http://www.nsftools.com" target="_blank">nsftools.com</a>. 
 </center>
</div> To make that all work you need a few fields on your $$Viewtemplate.. form: 
<ol>
 <li><b>QUERY_STRING</b>:Text, Single Value, Editable: to capture the Query String</li>
 <li><b>UserNameList</b>:Names, MultiValue, computed:<br> tmpUsedHere := @DbColumn("Notes":"Cache";"";"LookforGroupsAndRoles";1); tmpThisUser := @Trim(@Replace(@UserNamesList;"*";"")); @Keywords(tmpUsedHere;tmpThisUser)</li>
 <li><b></b>:</li>
</ol> You can <a href="/blog/downloads/">Download some sample code</a>
<br>(Note: in this sample there is no processing of the UNIDs). YMMV 
<br><b>Update:</b> Some more links to the topic on developer works: 
<ul>
 <li><a href="http://www.ibm.com/developerworks/lotus/library/reader-names/">Using and understanding Reader Names fields in IBM Lotus Notes and Domino</a></li>
 <li><a href="http://www.ibm.com/developerworks/lotus/library/notes7-application-performance2/">Lotus Notes/Domino 7 application performance: Part 2: Optimizing database views</a></li>
 <li><a href="http://www.ibm.com/developerworks/lotus/performance/"></a>List of all performance related articles</li>
</ul></div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 28 February 2009
<span class="divider">|</span>
<a href="/blog/2009/02/reader-fields-again.html#comments">Comments (6)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2009/02/reader-fields-again.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_AAEE224AED987ABD4825756A00357C78" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_AAEE224AED987ABD4825756A00357C78"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>mark</b> on <i>Saturday 28 February 2009 AD</i>:<br /> 
  now that is a bloody good article!!!!!
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Bill</b> on <i>Saturday 28 February 2009 AD</i>:<br /> 
  Possibly one last thing to mention (sorry, Channelling Steve Jobs there) 
  <br /> 
  <br />The Notes client (in a trad. notes app) is doing the filtering. That is, its scanning the view and downloading the entire view to the client, and the client itself deals with the reader fields before passing the valid documents to the client process. 
  <br /> 
  <br />So in the scenario above, if its a notes app, there will be a HUGE amount of network traffic, delay, latency, the whole 9 yards - before anything happens. 
  <br /> 
  <br />On a web-based application, all that effort happens on the server (thus killing server performance). 
  <br /> 
  <br />So if you have a notes app thats got lots (100k or above) of documents, been running for years, and is now painfully slow, reader/author fields might be the reason. 
  <br /> 
  <br />(And this is why its not a good idea to use reader/author fields in a &quot;large&quot; Notes directory) 
  <br /> 
  <br />---* Bill
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Henning Heinz</b> on <i>Saturday 28 February 2009 AD</i>:<br /> 
  I haven't tested this but for 500.000 documents it might be worth evaluating if an extra field like &quot;DocAccess&quot; for the &quot;@Unique(DocAuthors:DocReaders)&quot; makes sense. The performance problems described by Bill are real but Readers and Authors fields are often a requirement if you need a certain security level. Larger applications then tend to split into more databases. I think I read somewhere that in theory it would be possible (for IBM) to speed up Readers and Authors performance but it hasn't happened yet. Awesome tutorial by the way 
  <img alt="Emoticon smile.gif" src="/blog/images/emoticons/smile.gif" border="0" />
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Nathan T. Freeman</b> on <i>Sunday 01 March 2009 AD</i>:<br /> 
  Great article, sir. One thing that we should all ask the dev team for is a simple @ReaderList/@AuthorList formula pair, that would return the set of values from all reader &amp; author fields. 
  <br /> 
  <br />Because it's rare that developers have the foresight to put all those lists in singular fields, and even more rare that such a field name would be consistent enough across applications to make a single tutorial apply univerally.
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Monday 02 March 2009 AD</i>:<br /> 
  @Nathan: That's a good idea: @Readernames and @Authorname makes a lot of sense. Did u put that into { 
  <a href="http://www.ideajam.net/" rel="nofollow" target="blank">Link</a> } already? 
  <br /> 
  <img alt="Emoticon smile.gif" src="/blog/images/emoticons/smile.gif" border="0" /> stw
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Kevin Pettitt</b> on <i>Tuesday 03 March 2009 AD</i>:<br /> 
  @Nathan, to get around the lack of @ AuthorList, SuperNTF actually does have a feature whereby a DocAuthors field on the &quot;SYSTEM - Standard Hidden Form Header&quot; subform collects all the Authors fields that might be present on the form using the following: 
  <br /> 
  <br />Sub Postsave(Source As Notesuidocument) 
  <br /> 'The purpose of this code is: 
  <br /> '1. Populate the DocAuthors field with ALL the valid document Authors (not just what @Author would say) 
  <br /> Dim ws As New NotesUIWorkspace 
  <br /> Dim thisdoc As NotesDocument 
  <br /> Dim authorArray As Variant 
  <br /> 
  <br /> Set thisdoc = Source.Document 
  <br /> Redim authorArray(0) 
  <br /> 
  <br /> Forall item In thisdoc.Items 
  <br /> If item.IsAuthors Then 
  <br /> If item.name &lt;&gt; &quot;DocAuthors&quot; Then 
  <br /> 'Ignore the target field 
  <br /> authorArray = Arrayappend(authorArray, item.values) 
  <br /> End If 
  <br /> End If 
  <br /> End Forall 
  <br /> 
  <br /> thisdoc.DocAuthors = Fulltrim(Arrayunique(authorArray)) 
  <br /> Call thisdoc.Save(True, False, True) 
  <br />End Sub 
  <br /> 
  <br />I suppose extending that to Readers fields would be easy enough with the same approach. I will freely admit this approach could get ugly performance-wise with really big forms, but for most applications where SuperNTF is likely to be used it seems OK.
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2009/02/customer-disservice.html"><i class="icon-hand-left"></i>Customer Disservice</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2009/03/quickr-dominodoc-and-a-lotus-redbook.html">Quickr, Domino.Doc and a Lotus Redbook<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/">2009</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/02/">February</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2022 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2009/02/reader-fields-again.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "AAEE224AED987ABD4825756A00357C78");
 		};
	</script>

</body>
</html>
