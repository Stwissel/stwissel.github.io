<!DOCTYPE html>
<html lang="en">
<head>
<title>Setting up DXLMagic to run from the command line - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Setting up DXLMagic to run from the command line" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2009/02/setting-up-dxlmagic-to-run-from-the-command-line.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Setting up DXLMagic to run from the command line" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2009,2018 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included:  Salesforce, IBM, JEE, .Net, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<meta name="Keywords"
	content="lotus,domino,quickplace,sametime,blog,template,blogging,blogger,notes,r9,verse,r8,r7,r6,r5,raven,k-station,nsf,ntf,websphere,agile,sdlc,jee,ml,salesforce,.net,personcentric,singapore,twins,JavaScript,vertx, nodejs" />
<meta name="Abstract"
	content="Thoughts, Insights and Opinions of Stephan H. Wissel. Topics included: Salesforce, IBM , JEE, NodeJS, ML, .Net, Vert.x, Software Archtecture, Personcentric Development, Agile Software, SDLC, Singapore and my Twins" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shCore.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shThemeMidnight.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link href='//fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

    <script> 
var $buoop = {notify:{e:-0.01,f:-0.01,o:-0.01,s:-0.01,c:-0.01},insecure:true,unsupported:true,api:5}; 
function $buo_f(){ 
 var e = document.createElement("script"); 
 e.src = "//browser-update.org/update.min.js"; 
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script>

    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/">2009</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/02/">February</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/dxlmagic.html">DXLMagic</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/lotusphere2009.html">Lotusphere2009</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2009/02/domino-email-for-android-devices-and-others.html"><i class="icon-hand-left"></i>Domino eMail for Android devices (and others)</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2009/02/advertising-with-linkstar.html">Advertising with LinkStar?<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Setting up DXLMagic to run from the command line</small></h1>
					<hr />
					<div>It is a little hidden in the slide deck. These are the steps for setting up the 
<a href="http://www.openntf.org/Projects/pmt.nsf/ProjectLookup/DXLMagic">DXLMagic</a> environment to be useable. You need to replace [AppDir] with the path to your Notes application (typically something like C:\Notes, C:\Program Files\IBM\Lotus Notes, /applications/lotus/notes or /opt/ibm/lotus/notes, depending on your platform. You also will need to set [DataDir]: the place where your nsf live and [JarDir] where you copied the DXLMagic.jar file (can be in the Notes directory, up to you). So here are the steps: 
<ol> 
 <li>Install and configure <a href="http://www.java.com/">Java 6</a> (It should work with Java 5, but I haven't tested it)</li> 
 <li>Copy the DXLMagic.jar file into the [JarDir]</li> 
 <li>Edit your environment to include Notes on the path and the Jar files on the classpath and add an environment parameter LD_LIBRARY: 
  <ul> 
   <li><b>Windows:</b> <i>notepad c:\autoexec.bat</i> and add these lines:<br> <span style="font : 12px Courier"> SET PATH=%PATH%;[AppDir]<br> SET CLASSPATH=.;[AppDir]\jvm\lib\ext\*;[JarDir]\DXLMagic.jar<br> SET LD_LIBRARY=[AppDir] </span> (<b>Reminder</b>: if you have spaces in your path you need to put the path in quotes)</li> 
   <li><b>Linux:</b> <i>sudo nano /etc/environment</i> and add/edit these lines:<br> <span style="font : 12px Courier"> PATH="[whatever was there]:[AppDir]"<br> CLASSPATH=".:[AppDir]/jvm/lib/ext/*:[JarDir]/DXLMagic.jar"<br> LD_LIBRARY="[AppDir]" </span></li> 
   <li><b>Mac:</b> <i>vi ~/.profile</i> and add/edit these lines:<br> <span style="font : 12px Courier"> export DYLD_LIBRARY_PATH=[AppDir]/Contents/MacOS (where AppDir is going to look something like: /Applications/Notes.app)<br> export CLASSPATH=$CLASSPATH$:.:[AppDir]/Contents/MacOS/jvm/lib/ext/*:[JarDir]/DXLMagic.jar"<br> </span> (Thx <a href="http://www.lbenitez.com/">Luis</a>)</li> 
  </ul> </li> 
</ol> 
<b>Update</b>: Fixed the classpath to ...ext/* 
<br> Now you are ready to go. Lets have a look at the available commands.You invoke all of them from the command line: 
<i>java [name of the command] [parameters]</i>. All commands use at least one parameter. Directories need to have the trailing (back)slashes. 
<ul> 
 <li><b>com.ibm.sg.dxlmagic.DesignExporter</b> [Outputpath including trailing / or \] [PathToDatabase relative to the data directory] [optional server]<br> Exports the entire design of a database into one DXL file in the working directory (some path stuff needs fixing, so it might end-up somewhere else <img src="http://www.wissel.net/blog/emoticons/DLYH-5MZVLY/$File/smile.gif"> ). Depending on your template you might get some interesting error messages or even a JVM crash. </li> 
 <li><b>com.ibm.sg.dxlmagic.DesignExtractor</b> [Path to DXL file] [Outputpath including trailing / or \] [PathToCommandFile]<br> Takes an exported DXL file and extracts elements you are interested in. Ability to split into multiple files. The command file determines what should happen. The format of the command file is easy: a # sign is a comment, other lines need to have a structure: [output file name],[Mode: sinlge|multiple],[XPath expression e.g. /d:database/d:form for all forms. Typically you use the extractor to create working files to later be used in the DesignInjector. </li> 
 <li><b>com.ibm.sg.dxlmagic.DesignImporter</b> [PathToSource.dxl] optional [create] to create a new nsf (aborts if one exists) optional [smart] to import only design elements that have changed from the existing ones. optional [single] import elements one by one. If one fails the others still get imported. <br> Imports a DXL into an existing or new NSF. When smart or single is selected failing elements will not prevent the whole operation from failing. LotusScript does *not* get recompiled. I recommend to use a compile all to be sure everything is fine. </li> 
 <li><b>com.ibm.sg.dxlmagic.DesignInjector</b> [PathToCommandFile] [PathToNsf relative to data directory] [Path to directory with source files to be injected]<br> Takes snippets of code an injects them into an existing database. The database must be local. Injection is smart and only updates design elements that have been changed. all commands in a command file are executed before the result is written back. LotusScript is not recompiled. The injector uses the DesignExporter and DesignImporter to read/write nsf. Structure of a command file: # is a comment line, no inline comments possible. [FileName for Snippet to insert relative to Path given above], [Insertion Method], [XPath Expression]. The insertion methods are: 
  <ul> 
   <li><b>BEFORE</b>: Adds the fragment as sibling before each node found by the XPath expression.</li> 
   <li><b>AFTER</b>: Adds the fragment as sibling after each node found by the XPath expression.</li> 
   <li><b>REPLACE</b>: Replaces each node found by the XPath expression with the fragment.</li> 
   <li><b>FIRSTCHILD</b>: Adds the fragment as first child of each node found by the XPath expression.</li> 
   <li><b>LASTCHILD</b>: Adds the fragment as last child of each node found by the XPath expression.</li> 
   <li><b>REMOVE</b>: Ignores the content in the fragment file and removes each node found by the XPath expression.</li> 
   <li><b>BEGINNING</b>: Adds the text content of the file into the text of each node found by the XPath expression at the beginning. Used for LotusScript insertion. Takes care of Sub/Function at the beginning.</li> 
   <li><b>END</b>: Adds the text content of the file into the text of each node found by the XPath expression at the beginning. Used for LotusScript insertion. Takes care of End Sub/End Function at the end.</li> 
  </ul> The injector executes the XPath and inserts the code based on the insertion method chosen. Except for LotusScript code snippets the source file needs to contain a valid XML fragment (most likely created by the DesignExtractor and then edited/transformed). </li> 
 <li><b>com.ibm.sg.dxlmagic.TransformXML</b> [SourceXMLFile] [StyleXSLTFile] [TargetFile] optional [parameter=value] ...<br> Runs an XSLT transformation. </li> 
 <li><b>com.ibm.sg.dxlmagic.DocumentServer</b> [OutputPath with trailing / or \ ] [ServerName (Use "local" for local)]<br> Exports all databases that are a template or that don't have a template specified. Runs the DocumentDesignTags and DocumentDesignMetrics to generate a CSV file for estimation of spent effort of any given environment. </li> 
 <li><b>com.ibm.sg.dxlmagic.ViewTuner</b> [Path To Nsf relative to data directory] (coming soon) <br> Executes a radical simplification of view selection formulas into "fieldname=1" and injects subform, agent and script library to keep documents updated. A separate article will describe that in detail. </li> 
</ul> More details and XSLT stylesheets will follow soon.</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 2009-02-20 01:53
<span class="divider">|</span>
<a href="/blog/2009/02/setting-up-dxlmagic-to-run-from-the-command-line.html#comments">Comments (2)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/dxlmagic.html">DXLMagic</a>  <a href="/blog/categories/lotusphere2009.html">Lotusphere2009</a> 

						<div class="shariff" data-lang="en" data-url="https://www.notessensei.com/blog/2009/02/setting-up-dxlmagic-to-run-from-the-command-line.html" data-services="[&quot;whatsapp&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-title="Setting up DXLMagic to run from the command line"></div>
						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2009/02/setting-up-dxlmagic-to-run-from-the-command-line.html";
						</script>
					</p>

				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_8FDF59F7BA3199D248257562005CC77F" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_8FDF59F7BA3199D248257562005CC77F"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>Scott Leis</b> on <i>Friday 27 February 2009 AD - 10:51 Korea Standard Time</i>:<br /> 
  You mention [DataDir] in the first paragraph but don't use it in the environment variables. Should LD_LIBRARY actually be set to [DataDir]?
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Monday 02 March 2009 AD - 02:52 Korea Standard Time</i>:<br /> 
  @Scott: We actually don't need DataDir. Thx for noticing.
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2009/02/domino-email-for-android-devices-and-others.html"><i class="icon-hand-left"></i>Domino eMail for Android devices (and others)</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2009/02/advertising-with-linkstar.html">Advertising with LinkStar?<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/">2009</a> <span class="divider">/</span></li>
  <li><a href="/blog/2009/02/">February</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/dxlmagic.html">DXLMagic</a>
  </li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/lotusphere2009.html">Lotusphere2009</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I'm a Cloud "Program Architect Director", working for Salesforce. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://plus.google.com/+StephanWissel/about" rel="author" style="text-decoration: none;">
						    <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" alt="" style="border: 0; width: 16px; height: 16px;" /> Google+</a></li>
						<li><a href="skype://notessensei?chat">Skype</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://astore.amazon.com/wissenetblog-20">Amazon Store</a></li>
						<li><a href="https://kindle.amazon.com/profile/Stephan-H--Wissel/1659300">Amazon Kindle</a></li>
						<li><a href="http://notessensei.spreadshirt.com/">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2018 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2009/02/setting-up-dxlmagic-to-run-from-the-command-line.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="/blog/js/shariff.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/shCore.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJava.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushJScript.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushXml.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushBash.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushPlain.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushVb.js"></script>
    <script type="text/javascript" src="/blog/js2/shBrushCss.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>
    <script type="text/javascript">
    $(document).ready(function() {
            SyntaxHighlighter.all();
    });
    </script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "8FDF59F7BA3199D248257562005CC77F");
 		};
	</script>

</body>
</html>
