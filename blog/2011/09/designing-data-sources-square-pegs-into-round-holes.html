<!DOCTYPE html>
<html lang="en">
<head>
<title>Designing data sources - square pegs into round holes - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - Designing data sources - square pegs into round holes" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2011/09/designing-data-sources-square-pegs-into-round-holes.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - Designing data sources - square pegs into round holes" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="Designing data sources - square pegs into round holes - Stephen Mitchel translated the end of verse 21 of the Dao De Ching ( 何以知衆甫之狀哉？以此。&#61; wu he yi zhi zhong fu zhi zhuang zai? yi ci.) as &#39; How do I know this is true? I look inside myself and see.&#39;. Lao zhu could have been a software platform or framework architect . Getting the gist of a platform often " />
<meta name="Keywords"
	content="XPages," />
<meta name="Abstract"
	content="Designing data sources - square pegs into round holes - Stephen Mitchel translated the end of verse 21 of the Dao De Ching ( 何以知衆甫之狀哉？以此。&#61; wu he yi zhi zhong fu zhi zhuang zai? yi ci.) as &#39; How do I know this is true? I look inside myself and see.&#39;. Lao zhu could have been a software platform or framework architect . Getting the gist of a platform often " />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/admonition.css" />
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/">2011</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/09/">September</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
	<li class="pull-right">
	<span class="divider">|</span><a href="/blog/d6plinks/SHWL-8LJDF7" title="originally published at /blog/d6plinks/SHWL-8LJDF7">SHWL-8LJDF7</a>
	</li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2011/09/scaling-xpages-across-servers.html"><i class="icon-hand-left"></i>Scaling XPages across servers</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2011/09/less-passwords-more-security-ssh-connections-with-certificates.html">Less passwords, more security. ssh connections with certificates<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>Designing data sources - square pegs into round holes</small></h1>
					<hr />
					<div>Stephen Mitchel translated the end of <a href="http://ariyavansa.org/dao/ddc-21/">verse 21</a> of the Dao De Ching ( 何以知衆甫之狀哉？以此。= wu he yi zhi zhong fu zhi zhuang zai? yi ci.) as " <i>How do I know this is true? I look inside myself and see.</i>". <a href="http://en.wikipedia.org/wiki/Laozi">Lao zhu</a> could have been a software platform or framework architect <img src="/blog/images/emoticons/smile.gif">. Getting the gist of a platform often requires a zen like approach. Unfortunately in the heat of delivery pressures things get lost and we end up with "Frankenworks" instead of "Frameworks", where functionality works, but feels rather "bolted on". 
<br>
 Currently there is <a href="http://extlib.openntf.org/">work underway</a> to make XPages a first class RDBMS front-end. The data source looks very promising, nevertheless prompted me to reflect on the nature of data access, like I mused about <a href="/blog/2010/10/progress-in-data-structures.html">structures</a> before. There are some structural differences between a document centric approach (Domino, XMLDB, XForms, ObjectDB, JsonDB etc) and a relational database. Doing justice to both sides poses a formidable challenge: 
<ul>
 <li>The nature of a relational database is a flat set. A set of rows and columns that get created, read, updated and deleted. It is always about a set, that more than often can yield from more than one table. There is no such thing as a single record, it is just a set with one member. All <a href="http://en.wikipedia.org/wiki/Object-relational_mapping">OR-Mappers</a> struggle with this</li>
 <li>The nature of Domino the the document. Data is stored in documents. Collections (views/folders/search/all) are designed to get access to a document (set). The result of this nature is a dual access to data: there is the collection which is read only (and can be flat or hierarchical) and there is the document which is read/write where data changes happen.</li>
 <li>The document has a predefined set of meta data absent from a relational table: ID, access control, various dates, hierarchy (isResponse) etc. One could add those to an individual database schema, but they can't be taken for granted in RDBMS (a story for another time: designing a RDBMS schema to work well with XPages)</li>
 <li>The document sports structured data. In Domino that are multi-value fields, in other <a href="http://en.wikipedia.org/wiki/NoSQL">NoSQL</a> databases these structures can be more complex. In RDBMS these structures are splattered across multiple tables and pulled back together with JOIN statements. This makes it easy to run reports or do mass-updates, but makes transporting a logical entity from one database to another a pain</li>
 <li>The dominating clause in RDBMS is <code>WHERE</code> which is needed for all operations including updates, while Domino acts on the current document (doc.save)</li>
 <li>The document is closely connected to the Notes/Domino event model. Both XPages and the classic Notes client (and to a lesser extend classic Domino) offer rich data events:<code>queryNewDocument, queryOpenDocument, postOpenDocument, querySaveDocument, postSaveDocument</code> etc.</li>
 <li>SQL doesn't provide an event model, but the various RDBMS implementation provide triggers that serve a similar purpose that run <a href="http://en.wikipedia.org/wiki/Stored_procedures">stored procedures</a> (and are mostly written in incompatible flavors of SQL - check <a href="http://www.swissql.com/">SwissQL</a> for translating them). I'm sure about INSERT, UPDATE and DELETE triggers as equivalent to query/post save events. I haven't looked for a while, but last time I checked SELECT wouldn't trigger a stored procedure, but you could call one directly.</li>
 <li>The splattering of data across tables in RDBMS led naturally to another capability of relational databases, that comes in handy for large manipulations too: transactional integrity. If all you need is saving one document, there is no imminent need for a transaction mechanism, distributing data over multiple (parent, child) tables however mandates an integrity protection</li>
</ul> Interestingly a document oriented data model is closer to the real world's (read business users') perception of data: a contract is a document, as is a purchase order as is a bank note. Tables usually serve as (table of sic.) content listing for documents or detail listings inside documents. 
<br>
So what does that mean for the design of additional data sources in Domino? There are <b>two possible approaches</b> which luckily <b>can co-exist</b> since they are not mutually exclusive: follow the nature of Domino or follow the nature of the source (not the <a href="http://en.wikipedia.org/wiki/Mitochondrion">nature of the force</a>, that's for <a href="http://en.wikipedia.org/wiki/Jedi">others</a>). The current <a href="http://extlib.openntf.org/">OpenNTF extlib</a> approach is the later: it is designed around the relational feature set. 
<br>
 Going forward I would like to see data sources that build on the duality of the Domino data access: the read-only collection and the read/write document. 
<br><img src="/blog/images/2011/datasources.jpg" border="0" alt="Datasources and the API">
<ul>
 <li>Each data source will have 2 elements: a read-only collection and a read/write entry/record/document</li>
 <li>These sources have the same method signatures as DominoDocument and DominoView. So in a design a developer could swap them out for each other. <code>MyRDBMSSource.getItemValueString("Location")</code> would work the same way as <code>DominoDocument.getItemValueString("Location")</code>. For an RDBMS developer that might look a little strange, but only caries a one time learning affordance, greatly outweighted by the benefit of swappable sources. Of course the parameters would be rather different. In a RDBMS source there probably would be a parameter to define what getDocumentUniqueID would return.</li>
 <li>All the document events would fire with every data source</li>
 <li>Data sources can implement additional tags to offer access matching their nature</li>
</ul> What data sources can I imagine? This is not a revelation of IBM's plans, I rather expect some of them being provided by the community or as commercial business partner offering: 
<ul>
 <li>enhanced JDBC source following the Domino pattern</li>
 <li>Domino data source encapsulating the <a href="/blog/2009/05/notes-pattern-inversion-of-logging.html">inversion of logging</a> pattern</li>
 <li><a href="http://www-01.ibm.com/software/data/db2/xml/">DB/2 PureXML</a> data source. It would use the standard JDBC approach for the collections and <a href="http://en.wikipedia.org/wiki/PureXML">PureXML</a> to read/write document data. It would implement the spirit of NSFDB2 without the constraints of replicating all NSF features (data only)</li>
 <li>Sharepoint. One could build Sharepoint front-ends that survive a Sharepoint upgrade without the need to rewrite them</li>
 <li>IBM <a href="http://www-01.ibm.com/software/integration/wmq/">MQ</a></li>
 <li>Web services (take a <a href="http://en.wikipedia.org/wiki/Wsdl">WSDL</a> and make a form)</li>
 <li><a href="http://en.wikipedia.org/wiki/CouchDB">CouchDB</a></li>
 <li>3270 Terminal / IBM <a href="http://www-01.ibm.com/software/awdtools/hats/">HATS</a></li>
 <li><a href="http://dev.w3.org/html5/webstorage/">HTML5 storage</a></li>
</ul> What's your imagination? (need <a href="http://en.wikipedia.org/wiki/Barney_%26_Friends">help</a>?)</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 13 September 2011
<span class="divider">|</span>
<a href="/blog/2011/09/designing-data-sources-square-pegs-into-round-holes.html#comments">Comments (1)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/xpages.html">XPages</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2011/09/designing-data-sources-square-pegs-into-round-holes.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_00A93BC1C462A9FC4825790600357C2F" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_00A93BC1C462A9FC4825790600357C2F"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>ChrisC</b> on <i>Tuesday 13 September 2011 AD</i>:<br /> 
  Excellent article stephan. Been recently doing some exploritary work around J2EE and glassfish. I have really taken to JPA and EJB - wonder if there is some possibility of bringing these technologies to the party (possibly borrowing from / integrating with Websphere?). I like the idea of doing all this in eclipse (designer), mapping entities to classes (maybe documents maybe relational records) and then using EJB and managed beans to wire together the business logic, data and front end (JSF through XPages). 
  <br /> 
  <br />Seems a bit more industry standard and there are opportunities to integrate with the other products in the portfolio.
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2011/09/scaling-xpages-across-servers.html"><i class="icon-hand-left"></i>Scaling XPages across servers</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2011/09/less-passwords-more-security-ssh-connections-with-certificates.html">Less passwords, more security. ssh connections with certificates<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/">2011</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/09/">September</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/xpages.html">XPages</a>
  </li>
	<li class="pull-right">
	<span class="divider">|</span><a href="/blog/d6plinks/SHWL-8LJDF7" title="originally published at /blog/d6plinks/SHWL-8LJDF7">SHWL-8LJDF7</a>
	</li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="https://www.stickermule.com/u/43c09fe6343315f">Stickers from Stickermule</a></li>
						<li><a href="https://github.com/Stwissel">GitHub</a></li>
						<li><a href="https://bitbucket.org/stwissel/">Bitbucket</a></li>
						<li><a href="https://bsky.app/profile/stwissel.bsky.social">Bluesky</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2025 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2011/09/designing-data-sources-square-pegs-into-round-holes.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script type="text/javascript" src="/blog/js2/admonition.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "00A93BC1C462A9FC4825790600357C2F");
 		};
	</script>

</body>
</html>
