<!DOCTYPE html>
<html lang="en">
<head>
<title>How fragmented are your Domino Server Drives on Windows - Help needed! - NotesSensei's Blog</title>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72033-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible"  content="chrome=1" />
<meta http-equiv="Content-Language" content="en" />
<meta rel="meta" link="application/rdf+xml" content="/foaf.rdf" />
<meta property="og:title"     content="wissel.net - How fragmented are your Domino Server Drives on Windows - Help needed!" />
<meta property="og:type"      content="blog" />
<meta property="og:url"       content="https://wissel.net/blog/2011/03/how-fragmented-are-your-domino-server-drives-on-windows-help-needed.html" />
<meta property="og:image"     content="//www.wissel.net/blog/img/wisselnet.gif" />
<meta property="og:site_name" content="wissel.net" />
<meta name="viewport"         content="width=device-width, initial-scale=1.0" />
<meta name="ROBOTS"           content="FOLLOW, NOIMAGEINDEX" />
<meta name="DC.Title"         content="NotesSensei's Weblog - How fragmented are your Domino Server Drives on Windows - Help needed!" />
<meta name="Author"           content="Stephan H. Wissel" />
<meta name="ICBM"             content="1.2994, 103.8425" />
<meta name="Copyright"        content="2002,2022 Stephan H. Wissel - Creative commons licence" />
<meta name="twitter:site"     content="@notessensei" />
<meta name="twitter:card"     content="summary" />
<meta name="xing:author"      content="https://www.xing.com/profile/StephanH_Wissel" />
<meta name="description"
	content="How fragmented are your Domino Server Drives on Windows - Help needed! - Disk fragmentation has been discussed here more than once and defragmentation is part of the ideal Notes upgrade and the Upgrade Cheat Sheet. In a comment Nico57 points out that the disk allocation scheme of Domino is a huge contributor, especially when compact -c is part of your database hygiene ro" />
<meta name="Keywords"
	content="Show-N-Tell Thursday," />
<meta name="Abstract"
	content="How fragmented are your Domino Server Drives on Windows - Help needed! - Disk fragmentation has been discussed here more than once and defragmentation is part of the ideal Notes upgrade and the Upgrade Cheat Sheet. In a comment Nico57 points out that the disk allocation scheme of Domino is a huge contributor, especially when compact -c is part of your database hygiene ro" />
<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/blog/style/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/responsive.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/wisselblog.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/main.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/blogcodedisplay.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/shariff.complete.css" />
<link rel="stylesheet" type="text/css" href="/blog/style/markdown.css" />
<link rel="stylesheet" type="text/css" href="/blog/css/prism.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="/blog/img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/blog/img/favicon-16x16.png" sizes="16x16" />


<link rel="alternate" type="application/rss+xml" title="RSS News Feed" href="https://feeds.feedburner.com/Wisselnetfeed" />

<meta name="Revisit-After" content="90 Days" />
</head>
<body class="line-numbers">
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<a class="btn btn-navbar" data-toggle="collapse"
				data-target=".nav-collapse"> <span class="icon-bar"></span> <span
				class="icon-bar"></span> <span class="icon-bar"></span>
			</a> <a class="brand" href="/">wissel.net</a>
			<div class="nav-collapse">
				<ul class="nav">
					<li><a href="/index.html">Home</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li><a href="/blog/series.html">Series</a></li>
					<li><a href="/blog/downloads/">Downloads</a></li>
					<li><a href="https://stwissel.github.io/presentations/" title="Presentations maintained on GitHub">Presentations</a></li>
					<li><a href="/blog/imprint.html">About / Imprint</a></li>
				</ul>
				<form action="//www.google.com/cse" id="cse-search-box"
					class="navbar-search pull-right">
					<div>
						<input type="hidden" name="cx"
							value="partner-pub-4562257798204150:muo14ionenw" /> <input
							type="hidden" name="ie" value="ISO-8859-1" /> <input type="text"
							name="q" class="search-query span2" placeholder="Search" />
						<!-- input type="submit" name="sa" value="Search" class="btn btn-small"/-->
					</div>
				</form>
			</div>
		</div>
	</div>
<div class="navbar-spacer"></div>

	<div class="container">
    		<br />
		<header>
			<div id="mainsmall"  class="hero-unit">
				<h2>wissel.net</h2>
				<p>Usability - Productivity - Business - The web - Singapore &amp; Twins</p>
			</div>
		</header>

     
    <ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/">2011</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/03/">March</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a>
  </li>
</ul>

		<div class="row-fluid">
			<div class="span12">
				
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2011/03/tuning-out-of-email-conversations.html"><i class="icon-hand-left"></i>Tuning out of eMail conversations</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2011/03/what-happens-when-you-blame-domino-for-not-working-and-i-review-your-setup.html">What happens when you blame Domino for not working and I review your setup?<i class="icon-hand-right"></i></a>
					</li>
				</ul>

				<article class="well well-raised">
					<h1><small>How fragmented are your Domino Server Drives on Windows - Help needed!</small></h1>
					<hr />
					<div>Disk fragmentation has been <a href="/blog/2010/01/domino-and-disk-fragmentation.html">discussed here</a> more than <a href="/blog/2009/05/fixing-a-notes-database-addressing-fragementation-and-a-linux-edition.html">once</a> and defragmentation is part of the <a href="/blog/2009/06/how-does-the-ideal-notes-domino-85-upgrade-looks-like.html">ideal Notes upgrade</a> and the <a href="/blog/2010/12/notes-/-domino-upgrade-cheat-sheet.html">Upgrade Cheat Sheet</a>. In a <a href="t/blog/2010/01/domino-and-disk-fragmentation.html#comment-641CA9F2C8A45A0AC125782A00056FFC">comment</a> Nico57 points out that the disk allocation scheme of Domino is a huge contributor, especially when <code>compact -c</code> is part of your database hygiene routines. 
<br> The <b>irony of compact</b>: your inner structures in the NSF will be squeaky clean, but the content will be (after a while) splattered over your disk like pimples on a teenager's face. The least you can do is to point all temp locations at least onto a different partition. So I had a chat with the engineering team and they are interested to learn about the magnitude of the problem. So <b>I need your help</b>. We like to know how fragmented your NSF on your Windows servers really are. This is what I want you to do: 
<ol>
 <li>Download a copy of Sysinternals <a href="http://technet.microsoft.com/en-us/sysinternals/bb897428">Contig.exe</a> from Microsoft Technet and make it accessible from your Windows server (Copy it there, put it on a network drive you can reach, you know what you are doing)</li>
 <li>Open a command prompt on your server and type <code>[Wherever-contig-is]\contig -a -s [Path-to-Domino-data-directory]\*.nsf &gt; fragmentation.txt </code> If you have database or directory links you have to repeat the process but then you need <code> &gt;&gt; fragmentation.txt</code>. This will list out the files and their fragmentation. Don't forget the -a parameter that tells contig to list only and not to actually defrag</li>
 <li>Find the database with the most fragments as well as the average number of fragments (that number is at the very end of a run). I would like to know these figures</li>
 <li>Head over to the <a href="http://www.lotususers.org/fragment.nsf/">Entry form</a> and let me know. There are only 2 numeric values mandatory (and the selection of two dropdowns), the rest is strictly optional. Leave an eMail address if it is OK to contact you with a question or two.</li>
 <li>Leave a comment here (optional) if you have a question or would like to share special procedures or experiences.</li>
</ol> Your contribution is really appreciated!</div>
					<hr />
					<p>
						Posted by <a rel="author" href="https://plus.google.com/u/0/+StephanWissel">
Stephan H Wissel</a> on 14 March 2011
<span class="divider">|</span>
<a href="/blog/2011/03/how-fragmented-are-your-domino-server-drives-on-windows-help-needed.html#comments">Comments (9)</a>
<span class="divider">|</span>
categories:  <a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a> 

						<script type="text/javascript">
							var permaLink = "https://wissel.net/blog/2011/03/how-fragmented-are-your-domino-server-drives-on-windows-help-needed.html";
						</script>
					</p>
				</article>
				<a name="comments"></a>
				<div class="well well-raised" style="text-align : center">
				<button class="btn btn-lg btn-info" data-toggle="collapse" data-target="#commentform_4BBD72C9EEAC0F7348257853005EECFE" type="button">
		            Add your comment...&nbsp;&nbsp;<span class="glyphicon glyphicon-comment"></span>
	            </button>
	            </div>
				<div id="commentform_4BBD72C9EEAC0F7348257853005EECFE"  class="collapse"></div>
				<div class="well well-raised">
					<h4>Comments</h4>
					<ol id="commentList">
						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Tuesday 15 March 2011 AD</i>:<br /> 
  @Eric The documentation says -s should traverse subdirectories (try contig 
  <code>contig -help</code> for full parameter explanation). I just tried 
  <code>contig -s -a c:\Notes\Data\*.nsf</code> and it worked the sub directories. 
  <br /> 
  <img alt="Emoticon tongue.gif" src="/blog/images/emoticons/tongue.gif" border="0" /> stw
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>ursus schneider</b> on <i>Tuesday 15 March 2011 AD</i>:<br /> 
  Hallo Stephan 
  <br /> 
  <br />I have just inherited a configuration of 5 servers here in Austria - the servers where is such bad nick that I reinstalled all of them (2 x AS/400, 3 x Windows) so the fragmentation is low. Should you still need/want my info please drop me a line. 
  <br /> 
  <br />BTW: I was at your lectures / talks at the edcom Nachlese - good job :o) 
  <br /> 
  <br />cu 
  <br />Ursus
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Erik Brooks</b> on <i>Tuesday 15 March 2011 AD</i>:<br /> 
  Excellent, Stephan. We'll post our results soon. We have many servers running SSDs though, where fragmentation is handled by the drive itself and in many cases intentional. They're not interested in that data, correct?
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Stephan H. Wissel</b> on <i>Tuesday 15 March 2011 AD</i>:<br /> 
  @Eric: Yes SSD don't have a delay due to head positioning, so I guess fragmentation doesn't have much effect on the performance. The magnetic results would be good enough. 
  <br />... and an interesting thought: combat fragmentation by switching media. 
  <br /> 
  <img alt="Emoticon cool.gif" src="/blog/images/emoticons/cool.gif" border="0" /> stw
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>kenio carvalho</b> on <i>Tuesday 15 March 2011 AD</i>:<br /> 
  I use dominodefrag from OpenNTF.It's use contig.exe too. 
  <br />Another good thing: put your log.nsf in another disk.
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Eric Mack</b> on <i>Tuesday 15 March 2011 AD</i>:<br /> 
  Happy to help. I ran the utility on 3 servers but it only picked up files in the DATA dire and not my sub dirs (e.g. MAIL, web, etc.) 
  <br /> 
  <br />Is there an alternate syntac that will scan ALL folders in the DATA dir? If so, I would be happy to run this again for you. 
  <br /> 
  <br />Like Kenio, I also use DominoDefrag - seems to work well, but I have not done it in a while so the fragemnt report may be helpful to you. 
  <br /> 
  <br />Eric
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Adam Osborne</b> on <i>Wednesday 16 March 2011 AD</i>:<br /> 
  Without taking active steps your fragmentation levels are going to be bad. That's why we made Defrag.NSF. 
  <br /> 
  <br />As a long term IBM Business partner we have spent years on this topic and blogged extensively about it, to the point where we feel we are SMEs on the topic. 
  <br /> 
  <br />If you want more details about how bad your fragmentation is by using Notes and Domino native tools, and how to fix it, try Defrag.NSF for free. 
  <br /> { 
  <a href="http://www.preemptive.com.au/defrag" rel="nofollow" target="blank">Link</a> } 
  <br /> 
  <br />
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Andrew Luder</b> on <i>Thursday 17 March 2011 AD</i>:<br /> 
  Get absolutely free DominoDefrag (uses contig.exe 1.60) from { 
  <a href="http://dominodefrag.openntf.org" rel="nofollow" target="blank">Link</a> } and load on your Windows Domino server with Notes INI option DominoDefrag_VerboseLogging=1 and check log.nsf to get before and after results to submit
 
							<hr style="clear : both" />
						</li> 						<li>
							posted by <b>Rob Novak</b> on <i>Friday 18 March 2011 AD</i>:<br /> 
  I recently noticed on a support client's Quickr Domino servers (we support Quickr and Domino and the custom apps, they do the hardware) that Windows defrag had likely never been run across the entire environment - 12 servers - some of them running for 4-5 years. Guess what? 96% file fragmentation. 
  <br /> 
  <br />I strongly suggested a staged defrag, they tried, but with 0.4% complete in 36 hours it was impossible. So I've had to put it into an upgrade plan to wipe the databases, stage their upgrade on alternate servers, defrag while most of the data is gone and then trust Windows to copy over the upgraded places more cleanly. Finally, get them on a schedule!
 
							<hr style="clear : both" />
						</li> 					</ol>
				</div>
				<ul class="breadcrumb pull-centre">
					<li><a href="/blog/2011/03/tuning-out-of-email-conversations.html"><i class="icon-hand-left"></i>Tuning out of eMail conversations</a>
						<span class="divider">|</span></li>
					<li><a href="/blog/"><i class="icon-hand-up"></i>Main</a></li>
					<span class="divider">|</span>
					<li><a href="/blog/2011/03/what-happens-when-you-blame-domino-for-not-working-and-i-review-your-setup.html">What happens when you blame Domino for not working and I review your setup?<i class="icon-hand-right"></i></a>
					</li>
				</ul>

			</div>
		</div>
		<ul class="breadcrumb">
  <li><a href="/blog/">Blog</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/">2011</a> <span class="divider">/</span></li>
  <li><a href="/blog/2011/03/">March</a></li>
  <li class="pull-right">
    <span class="divider">|</span><a href="/blog/categories/showntellthursday.html">Show-N-Tell Thursday</a>
  </li>
</ul>

	</div>
	<footer>
		<div class="container">
			<div class="row">
				<div class="span2">
					<h4>About Me</h4>
					<p>
						I work as "Solution Director Innovation" for HCL Software. I'm based in Singapore.
						<g:plusone size="small" href="https://wissel.net/blog/"></g:plusone>
					</p>
					<a href="//stackoverflow.com/users/131021/stwissel">
					<img src="//stackoverflow.com/users/flair/131021.png" width="208" height="58" alt="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer" title="profile for stwissel at Stack Overflow, Q&amp;A for professional and enthusiast programmer">
				</a>
				</div>
				<div class="span2">
					<h4>Contact</h4>
					<ul>
						<li><a href="https://www.twitter.com/notessensei">Twitter</a></li>
						<li><a href="https://sg.linkedin.com/in/notessensei">LinkedIn</a></li>
						<li><a href="https://www.xing.com/profile/StephanH_Wissel">XING</a></li>
						<li><a href="https://notessensei.myspreadshop.com">NotesSensei's Spreadshirt shop</a></li>
						<li><a href="http://about.me/stephan.wissel/#" title="Another identity site, nothing much here">About Me</a></li>
						<li><a rel="me" href="https://chaos.social/@stw">Chat on Mastodon</a></li>
					</ul>
				</div>
				<div class="span8">
					<h4>Disclaimer</h4>
					<p>This site is in no way affiliated, endorsed, sanctioned,
						supported, nor enlightened by my current or previous employers.
						I may be an employee, but the opinions, theories, facts, etc.
						presented here are my own and are in now way given in any official
						capacity. In short, these are my words and this is my site, not
						my current or former employers' - and don't even begin to think otherwise.</p>
					<p>
						<b>&copy; 2003 - 2022 Stephan H. Wissel - some rights reserved</b> as
						listed here: <a rel="license"
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"><img
							alt="Creative Commons License" style="border-width: 0"
							src="//licensebuttons.net/l/by-nc-sa/3.0/88x31.png" /></a>
						Unless otherwise labeled by its originating author, the content
						found on this site is made available under the terms of an <a
							href="//creativecommons.org/licenses/by-nc-sa/3.0/"
							target="_blank"
							title="Learn more about the creative commons  Attribution-ShareAlike License">Attribution/NonCommercial/ShareAlike
							Creative Commons License</a>, with the exception that no rights are
						granted -- since they are not mine to grant -- in any logo,
						graphic design, trademarks or trade names of any type. Code
						samples and code downloads on this site are, unless otherwise
						labeled, made available under an <a
							href="//www.apache.org/licenses/LICENSE-2.0.html">Apache
							2.0</a> license. Other license models are available on written
						request and written confirmation.
					</p>
				</div>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
		var permaLink = "https://wissel.net/blog/2011/03/how-fragmented-are-your-domino-server-drives-on-windows-help-needed.html";
	</script>
		<script type="text/javascript" src="/blog/js/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="/blog/js/bootstrap.js"></script>
	<script type="text/javascript" src="/blog/js/blogmain.js"></script>
    <script type="text/javascript" src="/blog/js2/prism.js"></script>
	<script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
	<script type="text/javascript">
		_uacct = "UA-72033-1";
		urchinTracker();
	</script>
	<script type="text/javascript" src="//feeds.feedburner.com/~s/Wisselnet?i=https://wissel.net/blog" charset="utf-8"></script>

		<script src="/blog/js2/mustache.js"></script>
	<script src="/blog/js2/blogcomments.js"></script>
	<script type="text/javascript" src="/blog/js2/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="/blog/js2/Markdown.Editor.js"></script>
	<script type="text/javascript" src="//www.google.com/recaptcha/api.js"></script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
	<script type="text/javascript">
		var onloadCallback = function() {
    		renderComment("6LcBxUEUAAAAACzKM8YKb-RVVaIZ3MN6F1Z8FB_4", "4BBD72C9EEAC0F7348257853005EECFE");
 		};
	</script>

</body>
</html>
